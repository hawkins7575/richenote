var Fr=Object.defineProperty;var qr=(s,t,r)=>t in s?Fr(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var bs=(s,t,r)=>qr(s,typeof t!="symbol"?t+"":t,r);import{r as m,a as Ut,R as Vr,b as Fe}from"./vendor-C1JoJ-56.js";import{c as Ft,_ as Br}from"./supabase-B7vP6efo.js";import{C as at,X as ue,M as Bs,D as De,A as Wr,a as cs,b as qe,U as ie,B as lt,c as Ue,L as Ws,E as Gs,d as Ke,S as Me,e as Gr,H as Ie,P as ds,f as je,g as ke,h as ns,i as Hs,j as nt,T as Je,k as be,l as qt,m as ms,n as Ye,o as pt,p as Ys,q as is,r as ws,F as Es,s as os,G as Cs,t as Vt,u as Hr,v as Yr,w as Kr,x as Jr,y as it,z as Bt,I as _s,J as Wt,K as Xr,N as Qr,O as bt,Q as Ps,R as Ss,V as Zr,W as Ge,Y as js,Z as As}from"./ui-DRkL5ZQc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(l){if(l.ep)return;l.ep=!0;const n=r(l);fetch(l.href,n)}})();var Gt={exports:{}},Ts={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=m,sa=Symbol.for("react.element"),ta=Symbol.for("react.fragment"),ra=Object.prototype.hasOwnProperty,aa=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,la={key:!0,ref:!0,__self:!0,__source:!0};function Ht(s,t,r){var a,l={},n=null,i=null;r!==void 0&&(n=""+r),t.key!==void 0&&(n=""+t.key),t.ref!==void 0&&(i=t.ref);for(a in t)ra.call(t,a)&&!la.hasOwnProperty(a)&&(l[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)l[a]===void 0&&(l[a]=t[a]);return{$$typeof:sa,type:s,key:n,ref:i,props:l,_owner:aa.current}}Ts.Fragment=ta;Ts.jsx=Ht;Ts.jsxs=Ht;Gt.exports=Ts;var e=Gt.exports,Ks={},jt=Ut;Ks.createRoot=jt.createRoot,Ks.hydrateRoot=jt.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xs(){return xs=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},xs.apply(this,arguments)}var Te;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Te||(Te={}));const yt="popstate";function na(s){s===void 0&&(s={});function t(a,l){let{pathname:n,search:i,hash:o}=a.location;return Js("",{pathname:n,search:i,hash:o},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(a,l){return typeof l=="string"?l:Rs(l)}return oa(t,r,null,s)}function re(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function Yt(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ia(){return Math.random().toString(36).substr(2,8)}function vt(s,t){return{usr:s.state,key:s.key,idx:t}}function Js(s,t,r,a){return r===void 0&&(r=null),xs({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?Qe(t):t,{state:r,key:t&&t.key||a||ia()})}function Rs(s){let{pathname:t="/",search:r="",hash:a=""}=s;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Qe(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substr(r),s=s.substr(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substr(a),s=s.substr(0,a)),s&&(t.pathname=s)}return t}function oa(s,t,r,a){a===void 0&&(a={});let{window:l=document.defaultView,v5Compat:n=!1}=a,i=l.history,o=Te.Pop,c=null,d=h();d==null&&(d=0,i.replaceState(xs({},i.state,{idx:d}),""));function h(){return(i.state||{idx:null}).idx}function u(){o=Te.Pop;let b=h(),x=b==null?null:b-d;d=b,c&&c({action:o,location:N.location,delta:x})}function f(b,x){o=Te.Push;let p=Js(N.location,b,x);d=h()+1;let v=vt(p,d),y=N.createHref(p);try{i.pushState(v,"",y)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;l.location.assign(y)}n&&c&&c({action:o,location:N.location,delta:1})}function j(b,x){o=Te.Replace;let p=Js(N.location,b,x);d=h();let v=vt(p,d),y=N.createHref(p);i.replaceState(v,"",y),n&&c&&c({action:o,location:N.location,delta:0})}function g(b){let x=l.location.origin!=="null"?l.location.origin:l.location.href,p=typeof b=="string"?b:Rs(b);return p=p.replace(/ $/,"%20"),re(x,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,x)}let N={get action(){return o},get location(){return s(l,i)},listen(b){if(c)throw new Error("A history only accepts one active listener");return l.addEventListener(yt,u),c=b,()=>{l.removeEventListener(yt,u),c=null}},createHref(b){return t(l,b)},createURL:g,encodeLocation(b){let x=g(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:j,go(b){return i.go(b)}};return N}var Nt;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Nt||(Nt={}));function ca(s,t,r){return r===void 0&&(r="/"),da(s,t,r)}function da(s,t,r,a){let l=typeof t=="string"?Qe(t):t,n=ot(l.pathname||"/",r);if(n==null)return null;let i=Kt(s);ma(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let d=wa(n);o=ya(i[c],d)}return o}function Kt(s,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let l=(n,i,o)=>{let c={relativePath:o===void 0?n.path||"":o,caseSensitive:n.caseSensitive===!0,childrenIndex:i,route:n};c.relativePath.startsWith("/")&&(re(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=Oe([a,c.relativePath]),h=r.concat(c);n.children&&n.children.length>0&&(re(n.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Kt(n.children,t,h,d)),!(n.path==null&&!n.index)&&t.push({path:d,score:ba(d,n.index),routesMeta:h})};return s.forEach((n,i)=>{var o;if(n.path===""||!((o=n.path)!=null&&o.includes("?")))l(n,i);else for(let c of Jt(n.path))l(n,i,c)}),t}function Jt(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,l=r.endsWith("?"),n=r.replace(/\?$/,"");if(a.length===0)return l?[n,""]:[n];let i=Jt(a.join("/")),o=[];return o.push(...i.map(c=>c===""?n:[n,c].join("/"))),l&&o.push(...i),o.map(c=>s.startsWith("/")&&c===""?"/":c)}function ma(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:ja(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const xa=/^:[\w-]+$/,ha=3,ua=2,ga=1,fa=10,pa=-2,wt=s=>s==="*";function ba(s,t){let r=s.split("/"),a=r.length;return r.some(wt)&&(a+=pa),t&&(a+=ua),r.filter(l=>!wt(l)).reduce((l,n)=>l+(xa.test(n)?ha:n===""?ga:fa),a)}function ja(s,t){return s.length===t.length&&s.slice(0,-1).every((a,l)=>a===t[l])?s[s.length-1]-t[t.length-1]:0}function ya(s,t,r){let{routesMeta:a}=s,l={},n="/",i=[];for(let o=0;o<a.length;++o){let c=a[o],d=o===a.length-1,h=n==="/"?t:t.slice(n.length)||"/",u=va({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),f=c.route;if(!u)return null;Object.assign(l,u.params),i.push({params:l,pathname:Oe([n,u.pathname]),pathnameBase:Ea(Oe([n,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(n=Oe([n,u.pathnameBase]))}return i}function va(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=Na(s.path,s.caseSensitive,s.end),l=t.match(r);if(!l)return null;let n=l[0],i=n.replace(/(.)\/+$/,"$1"),o=l.slice(1);return{params:a.reduce((d,h,u)=>{let{paramName:f,isOptional:j}=h;if(f==="*"){let N=o[u]||"";i=n.slice(0,n.length-N.length).replace(/(.)\/+$/,"$1")}const g=o[u];return j&&!g?d[f]=void 0:d[f]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:n,pathnameBase:i,pattern:s}}function Na(s,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Yt(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(a.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),a]}function wa(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Yt(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function ot(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function _a(s,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:l=""}=typeof s=="string"?Qe(s):s;return{pathname:r?r.startsWith("/")?r:Sa(r,t):t,search:Ca(a),hash:Pa(l)}}function Sa(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Us(s,t,r,a){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ka(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ct(s,t){let r=ka(s);return t?r.map((a,l)=>l===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function dt(s,t,r,a){a===void 0&&(a=!1);let l;typeof s=="string"?l=Qe(s):(l=xs({},s),re(!l.pathname||!l.pathname.includes("?"),Us("?","pathname","search",l)),re(!l.pathname||!l.pathname.includes("#"),Us("#","pathname","hash",l)),re(!l.search||!l.search.includes("#"),Us("#","search","hash",l)));let n=s===""||l.pathname==="",i=n?"/":l.pathname,o;if(i==null)o=r;else{let u=t.length-1;if(!a&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),u-=1;l.pathname=f.join("/")}o=u>=0?t[u]:"/"}let c=_a(l,o),d=i&&i!=="/"&&i.endsWith("/"),h=(n||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Oe=s=>s.join("/").replace(/\/\/+/g,"/"),Ea=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Ca=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Pa=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Ra(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const Xt=["post","put","patch","delete"];new Set(Xt);const Ia=["get",...Xt];new Set(Ia);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hs(){return hs=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},hs.apply(this,arguments)}const mt=m.createContext(null),Ta=m.createContext(null),Le=m.createContext(null),Ms=m.createContext(null),ze=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Qt=m.createContext(null);function Ma(s,t){let{relative:r}=t===void 0?{}:t;Ze()||re(!1);let{basename:a,navigator:l}=m.useContext(Le),{hash:n,pathname:i,search:o}=er(s,{relative:r}),c=i;return a!=="/"&&(c=i==="/"?a:Oe([a,i])),l.createHref({pathname:c,search:o,hash:n})}function Ze(){return m.useContext(Ms)!=null}function Ve(){return Ze()||re(!1),m.useContext(Ms).location}function Zt(s){m.useContext(Le).static||m.useLayoutEffect(s)}function gs(){let{isDataRoute:s}=m.useContext(ze);return s?Ga():Oa()}function Oa(){Ze()||re(!1);let s=m.useContext(mt),{basename:t,future:r,navigator:a}=m.useContext(Le),{matches:l}=m.useContext(ze),{pathname:n}=Ve(),i=JSON.stringify(ct(l,r.v7_relativeSplatPath)),o=m.useRef(!1);return Zt(()=>{o.current=!0}),m.useCallback(function(d,h){if(h===void 0&&(h={}),!o.current)return;if(typeof d=="number"){a.go(d);return}let u=dt(d,JSON.parse(i),n,h.relative==="path");s==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Oe([t,u.pathname])),(h.replace?a.replace:a.push)(u,h.state,h)},[t,a,i,n,s])}function er(s,t){let{relative:r}=t===void 0?{}:t,{future:a}=m.useContext(Le),{matches:l}=m.useContext(ze),{pathname:n}=Ve(),i=JSON.stringify(ct(l,a.v7_relativeSplatPath));return m.useMemo(()=>dt(s,JSON.parse(i),n,r==="path"),[s,i,n,r])}function Da(s,t){return La(s,t)}function La(s,t,r,a){Ze()||re(!1);let{navigator:l}=m.useContext(Le),{matches:n}=m.useContext(ze),i=n[n.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Ve(),h;if(t){var u;let b=typeof t=="string"?Qe(t):t;c==="/"||(u=b.pathname)!=null&&u.startsWith(c)||re(!1),h=b}else h=d;let f=h.pathname||"/",j=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");j="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=ca(s,{pathname:j}),N=Fa(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:Oe([c,l.encodeLocation?l.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Oe([c,l.encodeLocation?l.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),n,r,a);return t&&N?m.createElement(Ms.Provider,{value:{location:hs({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Te.Pop}},N):N}function za(){let s=Wa(),t=Ra(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:l},r):null,null)}const $a=m.createElement(za,null);class Aa extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?m.createElement(ze.Provider,{value:this.props.routeContext},m.createElement(Qt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ua(s){let{routeContext:t,match:r,children:a}=s,l=m.useContext(mt);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(ze.Provider,{value:t},a)}function Fa(s,t,r,a){var l;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),s==null){var n;if(!r)return null;if(r.errors)s=r.matches;else if((n=a)!=null&&n.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let i=s,o=(l=r)==null?void 0:l.errors;if(o!=null){let h=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);h>=0||re(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let h=0;h<i.length;h++){let u=i[h];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=h),u.route.id){let{loaderData:f,errors:j}=r,g=u.route.loader&&f[u.route.id]===void 0&&(!j||j[u.route.id]===void 0);if(u.route.lazy||g){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,u,f)=>{let j,g=!1,N=null,b=null;r&&(j=o&&u.route.id?o[u.route.id]:void 0,N=u.route.errorElement||$a,c&&(d<0&&f===0?(Ha("route-fallback"),g=!0,b=null):d===f&&(g=!0,b=u.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,f+1)),p=()=>{let v;return j?v=N:g?v=b:u.route.Component?v=m.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=h,m.createElement(Ua,{match:u,routeContext:{outlet:h,matches:x,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?m.createElement(Aa,{location:r.location,revalidation:r.revalidation,component:N,error:j,children:p(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):p()},null)}var sr=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(sr||{}),tr=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(tr||{});function qa(s){let t=m.useContext(mt);return t||re(!1),t}function Va(s){let t=m.useContext(Ta);return t||re(!1),t}function Ba(s){let t=m.useContext(ze);return t||re(!1),t}function rr(s){let t=Ba(),r=t.matches[t.matches.length-1];return r.route.id||re(!1),r.route.id}function Wa(){var s;let t=m.useContext(Qt),r=Va(),a=rr();return t!==void 0?t:(s=r.errors)==null?void 0:s[a]}function Ga(){let{router:s}=qa(sr.UseNavigateStable),t=rr(tr.UseNavigateStable),r=m.useRef(!1);return Zt(()=>{r.current=!0}),m.useCallback(function(l,n){n===void 0&&(n={}),r.current&&(typeof l=="number"?s.navigate(l):s.navigate(l,hs({fromRouteId:t},n)))},[s,t])}const _t={};function Ha(s,t,r){_t[s]||(_t[s]=!0)}function Ya(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function Ka(s){let{to:t,replace:r,state:a,relative:l}=s;Ze()||re(!1);let{future:n,static:i}=m.useContext(Le),{matches:o}=m.useContext(ze),{pathname:c}=Ve(),d=gs(),h=dt(t,ct(o,n.v7_relativeSplatPath),c,l==="path"),u=JSON.stringify(h);return m.useEffect(()=>d(JSON.parse(u),{replace:r,state:a,relative:l}),[d,u,l,r,a]),null}function ne(s){re(!1)}function Ja(s){let{basename:t="/",children:r=null,location:a,navigationType:l=Te.Pop,navigator:n,static:i=!1,future:o}=s;Ze()&&re(!1);let c=t.replace(/^\/*/,"/"),d=m.useMemo(()=>({basename:c,navigator:n,static:i,future:hs({v7_relativeSplatPath:!1},o)}),[c,o,n,i]);typeof a=="string"&&(a=Qe(a));let{pathname:h="/",search:u="",hash:f="",state:j=null,key:g="default"}=a,N=m.useMemo(()=>{let b=ot(h,c);return b==null?null:{location:{pathname:b,search:u,hash:f,state:j,key:g},navigationType:l}},[c,h,u,f,j,g,l]);return N==null?null:m.createElement(Le.Provider,{value:d},m.createElement(Ms.Provider,{children:r,value:N}))}function Xs(s){let{children:t,location:r}=s;return Da(Qs(t),r)}new Promise(()=>{});function Qs(s,t){t===void 0&&(t=[]);let r=[];return m.Children.forEach(s,(a,l)=>{if(!m.isValidElement(a))return;let n=[...t,l];if(a.type===m.Fragment){r.push.apply(r,Qs(a.props.children,n));return}a.type!==ne&&re(!1),!a.props.index||!a.props.children||re(!1);let i={id:a.props.id||n.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=Qs(a.props.children,n)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zs(){return Zs=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Zs.apply(this,arguments)}function Xa(s,t){if(s==null)return{};var r={},a=Object.keys(s),l,n;for(n=0;n<a.length;n++)l=a[n],!(t.indexOf(l)>=0)&&(r[l]=s[l]);return r}function Qa(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Za(s,t){return s.button===0&&(!t||t==="_self")&&!Qa(s)}function et(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((t,r)=>{let a=s[r];return t.concat(Array.isArray(a)?a.map(l=>[r,l]):[[r,a]])},[]))}function el(s,t){let r=et(s);return t&&t.forEach((a,l)=>{r.has(l)||t.getAll(l).forEach(n=>{r.append(l,n)})}),r}const sl=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tl="6";try{window.__reactRouterVersion=tl}catch{}const rl="startTransition",St=Vr[rl];function al(s){let{basename:t,children:r,future:a,window:l}=s,n=m.useRef();n.current==null&&(n.current=na({window:l,v5Compat:!0}));let i=n.current,[o,c]=m.useState({action:i.action,location:i.location}),{v7_startTransition:d}=a||{},h=m.useCallback(u=>{d&&St?St(()=>c(u)):c(u)},[c,d]);return m.useLayoutEffect(()=>i.listen(h),[i,h]),m.useEffect(()=>Ya(a),[a]),m.createElement(Ja,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:a})}const ll=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nl=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ys=m.forwardRef(function(t,r){let{onClick:a,relative:l,reloadDocument:n,replace:i,state:o,target:c,to:d,preventScrollReset:h,viewTransition:u}=t,f=Xa(t,sl),{basename:j}=m.useContext(Le),g,N=!1;if(typeof d=="string"&&nl.test(d)&&(g=d,ll))try{let v=new URL(window.location.href),y=d.startsWith("//")?new URL(v.protocol+d):new URL(d),k=ot(y.pathname,j);y.origin===v.origin&&k!=null?d=k+y.search+y.hash:N=!0}catch{}let b=Ma(d,{relative:l}),x=il(d,{replace:i,state:o,target:c,preventScrollReset:h,relative:l,viewTransition:u});function p(v){a&&a(v),v.defaultPrevented||x(v)}return m.createElement("a",Zs({},f,{href:g||b,onClick:N||n?a:p,ref:r,target:c}))});var kt;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(kt||(kt={}));var Et;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Et||(Et={}));function il(s,t){let{target:r,replace:a,state:l,preventScrollReset:n,relative:i,viewTransition:o}=t===void 0?{}:t,c=gs(),d=Ve(),h=er(s,{relative:i});return m.useCallback(u=>{if(Za(u,r)){u.preventDefault();let f=a!==void 0?a:Rs(d)===Rs(h);c(s,{replace:f,state:l,preventScrollReset:n,relative:i,viewTransition:o})}},[d,c,h,a,l,r,s,n,i,o])}function ar(s){let t=m.useRef(et(s)),r=m.useRef(!1),a=Ve(),l=m.useMemo(()=>el(a.search,r.current?null:t.current),[a.search]),n=gs(),i=m.useCallback((o,c)=>{const d=et(typeof o=="function"?o(l):o);r.current=!0,n("?"+d,c)},[n,l]);return[l,i]}const lr="https://wlrsoyujrmeviczczfsh.supabase.co",nr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndscnNveXVqcm1ldmljemN6ZnNoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxNDM5NjUsImV4cCI6MjA2OTcxOTk2NX0.ZHepp6oDnIfG73nSERBGcgBis-iuumOvVlijUP4fu1Y";if(lr.includes("your-project")||nr.includes("your-anon-key"))throw new Error("프로덕션 환경에서는 올바른 Supabase 환경 변수가 필요합니다.");let Fs=null;const E=(Fs||(Fs=Ft(lr,nr,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"sb-auth-token"}})),Fs);class ol{formatMessage(t,r,a){const n={timestamp:new Date().toISOString(),level:t.toLowerCase(),message:r,...a};return JSON.stringify(n)}shouldLog(t){return t==="WARN"||t==="ERROR"}debug(t,r){this.shouldLog("DEBUG")&&console.debug(this.formatMessage("DEBUG",t,r))}info(t,r){this.shouldLog("INFO")&&console.info(this.formatMessage("INFO",t,r))}warn(t,r){this.shouldLog("WARN")&&console.warn(this.formatMessage("WARN",t,r))}error(t,r){this.shouldLog("ERROR")&&console.error(this.formatMessage("ERROR",t,r))}devLog(t,...r){}}const F=new ol,ir=m.createContext(void 0),oe=()=>{const s=m.useContext(ir);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},cl=({children:s})=>{const[t,r]=m.useState(null),[a,l]=m.useState(null),[n,i]=m.useState(!0);m.useEffect(()=>{F.info("🔍 인증 초기화 시작"),(async()=>{var N,b;try{const x=new Promise((k,L)=>setTimeout(()=>L(new Error("Session check timeout")),5e3)),p=E.auth.getSession(),{data:{session:v},error:y}=await Promise.race([p,x]);if(y){F.error("Error getting session:",y),i(!1);return}if(l(v),v!=null&&v.user)try{const k=E.from("user_profiles").select("*").eq("id",v.user.id).single(),L=new Promise((R,q)=>setTimeout(()=>q(new Error("Profile fetch timeout")),3e3)),{data:z}=await Promise.race([k,L]);r({id:v.user.id,email:v.user.email,name:(z==null?void 0:z.name)||((N=v.user.user_metadata)==null?void 0:N.name)||"",role:(z==null?void 0:z.role)||"owner",tenant_id:v.user.id,avatar_url:(z==null?void 0:z.avatar_url)||null,created_at:v.user.created_at,last_sign_in_at:v.user.last_sign_in_at||null})}catch(k){F.error("Error fetching profile:",{error:k}),r({id:v.user.id,email:v.user.email,name:((b=v.user.user_metadata)==null?void 0:b.name)||v.user.email,role:"owner",tenant_id:v.user.id,avatar_url:null,created_at:v.user.created_at,last_sign_in_at:v.user.last_sign_in_at||null})}}catch(x){F.error("Error in getSession:",{error:x})}finally{i(!1)}})();const{data:{subscription:g}}=E.auth.onAuthStateChange(async(N,b)=>{var x,p,v,y;if(F.info("🔐 Auth state changed:",{event:N,userId:(x=b==null?void 0:b.user)==null?void 0:x.id,userEmail:(p=b==null?void 0:b.user)==null?void 0:p.email}),l(b),b!=null&&b.user)try{const k=E.from("user_profiles").select("*").eq("id",b.user.id).single(),L=new Promise((R,q)=>setTimeout(()=>q(new Error("Profile fetch timeout")),3e3)),{data:z}=await Promise.race([k,L]);r({id:b.user.id,email:b.user.email,name:(z==null?void 0:z.name)||((v=b.user.user_metadata)==null?void 0:v.name)||"",role:(z==null?void 0:z.role)||"owner",tenant_id:b.user.id,avatar_url:(z==null?void 0:z.avatar_url)||null,created_at:b.user.created_at,last_sign_in_at:b.user.last_sign_in_at||null})}catch(k){F.error("Error fetching profile in auth state change:",{error:k}),r({id:b.user.id,email:b.user.email,name:((y=b.user.user_metadata)==null?void 0:y.name)||b.user.email,role:"owner",tenant_id:b.user.id,avatar_url:null,created_at:b.user.created_at,last_sign_in_at:b.user.last_sign_in_at||null})}else r(null);i(!1)});return()=>g.unsubscribe()},[]);const o=async j=>{try{const g=await E.auth.signUp({email:j.email,password:j.password,options:{data:{name:j.name,company:j.company}}});if(g.data.user&&!g.error)try{F.info("👤 사용자별 독립 프로필 생성:",{userId:g.data.user.id});const{error:N}=await E.from("user_profiles").insert({id:g.data.user.id,email:j.email,name:j.name,role:"owner",tenant_id:g.data.user.id});N?F.error("Error creating user profile:",{error:N}):F.info("✅ 사용자별 독립 프로필 생성 완료")}catch(N){F.error("Error in profile creation process:",{error:N})}return g}catch(g){return F.error("Sign up error:",{error:g}),{user:null,error:g}}},c=async j=>{try{return await E.auth.signInWithPassword({email:j.email,password:j.password})}catch(g){return F.error("Sign in error:",{error:g}),{user:null,error:g}}},d=async()=>{try{const j=await E.auth.signOut();return r(null),l(null),j}catch(j){return F.error("Sign out error:",{error:j}),{error:j}}},h=async j=>{try{return await E.auth.resetPasswordForEmail(j,{redirectTo:`${window.location.origin}/reset-password`})}catch(g){return F.error("Reset password error:",{error:g}),{error:g}}},u=async()=>{var j,g;try{if(F.info("🔍 getCurrentUser 호출됨"),t&&!n)return F.info("✅ 컨텍스트에서 사용자 반환",{userId:t.id}),t;F.info("🔄 Supabase 세션 새로고침 시도...");const{data:N,error:b}=await E.auth.refreshSession();b?F.warn("⚠️ 세션 새로고침 실패, 직접 사용자 확인:",{error:b.message}):N.session&&F.info("✅ 세션 새로고침 성공");const{data:{user:x},error:p}=await E.auth.getUser();if(p||!x)return F.error("❌ getCurrentUser 실패:",{error:p==null?void 0:p.message}),null;try{const{data:v}=await E.from("user_profiles").select("*").eq("id",x.id).single(),y={id:x.id,email:x.email,name:(v==null?void 0:v.name)||((j=x.user_metadata)==null?void 0:j.name)||"",role:(v==null?void 0:v.role)||"owner",tenant_id:x.id,avatar_url:(v==null?void 0:v.avatar_url)||null,created_at:x.created_at,last_sign_in_at:x.last_sign_in_at||null};return F.info("✅ getCurrentUser 성공:",{userId:y.id}),y}catch(v){return F.error("프로필 조회 실패, 기본 사용자 정보 반환:",{error:v}),{id:x.id,email:x.email,name:((g=x.user_metadata)==null?void 0:g.name)||x.email,role:"owner",tenant_id:x.id,avatar_url:null,created_at:x.created_at,last_sign_in_at:x.last_sign_in_at||null}}}catch(N){return F.error("getCurrentUser 전체 실패:",{error:N}),null}},f=m.useMemo(()=>({user:t,session:a,loading:n,signUp:o,signIn:c,signOut:d,resetPassword:h,getCurrentUser:u}),[t,a,n]);return e.jsx(ir.Provider,{value:f,children:s})},or=m.createContext(null),dl=({children:s})=>{const{user:t}=oe(),[r,a]=m.useState(null),[l,n]=m.useState(!1),[i,o]=m.useState(null),c=async b=>{n(!0);try{const{data:x,error:p}=await E.from("tenants").select("*").eq("id",b).single();if(p)throw p;a(x),o(null)}catch(x){console.error("Failed to switch tenant:",x),o("테넌트 전환에 실패했습니다.")}finally{n(!1)}},d=async b=>{if(r){n(!0);try{const{data:x,error:p}=await E.from("tenants").update(b).eq("id",r.id).select().single();if(p)throw p;a(x),o(null)}catch(x){console.error("Failed to update tenant:",x),o("테넌트 업데이트에 실패했습니다.")}finally{n(!1)}}},h=async()=>{if(!r)return{total_properties:0,active_properties:0,total_users:0,active_users:0,storage_used_mb:0,api_calls_this_month:0,created_this_month:0};try{const{data:b,error:x}=await E.from("properties").select("id, status, created_at").eq("tenant_id",r.id);if(x)throw x;return{total_properties:b.length,active_properties:b.length,total_users:1,active_users:1,storage_used_mb:0,api_calls_this_month:0,created_this_month:b.filter(v=>{const y=new Date(v.created_at||Date.now()),k=new Date;return y.getMonth()===k.getMonth()&&y.getFullYear()===k.getFullYear()}).length}}catch(b){return console.error("Failed to get tenant stats:",b),{total_properties:0,active_properties:0,total_users:0,active_users:0,storage_used_mb:0,api_calls_this_month:0,created_this_month:0}}},u=b=>{var x,p;return((p=(x=r==null?void 0:r.limits)==null?void 0:x.features_enabled)==null?void 0:p.includes(b))||!1},f=()=>(r!=null&&r.limits,!0),j=()=>(r!=null&&r.limits,!0),g=b=>(r!=null&&r.limits,!0);m.useEffect(()=>{console.log("🏢 TenantContext useEffect 실행:",{user:t==null?void 0:t.id,tenant:r==null?void 0:r.id}),t&&!r&&(console.log("🏢 사용자별 개별 테넌트 설정 시작:",t.id),(async()=>{n(!0);try{console.log("🔍 기존 테넌트 조회 중:",t.id);const{data:x,error:p}=await E.from("tenants").select("*").eq("id",t.id).single();if(console.log("🔍 조회 결과:",{existingTenant:x,queryError:p}),x&&!p){const v={...x,branding:{primary_color:"#3b82f6",secondary_color:"#1d4ed8",accent_color:"#f59e0b"},limits:{max_properties:50,max_users:2,max_storage_gb:1,max_api_calls_per_month:1e3,features_enabled:["basic"]},settings:{timezone:"Asia/Seoul",date_format:"YYYY-MM-DD",currency:"KRW",language:"ko",require_exit_date:!0,require_landlord_info:!0,email_notifications:!0,sms_notifications:!1,browser_notifications:!0,require_2fa:!1,session_timeout_minutes:480}};a(v),o(null),console.log("✅ 기존 테넌트 조회 완료:",x.name),n(!1);return}}catch(x){console.log("🔍 기존 테넌트 조회 중 오류:",x),console.log("🔧 오류로 인한 모사 테넌트 데이터 사용");const p={id:t.id,name:`${t.name||"사용자"}의 부동산`,slug:`user-${t.id}`,plan:"starter",status:"active",branding:{primary_color:"#3b82f6",secondary_color:"#1d4ed8",accent_color:"#f59e0b"},limits:{max_properties:50,max_users:2,max_storage_gb:1,max_api_calls_per_month:1e3,features_enabled:["basic"]},settings:{timezone:"Asia/Seoul",date_format:"YYYY-MM-DD",currency:"KRW",language:"ko",require_exit_date:!0,require_landlord_info:!0,email_notifications:!0,sms_notifications:!1,browser_notifications:!0,require_2fa:!1,session_timeout_minutes:480},created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:t.id};a(p),o(null),n(!1);return}console.log("📝 새 테넌트 생성 필요");try{const x={id:t.id,name:"PropertyDesk 베타"};console.log("📝 테넌트 생성 시작:",x);const{data:p,error:v}=await E.from("tenants").insert(x).select().single();if(console.log("📝 테넌트 생성 결과:",{newTenant:p,createError:v}),v)throw console.error("❌ 테넌트 생성 실패:",v),v;const y={...p,branding:{primary_color:"#3b82f6",secondary_color:"#1d4ed8",accent_color:"#f59e0b"},limits:{max_properties:1e3,max_users:10,max_storage_gb:10,max_api_calls_per_month:5e4,features_enabled:["advanced_analytics","api_access","custom_fields"]},settings:{timezone:"Asia/Seoul",date_format:"YYYY-MM-DD",currency:"KRW",language:"ko",require_exit_date:!0,require_landlord_info:!0,email_notifications:!0,sms_notifications:!1,browser_notifications:!0,require_2fa:!1,session_timeout_minutes:480}};a(y),o(null),console.log("✅ 새 테넌트 생성 완료:",p.name,"User ID:",t.id)}catch(x){console.error("❌ 테넌트 초기화 실패:",x),a(null),o("테넌트 초기화에 실패했습니다.")}finally{n(!1)}})())},[t,r]),m.useEffect(()=>{if(r!=null&&r.branding){const b=document.documentElement;if(b.style.setProperty("--tenant-primary",r.branding.primary_color),b.style.setProperty("--tenant-secondary",r.branding.secondary_color||"#6b7280"),b.style.setProperty("--tenant-accent",r.branding.accent_color||"#f59e0b"),r.branding.favicon_url){const x=document.querySelector('link[rel="icon"]');x&&(x.href=r.branding.favicon_url)}document.title=`${r.name} - PropertyDesk`}else{const b=document.documentElement;b.style.setProperty("--tenant-primary","#3b82f6"),b.style.setProperty("--tenant-secondary","#6b7280"),b.style.setProperty("--tenant-accent","#f59e0b"),document.title="PropertyDesk - 부동산 관리 플랫폼"}},[r]);const N={tenant:r,isLoading:l,error:i,switchTenant:c,updateTenant:d,getTenantStats:h,hasFeature:u,canCreateProperty:f,canInviteUser:j,isWithinLimits:g};return e.jsx(or.Provider,{value:N,children:s})},es=()=>{const s=m.useContext(or);if(!s)throw new Error("useTenant는 TenantProvider 내에서 사용되어야 합니다.");return s};function cr(s){var t,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var l=s.length;for(t=0;t<l;t++)s[t]&&(r=cr(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r);return a}function dr(){for(var s,t,r=0,a="",l=arguments.length;r<l;r++)(s=arguments[r])&&(t=cr(s))&&(a&&(a+=" "),a+=t);return a}const Ct=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,Pt=dr,fs=(s,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return Pt(s,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:l,defaultVariants:n}=t,i=Object.keys(l).map(d=>{const h=r==null?void 0:r[d],u=n==null?void 0:n[d];if(h===null)return null;const f=Ct(h)||Ct(u);return l[d][f]}),o=r&&Object.entries(r).reduce((d,h)=>{let[u,f]=h;return f===void 0||(d[u]=f),d},{}),c=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((d,h)=>{let{class:u,className:f,...j}=h;return Object.entries(j).every(g=>{let[N,b]=g;return Array.isArray(b)?b.includes({...n,...o}[N]):{...n,...o}[N]===b})?[...d,u,f]:d},[]);return Pt(s,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},xt="-",ml=s=>{const t=hl(s),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:i=>{const o=i.split(xt);return o[0]===""&&o.length!==1&&o.shift(),mr(o,t)||xl(i)},getConflictingClassGroupIds:(i,o)=>{const c=r[i]||[];return o&&a[i]?[...c,...a[i]]:c}}},mr=(s,t)=>{var i;if(s.length===0)return t.classGroupId;const r=s[0],a=t.nextPart.get(r),l=a?mr(s.slice(1),a):void 0;if(l)return l;if(t.validators.length===0)return;const n=s.join(xt);return(i=t.validators.find(({validator:o})=>o(n)))==null?void 0:i.classGroupId},Rt=/^\[(.+)\]$/,xl=s=>{if(Rt.test(s)){const t=Rt.exec(s)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},hl=s=>{const{theme:t,classGroups:r}=s,a={nextPart:new Map,validators:[]};for(const l in r)st(r[l],a,l,t);return a},st=(s,t,r,a)=>{s.forEach(l=>{if(typeof l=="string"){const n=l===""?t:It(t,l);n.classGroupId=r;return}if(typeof l=="function"){if(ul(l)){st(l(a),t,r,a);return}t.validators.push({validator:l,classGroupId:r});return}Object.entries(l).forEach(([n,i])=>{st(i,It(t,n),r,a)})})},It=(s,t)=>{let r=s;return t.split(xt).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},ul=s=>s.isThemeGetter,gl=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const l=(n,i)=>{r.set(n,i),t++,t>s&&(t=0,a=r,r=new Map)};return{get(n){let i=r.get(n);if(i!==void 0)return i;if((i=a.get(n))!==void 0)return l(n,i),i},set(n,i){r.has(n)?r.set(n,i):l(n,i)}}},tt="!",rt=":",fl=rt.length,pl=s=>{const{prefix:t,experimentalParseClassName:r}=s;let a=l=>{const n=[];let i=0,o=0,c=0,d;for(let g=0;g<l.length;g++){let N=l[g];if(i===0&&o===0){if(N===rt){n.push(l.slice(c,g)),c=g+fl;continue}if(N==="/"){d=g;continue}}N==="["?i++:N==="]"?i--:N==="("?o++:N===")"&&o--}const h=n.length===0?l:l.substring(c),u=bl(h),f=u!==h,j=d&&d>c?d-c:void 0;return{modifiers:n,hasImportantModifier:f,baseClassName:u,maybePostfixModifierPosition:j}};if(t){const l=t+rt,n=a;a=i=>i.startsWith(l)?n(i.substring(l.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(r){const l=a;a=n=>r({className:n,parseClassName:l})}return a},bl=s=>s.endsWith(tt)?s.substring(0,s.length-1):s.startsWith(tt)?s.substring(1):s,jl=s=>{const t=Object.fromEntries(s.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const l=[];let n=[];return a.forEach(i=>{i[0]==="["||t[i]?(l.push(...n.sort(),i),n=[]):n.push(i)}),l.push(...n.sort()),l}},yl=s=>({cache:gl(s.cacheSize),parseClassName:pl(s),sortModifiers:jl(s),...ml(s)}),vl=/\s+/,Nl=(s,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:l,sortModifiers:n}=t,i=[],o=s.trim().split(vl);let c="";for(let d=o.length-1;d>=0;d-=1){const h=o[d],{isExternal:u,modifiers:f,hasImportantModifier:j,baseClassName:g,maybePostfixModifierPosition:N}=r(h);if(u){c=h+(c.length>0?" "+c:c);continue}let b=!!N,x=a(b?g.substring(0,N):g);if(!x){if(!b){c=h+(c.length>0?" "+c:c);continue}if(x=a(g),!x){c=h+(c.length>0?" "+c:c);continue}b=!1}const p=n(f).join(":"),v=j?p+tt:p,y=v+x;if(i.includes(y))continue;i.push(y);const k=l(x,b);for(let L=0;L<k.length;++L){const z=k[L];i.push(v+z)}c=h+(c.length>0?" "+c:c)}return c};function wl(){let s=0,t,r,a="";for(;s<arguments.length;)(t=arguments[s++])&&(r=xr(t))&&(a&&(a+=" "),a+=r);return a}const xr=s=>{if(typeof s=="string")return s;let t,r="";for(let a=0;a<s.length;a++)s[a]&&(t=xr(s[a]))&&(r&&(r+=" "),r+=t);return r};function _l(s,...t){let r,a,l,n=i;function i(c){const d=t.reduce((h,u)=>u(h),s());return r=yl(d),a=r.cache.get,l=r.cache.set,n=o,o(c)}function o(c){const d=a(c);if(d)return d;const h=Nl(c,r);return l(c,h),h}return function(){return n(wl.apply(null,arguments))}}const ae=s=>{const t=r=>r[s]||[];return t.isThemeGetter=!0,t},hr=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ur=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Sl=/^\d+\/\d+$/,kl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,El=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Cl=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Pl=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Rl=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Be=s=>Sl.test(s),V=s=>!!s&&!Number.isNaN(Number(s)),Pe=s=>!!s&&Number.isInteger(Number(s)),qs=s=>s.endsWith("%")&&V(s.slice(0,-1)),Ce=s=>kl.test(s),Il=()=>!0,Tl=s=>El.test(s)&&!Cl.test(s),gr=()=>!1,Ml=s=>Pl.test(s),Ol=s=>Rl.test(s),Dl=s=>!T(s)&&!M(s),Ll=s=>ss(s,br,gr),T=s=>hr.test(s),$e=s=>ss(s,jr,Tl),Vs=s=>ss(s,Fl,V),Tt=s=>ss(s,fr,gr),zl=s=>ss(s,pr,Ol),vs=s=>ss(s,yr,Ml),M=s=>ur.test(s),as=s=>ts(s,jr),$l=s=>ts(s,ql),Mt=s=>ts(s,fr),Al=s=>ts(s,br),Ul=s=>ts(s,pr),Ns=s=>ts(s,yr,!0),ss=(s,t,r)=>{const a=hr.exec(s);return a?a[1]?t(a[1]):r(a[2]):!1},ts=(s,t,r=!1)=>{const a=ur.exec(s);return a?a[1]?t(a[1]):r:!1},fr=s=>s==="position"||s==="percentage",pr=s=>s==="image"||s==="url",br=s=>s==="length"||s==="size"||s==="bg-size",jr=s=>s==="length",Fl=s=>s==="number",ql=s=>s==="family-name",yr=s=>s==="shadow",Vl=()=>{const s=ae("color"),t=ae("font"),r=ae("text"),a=ae("font-weight"),l=ae("tracking"),n=ae("leading"),i=ae("breakpoint"),o=ae("container"),c=ae("spacing"),d=ae("radius"),h=ae("shadow"),u=ae("inset-shadow"),f=ae("text-shadow"),j=ae("drop-shadow"),g=ae("blur"),N=ae("perspective"),b=ae("aspect"),x=ae("ease"),p=ae("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...y(),M,T],L=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto","contain","none"],R=()=>[M,T,c],q=()=>[Be,"full","auto",...R()],$=()=>[Pe,"none","subgrid",M,T],te=()=>["auto",{span:["full",Pe,M,T]},Pe,M,T],ee=()=>[Pe,"auto",M,T],G=()=>["auto","min","max","fr",M,T],Y=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],O=()=>["start","end","center","stretch","center-safe","end-safe"],_=()=>["auto",...R()],P=()=>[Be,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],w=()=>[s,M,T],B=()=>[...y(),Mt,Tt,{position:[M,T]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",Al,Ll,{size:[M,T]}],se=()=>[qs,as,$e],C=()=>["","none","full",d,M,T],D=()=>["",V,as,$e],Z=()=>["solid","dashed","dotted","double"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>[V,qs,Mt,Tt],ce=()=>["","none",g,M,T],we=()=>["none",V,M,T],fe=()=>["none",V,M,T],de=()=>[V,M,T],ye=()=>[Be,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ce],breakpoint:[Ce],color:[Il],container:[Ce],"drop-shadow":[Ce],ease:["in","out","in-out"],font:[Dl],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ce],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ce],shadow:[Ce],spacing:["px",V],text:[Ce],"text-shadow":[Ce],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Be,T,M,b]}],container:["container"],columns:[{columns:[V,T,M,o]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:q()}],"inset-x":[{"inset-x":q()}],"inset-y":[{"inset-y":q()}],start:[{start:q()}],end:[{end:q()}],top:[{top:q()}],right:[{right:q()}],bottom:[{bottom:q()}],left:[{left:q()}],visibility:["visible","invisible","collapse"],z:[{z:[Pe,"auto",M,T]}],basis:[{basis:[Be,"full","auto",o,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[V,Be,"auto","initial","none",T]}],grow:[{grow:["",V,M,T]}],shrink:[{shrink:["",V,M,T]}],order:[{order:[Pe,"first","last","none",M,T]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:te()}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:te()}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...Y(),"normal"]}],"justify-items":[{"justify-items":[...O(),"normal"]}],"justify-self":[{"justify-self":["auto",...O()]}],"align-content":[{content:["normal",...Y()]}],"align-items":[{items:[...O(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...O(),{baseline:["","last"]}]}],"place-content":[{"place-content":Y()}],"place-items":[{"place-items":[...O(),"baseline"]}],"place-self":[{"place-self":["auto",...O()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:_()}],mx:[{mx:_()}],my:[{my:_()}],ms:[{ms:_()}],me:[{me:_()}],mt:[{mt:_()}],mr:[{mr:_()}],mb:[{mb:_()}],ml:[{ml:_()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:P()}],w:[{w:[o,"screen",...P()]}],"min-w":[{"min-w":[o,"screen","none",...P()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...P()]}],h:[{h:["screen","lh",...P()]}],"min-h":[{"min-h":["screen","lh","none",...P()]}],"max-h":[{"max-h":["screen","lh",...P()]}],"font-size":[{text:["base",r,as,$e]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,M,Vs]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qs,T]}],"font-family":[{font:[$l,T,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,M,T]}],"line-clamp":[{"line-clamp":[V,"none",M,Vs]}],leading:[{leading:[n,...R()]}],"list-image":[{"list-image":["none",M,T]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",M,T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:w()}],"text-color":[{text:w()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:[V,"from-font","auto",M,$e]}],"text-decoration-color":[{decoration:w()}],"underline-offset":[{"underline-offset":[V,"auto",M,T]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",M,T]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",M,T]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:B()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pe,M,T],radial:["",M,T],conic:[Pe,M,T]},Ul,zl]}],"bg-color":[{bg:w()}],"gradient-from-pos":[{from:se()}],"gradient-via-pos":[{via:se()}],"gradient-to-pos":[{to:se()}],"gradient-from":[{from:w()}],"gradient-via":[{via:w()}],"gradient-to":[{to:w()}],rounded:[{rounded:C()}],"rounded-s":[{"rounded-s":C()}],"rounded-e":[{"rounded-e":C()}],"rounded-t":[{"rounded-t":C()}],"rounded-r":[{"rounded-r":C()}],"rounded-b":[{"rounded-b":C()}],"rounded-l":[{"rounded-l":C()}],"rounded-ss":[{"rounded-ss":C()}],"rounded-se":[{"rounded-se":C()}],"rounded-ee":[{"rounded-ee":C()}],"rounded-es":[{"rounded-es":C()}],"rounded-tl":[{"rounded-tl":C()}],"rounded-tr":[{"rounded-tr":C()}],"rounded-br":[{"rounded-br":C()}],"rounded-bl":[{"rounded-bl":C()}],"border-w":[{border:D()}],"border-w-x":[{"border-x":D()}],"border-w-y":[{"border-y":D()}],"border-w-s":[{"border-s":D()}],"border-w-e":[{"border-e":D()}],"border-w-t":[{"border-t":D()}],"border-w-r":[{"border-r":D()}],"border-w-b":[{"border-b":D()}],"border-w-l":[{"border-l":D()}],"divide-x":[{"divide-x":D()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":D()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Z(),"hidden","none"]}],"divide-style":[{divide:[...Z(),"hidden","none"]}],"border-color":[{border:w()}],"border-color-x":[{"border-x":w()}],"border-color-y":[{"border-y":w()}],"border-color-s":[{"border-s":w()}],"border-color-e":[{"border-e":w()}],"border-color-t":[{"border-t":w()}],"border-color-r":[{"border-r":w()}],"border-color-b":[{"border-b":w()}],"border-color-l":[{"border-l":w()}],"divide-color":[{divide:w()}],"outline-style":[{outline:[...Z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[V,M,T]}],"outline-w":[{outline:["",V,as,$e]}],"outline-color":[{outline:w()}],shadow:[{shadow:["","none",h,Ns,vs]}],"shadow-color":[{shadow:w()}],"inset-shadow":[{"inset-shadow":["none",u,Ns,vs]}],"inset-shadow-color":[{"inset-shadow":w()}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:w()}],"ring-offset-w":[{"ring-offset":[V,$e]}],"ring-offset-color":[{"ring-offset":w()}],"inset-ring-w":[{"inset-ring":D()}],"inset-ring-color":[{"inset-ring":w()}],"text-shadow":[{"text-shadow":["none",f,Ns,vs]}],"text-shadow-color":[{"text-shadow":w()}],opacity:[{opacity:[V,M,T]}],"mix-blend":[{"mix-blend":[...J(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":J()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[V]}],"mask-image-linear-from-pos":[{"mask-linear-from":W()}],"mask-image-linear-to-pos":[{"mask-linear-to":W()}],"mask-image-linear-from-color":[{"mask-linear-from":w()}],"mask-image-linear-to-color":[{"mask-linear-to":w()}],"mask-image-t-from-pos":[{"mask-t-from":W()}],"mask-image-t-to-pos":[{"mask-t-to":W()}],"mask-image-t-from-color":[{"mask-t-from":w()}],"mask-image-t-to-color":[{"mask-t-to":w()}],"mask-image-r-from-pos":[{"mask-r-from":W()}],"mask-image-r-to-pos":[{"mask-r-to":W()}],"mask-image-r-from-color":[{"mask-r-from":w()}],"mask-image-r-to-color":[{"mask-r-to":w()}],"mask-image-b-from-pos":[{"mask-b-from":W()}],"mask-image-b-to-pos":[{"mask-b-to":W()}],"mask-image-b-from-color":[{"mask-b-from":w()}],"mask-image-b-to-color":[{"mask-b-to":w()}],"mask-image-l-from-pos":[{"mask-l-from":W()}],"mask-image-l-to-pos":[{"mask-l-to":W()}],"mask-image-l-from-color":[{"mask-l-from":w()}],"mask-image-l-to-color":[{"mask-l-to":w()}],"mask-image-x-from-pos":[{"mask-x-from":W()}],"mask-image-x-to-pos":[{"mask-x-to":W()}],"mask-image-x-from-color":[{"mask-x-from":w()}],"mask-image-x-to-color":[{"mask-x-to":w()}],"mask-image-y-from-pos":[{"mask-y-from":W()}],"mask-image-y-to-pos":[{"mask-y-to":W()}],"mask-image-y-from-color":[{"mask-y-from":w()}],"mask-image-y-to-color":[{"mask-y-to":w()}],"mask-image-radial":[{"mask-radial":[M,T]}],"mask-image-radial-from-pos":[{"mask-radial-from":W()}],"mask-image-radial-to-pos":[{"mask-radial-to":W()}],"mask-image-radial-from-color":[{"mask-radial-from":w()}],"mask-image-radial-to-color":[{"mask-radial-to":w()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":y()}],"mask-image-conic-pos":[{"mask-conic":[V]}],"mask-image-conic-from-pos":[{"mask-conic-from":W()}],"mask-image-conic-to-pos":[{"mask-conic-to":W()}],"mask-image-conic-from-color":[{"mask-conic-from":w()}],"mask-image-conic-to-color":[{"mask-conic-to":w()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:B()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",M,T]}],filter:[{filter:["","none",M,T]}],blur:[{blur:ce()}],brightness:[{brightness:[V,M,T]}],contrast:[{contrast:[V,M,T]}],"drop-shadow":[{"drop-shadow":["","none",j,Ns,vs]}],"drop-shadow-color":[{"drop-shadow":w()}],grayscale:[{grayscale:["",V,M,T]}],"hue-rotate":[{"hue-rotate":[V,M,T]}],invert:[{invert:["",V,M,T]}],saturate:[{saturate:[V,M,T]}],sepia:[{sepia:["",V,M,T]}],"backdrop-filter":[{"backdrop-filter":["","none",M,T]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[V,M,T]}],"backdrop-contrast":[{"backdrop-contrast":[V,M,T]}],"backdrop-grayscale":[{"backdrop-grayscale":["",V,M,T]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[V,M,T]}],"backdrop-invert":[{"backdrop-invert":["",V,M,T]}],"backdrop-opacity":[{"backdrop-opacity":[V,M,T]}],"backdrop-saturate":[{"backdrop-saturate":[V,M,T]}],"backdrop-sepia":[{"backdrop-sepia":["",V,M,T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",M,T]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[V,"initial",M,T]}],ease:[{ease:["linear","initial",x,M,T]}],delay:[{delay:[V,M,T]}],animate:[{animate:["none",p,M,T]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,M,T]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:we()}],"rotate-x":[{"rotate-x":we()}],"rotate-y":[{"rotate-y":we()}],"rotate-z":[{"rotate-z":we()}],scale:[{scale:fe()}],"scale-x":[{"scale-x":fe()}],"scale-y":[{"scale-y":fe()}],"scale-z":[{"scale-z":fe()}],"scale-3d":["scale-3d"],skew:[{skew:de()}],"skew-x":[{"skew-x":de()}],"skew-y":[{"skew-y":de()}],transform:[{transform:[M,T,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ye()}],"translate-x":[{"translate-x":ye()}],"translate-y":[{"translate-y":ye()}],"translate-z":[{"translate-z":ye()}],"translate-none":["translate-none"],accent:[{accent:w()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:w()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",M,T]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",M,T]}],fill:[{fill:["none",...w()]}],"stroke-w":[{stroke:[V,as,$e,Vs]}],stroke:[{stroke:["none",...w()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Bl=_l(Vl);function ge(...s){return Bl(dr(s))}const Wl=fs("inline-flex items-center justify-center rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-lg hover:from-primary-700 hover:to-primary-800 hover:shadow-xl transform hover:-translate-y-0.5 focus-visible:ring-primary-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400 focus-visible:ring-gray-500",danger:"bg-gradient-to-r from-red-600 to-red-700 text-white hover:from-red-700 hover:to-red-800 focus-visible:ring-red-500",destructive:"bg-gradient-to-r from-red-600 to-red-700 text-white hover:from-red-700 hover:to-red-800 focus-visible:ring-red-500",ghost:"text-gray-600 hover:text-gray-800 hover:bg-gray-100 focus-visible:ring-gray-500",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 hover:border-gray-400 focus-visible:ring-gray-500",tenant:"bg-gradient-to-r from-tenant-primary to-tenant-primary text-white shadow-lg hover:opacity-90 transform hover:-translate-y-0.5 focus-visible:ring-tenant-primary"},size:{sm:"h-8 px-3 text-xs",md:"h-10 px-4 py-2",lg:"h-12 px-6 py-3 text-base",icon:"h-10 w-10"},fullWidth:{true:"w-full"}},defaultVariants:{variant:"primary",size:"md"}}),U=Fe.forwardRef(({className:s,variant:t,size:r,fullWidth:a,loading:l,leftIcon:n,rightIcon:i,children:o,disabled:c,...d},h)=>e.jsx("button",{className:ge(Wl({variant:t,size:r,fullWidth:a,className:s})),ref:h,disabled:c||l,...d,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"로딩 중..."]}):e.jsxs(e.Fragment,{children:[n&&e.jsx("span",{className:"mr-2",children:n}),o,i&&e.jsx("span",{className:"ml-2",children:i})]})}));U.displayName="Button";const Gl=fs("flex w-full rounded-lg border bg-white px-3 py-2 text-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{variants:{variant:{default:"border-gray-300 focus-visible:border-primary-500 focus-visible:ring-primary-500",error:"border-red-300 focus-visible:border-red-500 focus-visible:ring-red-500",success:"border-green-300 focus-visible:border-green-500 focus-visible:ring-green-500"},size:{sm:"h-8 px-2 text-xs",md:"h-10 px-3",lg:"h-12 px-4 text-base"}},defaultVariants:{variant:"default",size:"md"}}),A=Fe.forwardRef(({className:s,variant:t,size:r,label:a,error:l,helperText:n,leftIcon:i,rightIcon:o,id:c,...d},h)=>{const u=c||`input-${Math.random().toString(36).substr(2,9)}`,j=!!l?"error":t;return e.jsxs("div",{className:"w-full",children:[a&&e.jsxs("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-2",children:[a,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[i&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-400",children:i})}),e.jsx("input",{id:u,className:ge(Gl({variant:j,size:r}),i&&"pl-10",o&&"pr-10",s),ref:h,...d}),o&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-400",children:o})})]}),l&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l}),n&&!l&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});A.displayName="Input";const Hl=fs("flex w-full rounded-lg border bg-white px-3 py-2 text-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer",{variants:{variant:{default:"border-gray-300 focus-visible:border-primary-500 focus-visible:ring-primary-500",error:"border-red-300 focus-visible:border-red-500 focus-visible:ring-red-500",success:"border-green-300 focus-visible:border-green-500 focus-visible:ring-green-500"},size:{sm:"h-8 px-2 text-xs",md:"h-10 px-3",lg:"h-12 px-4 text-base"}},defaultVariants:{variant:"default",size:"md"}}),he=Fe.forwardRef(({className:s,variant:t,size:r,label:a,error:l,helperText:n,options:i,placeholder:o,id:c,...d},h)=>{const u=c||`select-${Math.random().toString(36).substr(2,9)}`,j=!!l?"error":t;return e.jsxs("div",{className:"w-full",children:[a&&e.jsxs("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-2",children:[a,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:u,className:ge(Hl({variant:j,size:r}),"pr-10",s),ref:h,...d,children:[o&&e.jsx("option",{value:"",disabled:!0,children:o}),i.map(g=>e.jsx("option",{value:g.value,disabled:g.disabled,children:g.label},g.value))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(at,{className:"h-4 w-4 text-gray-400"})})]}),l&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l}),n&&!l&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});he.displayName="Select";const Ee=({isOpen:s,onClose:t,title:r,children:a,size:l="md",closable:n=!0,className:i})=>{if(m.useEffect(()=>{const d=h=>{h.key==="Escape"&&n&&t()};return s&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[s,t,n]),!s)return null;const o={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"},c=e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in",onClick:n?t:void 0}),e.jsxs("div",{className:ge("relative bg-white rounded-lg shadow-xl w-full max-h-[90vh] overflow-hidden animate-scale-in",o[l],i),children:[(r||n)&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r&&e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r}),n&&e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ue,{size:20})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:a})]})]});return Ut.createPortal(c,document.body)},Yl=fs("card rounded-lg border bg-white transition-all duration-200",{variants:{variant:{default:"border-gray-200 shadow-sm hover:shadow-md",elevated:"border-gray-200 shadow-lg hover:shadow-xl",outline:"border-gray-300",ghost:"border-transparent shadow-none"},padding:{none:"",sm:"p-4",md:"p-6",lg:"p-8"},clickable:{true:"cursor-pointer hover:border-gray-300 transform hover:-translate-y-0.5"}},defaultVariants:{variant:"default",padding:"md"}}),le=Fe.forwardRef(({className:s,variant:t,padding:r,clickable:a,children:l,...n},i)=>e.jsx("div",{ref:i,className:ge(Yl({variant:t,padding:r,clickable:a}),s),...n,children:l}));le.displayName="Card";const ve=({children:s,className:t})=>e.jsx("div",{className:ge("flex flex-col space-y-1.5 p-6 pb-4",t),children:s}),Ne=({children:s,className:t})=>e.jsx("h3",{className:ge("text-lg font-semibold leading-none tracking-tight",t),children:s}),xe=({children:s,className:t})=>e.jsx("div",{className:ge("p-6 pt-0",t),children:s}),Kl=fs("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-gray-100 text-gray-600",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",available:"bg-green-100 text-green-800",reserved:"bg-yellow-100 text-yellow-800",sold:"bg-gray-100 text-gray-600",sale:"bg-red-100 text-red-700",jeonse:"bg-green-100 text-green-700",monthly:"bg-blue-100 text-blue-700",tenant:"bg-tenant-primary bg-opacity-10 text-tenant-primary"},size:{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}},defaultVariants:{variant:"default",size:"md"}}),Se=Fe.forwardRef(({className:s,variant:t,size:r,children:a,...l},n)=>e.jsx("div",{ref:n,className:ge(Kl({variant:t,size:r}),s),...l,children:a}));Se.displayName="Badge";const us=({status:s,className:t})=>{const r={거래중:"available",거래완료:"sold"};return e.jsx(Se,{variant:r[s],className:t,children:s})},Ae=({size:s="md",text:t,className:r,fullScreen:a=!1})=>{const l={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},n=e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsxs("svg",{className:ge("animate-spin text-primary-600",l[s],r),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t&&e.jsx("p",{className:"text-sm text-gray-600 animate-pulse",children:t})]});return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-80",children:n}):n},Jl=()=>{const[s,t]=m.useState(null),[r,a]=m.useState(!1),[l,n]=m.useState(!1);m.useEffect(()=>{const c=u=>{u.preventDefault(),t(u),a(!0)},d=()=>{n(!0),a(!1),t(null)},h=()=>{window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches&&n(!0)};return window.addEventListener("beforeinstallprompt",c),window.addEventListener("appinstalled",d),h(),()=>{window.removeEventListener("beforeinstallprompt",c),window.removeEventListener("appinstalled",d)}},[]);const i=async()=>{if(s)try{await s.prompt();const{outcome:c}=await s.userChoice;c==="accepted"?(console.log("✅ PWA 설치 승인됨"),a(!1)):console.log("❌ PWA 설치 거부됨"),t(null)}catch(c){console.error("PWA 설치 오류:",c)}},o=()=>{a(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return l||!r||!s?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Bs,{className:"w-5 h-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"PC에 바로가기 만들기"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"리체 매물장을 PC 바탕화면에 설치하여 더 편리하게 사용하세요."}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:i,className:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 transition-colors",children:[e.jsx(De,{className:"w-3 h-3 mr-1"}),"설치하기"]}),e.jsx("button",{onClick:o,className:"inline-flex items-center px-3 py-1.5 bg-gray-100 text-gray-700 text-xs font-medium rounded hover:bg-gray-200 transition-colors",children:"나중에"})]})]}),e.jsx("button",{onClick:o,className:"flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ue,{className:"w-4 h-4"})})]})})},Xl=()=>{const[s,t]=m.useState(null),[r,a]=m.useState(!1),[l,n]=m.useState(!1);m.useEffect(()=>{const o=d=>{d.preventDefault(),console.log("✅ PWA 설치 이벤트 감지됨"),t(d),n(!0)},c=()=>{if(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches){console.log("✅ 이미 PWA로 설치되어 실행 중"),a(!0);return}if(window.navigator.standalone===!0){console.log("✅ iOS에서 홈 화면에 추가되어 실행 중"),a(!0);return}"serviceWorker"in navigator&&"BeforeInstallPromptEvent"in window?(n(!0),console.log("✅ 브라우저가 PWA를 지원함")):console.log("❌ 브라우저가 PWA를 지원하지 않음")};return window.addEventListener("beforeinstallprompt",o),c(),()=>{window.removeEventListener("beforeinstallprompt",o)}},[]);const i=async()=>{if(console.log("🔘 설치 버튼 클릭됨"),!s){console.log("❌ deferredPrompt가 없음 - 수동 설치 안내");const o=navigator.userAgent.toLowerCase(),c=o.includes("ipad")||o.includes("iphone")||o.includes("ipod"),d=o.includes("android");alert(c?`iOS Safari에서 설치하기:

1. 하단의 공유 버튼(⬆️) 터치
2. "홈 화면에 추가" 선택
3. "추가" 버튼 터치`:d?`Android Chrome에서 설치하기:

1. 우상단 메뉴(⋮) 터치
2. "홈 화면에 추가" 또는 "앱 설치" 선택`:`PC에서 설치하기:

1. Chrome/Edge 주소창 우측의 설치 아이콘 클릭
2. 또는 브라우저 메뉴에서 "앱 설치" 선택`);return}try{console.log("⏳ PWA 설치 프롬프트 표시 중..."),await s.prompt();const{outcome:o}=await s.userChoice;console.log(`📊 사용자 선택: ${o}`),o==="accepted"?(console.log("✅ PWA 설치 승인됨"),a(!0),alert("✅ 설치가 완료되었습니다! 바탕화면에서 앱을 확인해보세요.")):console.log("❌ PWA 설치 거부됨"),t(null)}catch(o){console.error("💥 PWA 설치 오류:",o),alert('설치 중 오류가 발생했습니다. 브라우저 메뉴에서 "앱 설치"를 시도해보세요.')}};return r?e.jsxs("div",{className:"inline-flex items-center px-3 py-2 bg-green-100 text-green-700 text-sm font-medium rounded-lg",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"✅"}),"설치 완료"]}):!l&&!s?e.jsxs("button",{onClick:i,className:"inline-flex items-center px-3 py-2 bg-gray-500 text-white text-sm font-medium rounded-lg hover:bg-gray-600 transition-colors",title:"브라우저에서 수동 설치 방법을 안내합니다",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"설치 방법 보기"]}):e.jsxs("button",{onClick:i,className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors active:bg-blue-800",disabled:!1,children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"PC에 설치"]})},Ql=({onBackToLogin:s})=>{const{signUp:t}=oe(),[r,a]=m.useState(!1),[l,n]=m.useState(!1),[i,o]=m.useState(!1),[c,d]=m.useState(null),[h,u]=m.useState(null),[f,j]=m.useState({email:"",password:"",confirmPassword:"",name:"",company:""}),g=async b=>{if(b.preventDefault(),o(!0),d(null),u(null),f.password!==f.confirmPassword){d("비밀번호가 일치하지 않습니다."),o(!1);return}if(f.password.length<8){d("비밀번호는 8자 이상이어야 합니다."),o(!1);return}const{error:x}=await t({email:f.email,password:f.password,name:f.name,company:f.company});x?x.message.includes("User already registered")?d("이미 등록된 이메일 주소입니다."):d(x.message):(u("회원가입이 완료되었습니다! 이메일을 확인해주세요."),setTimeout(()=>{s()},3e3)),o(!1)},N=b=>{const{name:x,value:p}=b.target;j(v=>({...v,[x]:p})),d(null),u(null)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-600 rounded-full text-white text-2xl font-bold mb-4",children:"리"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"리체 매물장"}),e.jsx("p",{className:"text-gray-600",children:"부동산 전문 관리 솔루션"})]}),e.jsxs(le,{className:"shadow-xl",children:[e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(Wr,{size:20,className:"text-gray-600"})}),e.jsx(Ne,{children:"회원가입"})]})}),e.jsxs(xe,{children:[e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 border border-blue-200 rounded-lg text-blue-700",children:[e.jsx(cs,{size:16}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"베타 테스트 중:"})," 이메일 인증 없이 즉시 로그인 가능합니다."]})]}),c&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[e.jsx(qe,{size:16}),e.jsx("span",{className:"text-sm",children:c})]}),h&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700",children:[e.jsx(cs,{size:16}),e.jsx("span",{className:"text-sm",children:h})]}),e.jsx("div",{children:e.jsx(A,{type:"text",name:"name",placeholder:"이름",value:f.name,onChange:N,leftIcon:e.jsx(ie,{size:20}),required:!0})}),e.jsx("div",{children:e.jsx(A,{type:"text",name:"company",placeholder:"회사명 (선택사항)",value:f.company,onChange:N,leftIcon:e.jsx(lt,{size:20})})}),e.jsx("div",{children:e.jsx(A,{type:"email",name:"email",placeholder:"이메일 주소",value:f.email,onChange:N,leftIcon:e.jsx(Ue,{size:20}),required:!0})}),e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{type:r?"text":"password",name:"password",placeholder:"비밀번호 (8자 이상)",value:f.password,onChange:N,leftIcon:e.jsx(Ws,{size:20}),required:!0}),e.jsx("button",{type:"button",onClick:()=>a(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?e.jsx(Gs,{size:20}):e.jsx(Ke,{size:20})})]})}),e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{type:l?"text":"password",name:"confirmPassword",placeholder:"비밀번호 확인",value:f.confirmPassword,onChange:N,leftIcon:e.jsx(Ws,{size:20}),required:!0}),e.jsx("button",{type:"button",onClick:()=>n(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?e.jsx(Gs,{size:20}):e.jsx(Ke,{size:20})})]})}),f.password&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:`h-1 flex-1 rounded ${f.password.length>=8?"bg-green-500":"bg-red-500"}`}),e.jsx("div",{className:`h-1 flex-1 rounded ${f.password.length>=12?"bg-green-500":"bg-gray-200"}`}),e.jsx("div",{className:`h-1 flex-1 rounded ${/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(f.password)?"bg-green-500":"bg-gray-200"}`})]}),e.jsx("p",{className:"text-xs text-gray-600",children:"최소 8자, 12자 이상 및 특수문자 포함 권장"})]}),e.jsx(U,{type:"submit",variant:"primary",size:"lg",className:"w-full",loading:i,disabled:h!==null,children:"회원가입"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["이미 계정이 있으신가요?"," ",e.jsx("button",{onClick:s,className:"text-primary-600 hover:text-primary-700 font-medium underline",children:"로그인"})]})})]})]}),e.jsx("div",{className:"text-center mt-8 text-sm text-gray-500",children:e.jsx("p",{children:"© 2025 리체 매물장. All rights reserved."})})]})})},Zl=()=>{const{signIn:s,resetPassword:t}=oe(),[r,a]=m.useState(!1),[l,n]=m.useState(!1),[i,o]=m.useState(!1),[c,d]=m.useState(!1),[h,u]=m.useState(null),[f,j]=m.useState(null),[g,N]=m.useState({email:"",password:""}),b=async p=>{if(p.preventDefault(),d(!0),u(null),j(null),l){const{error:v}=await t(g.email);v?u(v.message):(j("비밀번호 재설정 이메일을 보냈습니다."),n(!1))}else{const{error:v}=await s(g);v&&u("이메일 또는 비밀번호가 올바르지 않습니다.")}d(!1)},x=p=>{const{name:v,value:y}=p.target;N(k=>({...k,[v]:y})),u(null),j(null)};return r?e.jsx(Ql,{onBackToLogin:()=>a(!1)}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-blue-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-600 rounded-full text-white text-2xl font-bold mb-4",children:"리"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"리체 매물장"}),e.jsx("p",{className:"text-gray-600",children:"부동산 전문 관리 솔루션"})]}),e.jsxs(le,{className:"shadow-xl",children:[e.jsx(ve,{children:e.jsx(Ne,{className:"text-center",children:l?"비밀번호 재설정":"로그인"})}),e.jsxs(xe,{children:[e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[h&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[e.jsx(qe,{size:16}),e.jsx("span",{className:"text-sm",children:h})]}),f&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700",children:[e.jsx(cs,{size:16}),e.jsx("span",{className:"text-sm",children:f})]}),e.jsx("div",{children:e.jsx(A,{type:"email",name:"email",placeholder:"이메일 주소",value:g.email,onChange:x,leftIcon:e.jsx(Ue,{size:20}),required:!0})}),!l&&e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{type:i?"text":"password",name:"password",placeholder:"비밀번호",value:g.password,onChange:x,leftIcon:e.jsx(Ws,{size:20}),required:!0}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?e.jsx(Gs,{size:20}):e.jsx(Ke,{size:20})})]})}),e.jsx(U,{type:"submit",variant:"primary",size:"lg",className:"w-full",loading:c,children:l?"재설정 이메일 전송":"로그인"}),!l&&e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>n(!0),className:"text-sm text-primary-600 hover:text-primary-700 underline",children:"비밀번호를 잊으셨나요?"})}),l&&e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{n(!1),u(null),j(null)},className:"text-sm text-gray-600 hover:text-gray-700 underline",children:"로그인으로 돌아가기"})})]}),!l&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["계정이 없으신가요?"," ",e.jsx("button",{onClick:()=>a(!0),className:"text-primary-600 hover:text-primary-700 font-medium underline",children:"회원가입"})]})})]})]}),e.jsx("div",{className:"text-center mt-8 text-sm text-gray-500",children:e.jsx("p",{children:"© 2025 리체 매물장. All rights reserved."})})]})})},en=({children:s,fallback:t=e.jsx(Zl,{})})=>{const{user:r,loading:a,signOut:l}=oe(),n=async()=>{try{await l(),window.location.reload()}catch(i){console.error("Force sign out error:",i),localStorage.clear(),sessionStorage.clear(),window.location.reload()}};return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ae,{size:"lg",text:"로딩 중..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"5초 이상 로딩이 지속되면 아래 버튼을 클릭하세요"}),e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"강제 로그아웃"})]})}):r?e.jsx(e.Fragment,{children:s}):e.jsx(e.Fragment,{children:t})},sn=()=>{const{user:s,signOut:t}=oe(),[r,a]=m.useState(!1),l=m.useRef(null);m.useEffect(()=>{const i=o=>{l.current&&!l.current.contains(o.target)&&a(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const n=async()=>{try{await t()}catch(i){console.error("로그아웃 오류:",i)}};return s?e.jsxs("div",{className:"relative",ref:l,children:[e.jsxs("button",{onClick:()=>a(!r),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-400 to-primary-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:s.avatar_url?e.jsx("img",{src:s.avatar_url,alt:s.name,className:"w-8 h-8 rounded-full object-cover"}):s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"text-left hidden md:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.role==="owner"?"업체 대표":s.role==="manager"?"팀장/실장":s.role==="agent"?"중개사":"조회자"})]}),e.jsx(at,{size:16,className:`text-gray-400 transition-transform hidden md:block ${r?"rotate-180":""}`})]}),r&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["가입일: ",new Date(s.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs("a",{href:"/profile",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>a(!1),children:[e.jsx(ie,{size:16,className:"mr-3"}),"내 프로필"]}),e.jsxs("a",{href:"/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>a(!1),children:[e.jsx(Me,{size:16,className:"mr-3"}),"설정"]})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:n,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Gr,{size:16,className:"mr-3"}),"로그아웃"]})]})]}):null},tn=({children:s})=>{var i,o,c,d;const[t,r]=m.useState(!1),{tenant:a}=es(),l=Ve(),n=[{name:"대시보드",href:"/",icon:Ie},{name:"매물 관리",href:"/properties",icon:Ie},{name:"일정 관리",href:"/schedule",icon:je},{name:"팀 관리",href:"/team",icon:ke},{name:"설정",href:"/settings",icon:Me},{name:"사용설명서",href:"/guide",icon:ns}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>r(!1)}),e.jsx("div",{className:ge("sidebar fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transition-transform duration-300 ease-in-out lg:translate-x-0 hidden lg:block",t?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${((i=a==null?void 0:a.branding)==null?void 0:i.primary_color)||"#3b82f6"}, ${((o=a==null?void 0:a.branding)==null?void 0:o.secondary_color)||"#1d4ed8"})`},children:e.jsx(Ie,{size:18,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:(a==null?void 0:a.name)||"리체 매물장"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a==null?void 0:a.plan," 플랜"]})]})]}),e.jsx("button",{onClick:()=>r(!1),className:"lg:hidden p-1 text-gray-400 hover:text-gray-600",children:e.jsx(ue,{size:20})})]}),e.jsx("div",{className:"p-4",children:e.jsx(ys,{to:"/properties?create=true",children:e.jsx(U,{fullWidth:!0,variant:"tenant",leftIcon:e.jsx(ds,{size:18}),className:"justify-center",children:"매물 등록"})})}),e.jsx("nav",{className:"flex-1 px-4 space-y-1",children:n.map(h=>{const u=l.pathname===h.href;return e.jsxs(ys,{to:h.href,className:ge("nav-item flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors",u?"bg-primary-50 text-primary-700 border-primary-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[e.jsx(h.icon,{className:"w-5 h-5 mr-3"}),h.name]},h.name)})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"text-xs text-gray-500 space-y-2",children:[e.jsxs("div",{children:[e.jsxs("p",{children:["매물: ",(a==null?void 0:a.limits.max_properties)||0,"개 제한"]}),e.jsxs("p",{children:["사용자: ",(a==null?void 0:a.limits.max_users)||0,"명 제한"]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-300 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"개발회사:"})," 리체부동산"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"대표:"})," 김선미 공인중개사"]})]})]})})]})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-lg pb-safe",children:e.jsx("div",{className:"grid grid-cols-6 h-16 bg-white",children:n.map(h=>{const u=l.pathname===h.href;return e.jsxs(ys,{to:h.href,className:ge("nav-item flex flex-col items-center justify-center px-1 py-2 text-xs font-medium transition-all duration-200 touch-manipulation active:scale-95","min-h-[44px] relative",u?"text-primary-600 bg-primary-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[u&&e.jsx("div",{className:"absolute top-0 left-1/2 w-8 h-1 bg-primary-600 rounded-b-full transform -translate-x-1/2"}),e.jsx(h.icon,{size:18,className:"mb-1 flex-shrink-0"}),e.jsx("span",{className:"truncate text-center leading-tight max-w-full",children:h.name.split(" ")[0]})]},h.name)})})}),e.jsxs("div",{className:"lg:ml-64",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3 lg:hidden",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${((c=a==null?void 0:a.branding)==null?void 0:c.primary_color)||"#3b82f6"}, ${((d=a==null?void 0:a.branding)==null?void 0:d.secondary_color)||"#1d4ed8"})`},children:e.jsx(Ie,{size:16,className:"text-white"})}),e.jsx("h2",{className:"text-lg font-semibold",children:(a==null?void 0:a.name)||"리체 매물장"})]}),e.jsx("h2",{className:"hidden lg:block text-lg font-semibold",children:"매물장"})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx(ys,{to:"/properties?create=true",className:"lg:hidden",children:e.jsx(U,{size:"sm",variant:"tenant",leftIcon:e.jsx(ds,{size:16}),className:"px-3 py-2",children:"등록"})}),e.jsx(sn,{})]})]}),e.jsx("main",{className:"p-4 sm:p-6 pb-24 lg:pb-6 min-h-screen",children:s})]})]})};class rn extends Fe.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r)}render(){var t;return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md p-8 bg-white rounded-lg shadow-lg text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"앱 오류 발생"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"예상치 못한 오류가 발생했습니다. 페이지를 새로고침해 보세요."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"새로고침"}),e.jsxs("details",{className:"text-left",children:[e.jsx("summary",{className:"text-sm text-gray-500 cursor-pointer",children:"기술적 세부사항 보기"}),e.jsx("pre",{className:"text-xs text-red-600 mt-2 p-2 bg-red-50 rounded overflow-auto",children:(t=this.state.error)==null?void 0:t.stack})]})]})]})}):this.props.children}}const Re={LANDLORD:/\[임대인정보\]\s*([^\n\[]+)/,LANDLORD_NAME:/임대인:\s*([^|]+)/,LANDLORD_PHONE:/연락처:\s*([^|]+)/,EXIT_DATE:/\[퇴실예정\]\s*([^\n\[]+)/,VACANT:/\[거주현황\]\s*공실/,FACILITIES:/\[편의시설\]\s*([^\n\[]+)/,DETAILED_ADDRESS:/\[상세주소\]\s*([^\n\[]+)/,CONSECUTIVE_NEWLINES:/\n\s*\n/g},Ot={PARKING:"주차가능",ELEVATOR:"엘리베이터"},ls={FLOOR:1,TOTAL_FLOORS:1,AREA:0,ROOMS:1,BATHROOMS:1},ks={MISSING_TENANT_USER:"테넌트 ID 또는 사용자 ID가 없습니다.",MISSING_REQUIRED_FIELDS:"제목과 주소는 필수 입력 항목입니다.",DATABASE_ERROR:"데이터베이스 오류",PROPERTY_NOT_FOUND:"Property not found"},We=new Map,vr=s=>{if(!s)return{landlord_name:void 0,landlord_phone:void 0,exit_date:void 0,detailed_address:void 0,parking:!1,elevator:!1,cleanDescription:"",is_vacant:!1};if(We.has(s))return We.get(s);let t=s,r,a,l,n,i=!1,o=!1,c=!1;const d=s.match(Re.LANDLORD);if(d){const N=d[1],b=N.match(Re.LANDLORD_NAME),x=N.match(Re.LANDLORD_PHONE);b&&(r=b[1].trim()),x&&(a=x[1].trim()),t=t.replace(d[0],"").trim()}const h=s.match(Re.EXIT_DATE);h&&(l=h[1].trim(),t=t.replace(h[0],"").trim());const u=s.match(Re.VACANT);u&&(c=!0,t=t.replace(u[0],"").trim());const f=s.match(Re.FACILITIES);if(f){const N=f[1];i=N.includes(Ot.PARKING),o=N.includes(Ot.ELEVATOR),t=t.replace(f[0],"").trim()}const j=s.match(Re.DETAILED_ADDRESS);j&&(n=j[1].trim(),t=t.replace(j[0],"").trim()),t=t.replace(Re.CONSECUTIVE_NEWLINES,`
`).trim();const g={landlord_name:r,landlord_phone:a,exit_date:l,detailed_address:n,parking:i,elevator:o,cleanDescription:t,is_vacant:c};if(We.size>100){const N=We.keys().next().value;N&&We.delete(N)}return We.set(s,g),g},Nr=(s,t)=>(!s.description&&Object.keys(t).length,{id:s.id,tenant_id:s.tenant_id,created_by:s.user_id,title:s.title,type:s.property_type,transaction_type:s.transaction_type,status:s.status||"거래중",address:s.address,detailed_address:t.detailed_address,area:s.area_exclusive,floor:s.floor_current,total_floors:s.floor_total,rooms:s.rooms,bathrooms:s.bathrooms,price:s.price?parseFloat(String(s.price)):void 0,deposit:s.deposit?parseFloat(String(s.deposit)):void 0,monthly_rent:s.monthly_rent?parseFloat(String(s.monthly_rent)):void 0,description:t.cleanDescription||s.description||"",landlord_name:t.landlord_name,landlord_phone:t.landlord_phone,exit_date:t.exit_date,parking:t.parking,elevator:t.elevator,images:[],is_featured:!1,view_count:0,created_at:s.created_at,updated_at:s.updated_at,options:[],inquiry_count:0,is_urgent:!1,is_favorite:!1}),an=async(s,t)=>{var r;try{F.info("🔍 getProperties 시작",{userId:s,component:"propertyService",action:"getProperties"}),F.debug("Service getProperties 필터",{filters:t,component:"propertyService",action:"getProperties"});let{data:a,error:l}=await E.from("user_profiles").select("tenant_id").eq("id",s).single();if(l||!a){F.warn("⚠️ user_profile 누락 감지 - 자동 복구 시작");const{data:h}=await E.auth.getUser();if(!((r=h.user)!=null&&r.email))throw new Error("사용자 정보를 찾을 수 없습니다.");const u=h.user.email.split("@")[0],{data:f}=await E.from("tenants").insert({name:`${u}의 부동산`,created_at:new Date().toISOString()}).select().single();if(f){await E.from("user_profiles").insert({id:s,tenant_id:f.id,name:u,role:"admin",company:`${u}의 부동산`,created_at:new Date().toISOString()});const{data:j}=await E.from("user_profiles").select("tenant_id").eq("id",s).single();a=j,console.log("✅ 자동 복구 완료 - tenant_id:",a==null?void 0:a.tenant_id)}}const n=a==null?void 0:a.tenant_id;if(!n)throw new Error("사용자에게 할당된 테넌트가 없습니다.");console.log("📋 실제 tenant_id:",n);let i=E.from("properties").select("*").eq("tenant_id",n).order("created_at",{ascending:!1});t&&(t.search&&(i=i.or(`title.ilike.%${t.search}%,address.ilike.%${t.search}%`)),t.transaction_type&&t.transaction_type!=="전체"&&(i=i.eq("transaction_type",t.transaction_type)),t.property_type&&t.property_type!=="전체"&&(i=i.eq("property_type",t.property_type)),t.property_status&&t.property_status!=="전체"&&(i=i.eq("status",t.property_status)));const{data:o,error:c}=await i;if(c)throw console.error("❌ Supabase 조회 에러:",c),console.error("❌ 에러 세부사항:",{message:c.message,details:c.details,hint:c.hint,code:c.code}),c;return(o||[]).map(h=>{const u=vr(h.description||null);return Nr(h,u)})}catch(a){throw console.error("💥 getProperties 전체 에러:",a),console.error("💥 에러 타입:",typeof a),console.error("💥 에러 정보:",a instanceof Error?{name:a.name,message:a.message,stack:a.stack}:a),a}},ln=async(s,t)=>{try{const{data:r,error:a}=await E.from("properties").select(`
        *,
        landlord:user_profiles!properties_landlord_id_fkey(
          id,
          name,
          phone,
          email
        )
      `).eq("id",s).eq("tenant_id",t).single();if(a)throw console.error("Error fetching property:",a),a;return r}catch(r){throw console.error("Error in getProperty:",r),r}},nn=async(s,t,r)=>{if(!t||!r)throw console.error("❌ 필수 파라미터 누락:",{tenantId:t,userId:r}),new Error(ks.MISSING_TENANT_USER);if(!s.title||!s.address)throw console.error("❌ 필수 필드 누락:",{title:s.title,address:s.address}),new Error(ks.MISSING_REQUIRED_FIELDS);try{const{data:a,error:l}=await E.from("user_profiles").select("tenant_id").eq("id",r).single();if(l)throw console.error("❌ 사용자 정보 조회 실패:",l),new Error("사용자 정보를 찾을 수 없습니다.");const n=a.tenant_id;if(!n)throw new Error("사용자에게 할당된 테넌트가 없습니다.");let i=s.description||"";if(s.landlord_name||s.landlord_phone){const j=[];s.landlord_name&&j.push(`임대인: ${s.landlord_name}`),s.landlord_phone&&j.push(`연락처: ${s.landlord_phone}`),i=`[임대인정보] ${j.join(" | ")}`+(i?`

${i}`:"")}if(s.exit_date){const j=`[퇴실예정] ${s.exit_date}`;i=(i?`${i}

`:"")+j}else i=(i?`${i}

`:"")+"[거주현황] 공실";const o=[];if(s.parking&&o.push("주차가능"),s.elevator&&o.push("엘리베이터"),o.length>0){const j=`[편의시설] ${o.join(", ")}`;i=(i?`${i}

`:"")+j}if(s.detailed_address){const j=`[상세주소] ${s.detailed_address}`;i=(i?`${i}

`:"")+j}if(s.status){const j=`[상태] ${s.status}`;i=(i?`${i}

`:"")+j}const c={tenant_id:n,user_id:r,title:s.title,address:s.address||"",property_type:s.type,transaction_type:s.transaction_type,status:s.status||"거래중",price:s.price||null,deposit:s.deposit||null,monthly_rent:s.monthly_rent||null,floor_current:s.floor||ls.FLOOR,floor_total:s.total_floors||ls.TOTAL_FLOORS,area_exclusive:s.area||ls.AREA,rooms:s.rooms||ls.ROOMS,bathrooms:s.bathrooms||ls.BATHROOMS,description:i||null},{data:d,error:h}=await E.from("properties").insert(c).select("*").single();if(h)throw console.error("❌ 매물 생성 실패:",h),console.error("❌ 에러 코드:",h.code),console.error("❌ 에러 메시지:",h.message),console.error("❌ 에러 세부사항:",h.details),console.error("❌ 에러 힌트:",h.hint),new Error(`${ks.DATABASE_ERROR}: ${h.message}`);const u=vr(d.description),f=Nr(d,u);return f.updated_at=d.updated_at,f}catch(a){throw console.error("Error in createProperty:",a),a}},on=async(s,t,r)=>{try{const{data:a,error:l}=await E.from("user_profiles").select("tenant_id").eq("id",r).single();if(l)throw console.error("❌ 사용자 정보 조회 실패:",l),new Error("사용자 정보를 찾을 수 없습니다.");const n=a.tenant_id;if(!n)throw new Error("사용자에게 할당된 테넌트가 없습니다.");const{data:i}=await E.from("properties").select("description").eq("id",s).eq("tenant_id",n).single(),c=(x=>{if(!x)return{cleanDescription:""};let p=x;return p=p.replace(/\[임대인정보\][^\n\[]*/,"").trim(),p=p.replace(/\[퇴실예정\][^\n\[]*/,"").trim(),p=p.replace(/\[편의시설\][^\n\[]*/,"").trim(),p=p.replace(/\[상세주소\][^\n\[]*/,"").trim(),p=p.replace(/\[상태\][^\n\[]*/,"").trim(),p=p.replace(/\n\s*\n/g,`
`).trim(),{cleanDescription:p}})(i==null?void 0:i.description);let d=t.description!==void 0?t.description:c.cleanDescription;if(t.landlord_name||t.landlord_phone){const x=[];t.landlord_name&&x.push(`임대인: ${t.landlord_name}`),t.landlord_phone&&x.push(`연락처: ${t.landlord_phone}`),d=`[임대인정보] ${x.join(" | ")}`+(d?`

${d}`:"")}if(t.exit_date){const x=`[퇴실예정] ${t.exit_date}`;d=(d?`${d}

`:"")+x}const h=[];if(t.parking&&h.push("주차가능"),t.elevator&&h.push("엘리베이터"),h.length>0){const x=`[편의시설] ${h.join(", ")}`;d=(d?`${d}

`:"")+x}if(t.detailed_address){const x=`[상세주소] ${t.detailed_address}`;d=(d?`${d}

`:"")+x}if(t.status){const x=`[상태] ${t.status}`;d=(d?`${d}

`:"")+x}const u={};t.title!==void 0&&(u.title=t.title),t.type!==void 0&&(u.property_type=t.type),t.transaction_type!==void 0&&(u.transaction_type=t.transaction_type),t.status!==void 0&&(u.status=t.status),t.address!==void 0&&(u.address=t.address),t.area!==void 0&&(u.area_exclusive=t.area),t.floor!==void 0&&(u.floor_current=t.floor),t.total_floors!==void 0&&(u.floor_total=t.total_floors),t.rooms!==void 0&&(u.rooms=t.rooms),t.bathrooms!==void 0&&(u.bathrooms=t.bathrooms),t.price!==void 0&&(u.price=t.price),t.deposit!==void 0&&(u.deposit=t.deposit),t.monthly_rent!==void 0&&(u.monthly_rent=t.monthly_rent),u.description=d||null;const{data:f,error:j}=await E.from("properties").update(u).eq("id",s).eq("tenant_id",n).select().single();if(j)throw console.error("❌ 매물 수정 실패:",j),new Error(`데이터베이스 오류: ${j.message}`);const N=(x=>{if(!x)return{landlord_name:void 0,landlord_phone:void 0,exit_date:void 0,detailed_address:void 0,parking:!1,elevator:!1,status:void 0,cleanDescription:""};let p=x,v,y,k,L,z,R=!1,q=!1;const $=x.match(/\[임대인정보\]\s*([^\n\[]+)/);if($){const O=$[1],_=O.match(/임대인:\s*([^|]+)/),P=O.match(/연락처:\s*([^|]+)/);_&&(v=_[1].trim()),P&&(y=P[1].trim()),p=p.replace($[0],"").trim()}const te=x.match(/\[퇴실예정\]\s*([^\n\[]+)/);te&&(k=te[1].trim(),p=p.replace(te[0],"").trim());const ee=x.match(/\[편의시설\]\s*([^\n\[]+)/);if(ee){const O=ee[1];R=O.includes("주차가능"),q=O.includes("엘리베이터"),p=p.replace(ee[0],"").trim()}const G=x.match(/\[상세주소\]\s*([^\n\[]+)/);G&&(L=G[1].trim(),p=p.replace(G[0],"").trim());const Y=x.match(/\[상태\]\s*([^\n\[]+)/);return Y&&(z=Y[1].trim(),p=p.replace(Y[0],"").trim()),p=p.replace(/\n\s*\n/g,`
`).trim(),{landlord_name:v,landlord_phone:y,exit_date:k,detailed_address:L,parking:R,elevator:q,status:z,cleanDescription:p}})(f.description);return{id:f.id,tenant_id:f.tenant_id,created_by:f.user_id,title:f.title,type:f.property_type,transaction_type:f.transaction_type,address:f.address,detailed_address:N.detailed_address,area:f.area_exclusive,floor:f.floor_current,total_floors:f.floor_total,rooms:f.rooms,bathrooms:f.bathrooms,price:f.price?parseFloat(f.price):void 0,deposit:f.deposit?parseFloat(f.deposit):void 0,monthly_rent:f.monthly_rent?parseFloat(f.monthly_rent):void 0,description:N.cleanDescription||f.description,landlord_name:N.landlord_name,landlord_phone:N.landlord_phone,exit_date:N.exit_date,parking:N.parking,elevator:N.elevator,images:[],is_featured:!1,view_count:0,created_at:f.created_at,updated_at:f.updated_at,status:f.status||t.status||"거래중",options:[],inquiry_count:0,is_urgent:!1,is_favorite:!1}}catch(a){throw console.error("💥 updateProperty 전체 에러:",a),a}},cn=async(s,t)=>{try{const{data:r,error:a}=await E.from("user_profiles").select("tenant_id").eq("id",t).single();if(a)throw console.error("❌ 사용자 정보 조회 실패:",a),new Error("사용자 정보를 찾을 수 없습니다.");const l=r.tenant_id;if(!l)throw new Error("사용자에게 할당된 테넌트가 없습니다.");const{error:n}=await E.from("properties").delete().eq("id",s).eq("tenant_id",l);if(n)throw console.error("❌ 매물 삭제 실패:",n),new Error(`데이터베이스 오류: ${n.message}`);return!0}catch(r){throw console.error("💥 deleteProperty 전체 에러:",r),r}},dn=async s=>{try{const{data:t,error:r}=await E.from("user_profiles").select("tenant_id").eq("id",s).single();if(r)throw console.error("❌ 사용자 정보 조회 실패:",r),new Error("사용자 정보를 찾을 수 없습니다.");const a=t.tenant_id;if(!a)throw new Error("사용자에게 할당된 테넌트가 없습니다.");const{data:l,error:n}=await E.from("properties").select("transaction_type, created_at, status").eq("tenant_id",a);if(n)throw console.error("❌ 매물 통계 조회 실패:",n),n;const i=l.filter(c=>c.status==="거래완료").length;return{total:l.length,active:l.length-i,reserved:0,sold:i,this_month:l.filter(c=>{const d=new Date(c.created_at),h=new Date;return d.getMonth()===h.getMonth()&&d.getFullYear()===h.getFullYear()}).length,by_transaction_type:{sale:l.filter(c=>c.transaction_type==="매매").length,jeonse:l.filter(c=>c.transaction_type==="전세").length,monthly:l.filter(c=>c.transaction_type==="월세").length}}}catch(t){throw console.error("Error in getPropertyStats:",t),t}},mn=async(s,t)=>{try{const{data:r,error:a}=await E.from("user_profiles").select("tenant_id").eq("id",t).single();if(a)throw console.error("❌ 사용자 정보 조회 실패:",a),new Error("사용자 정보를 찾을 수 없습니다.");const l=r.tenant_id;if(!l)throw new Error("사용자에게 할당된 테넌트가 없습니다.");const{data:n}=await E.from("properties").select("is_favorite").eq("id",s).eq("tenant_id",l).single();if(!n)throw new Error(ks.PROPERTY_NOT_FOUND);const{data:i,error:o}=await E.from("properties").update({is_favorite:!n.is_favorite}).eq("id",s).eq("tenant_id",l).select().single();if(o)throw console.error("Error toggling property favorite:",o),o;return i}catch(r){throw console.error("Error in togglePropertyFavorite:",r),r}},xn=Object.freeze(Object.defineProperty({__proto__:null,createProperty:nn,deleteProperty:cn,getProperties:an,getProperty:ln,getPropertyStats:dn,togglePropertyFavorite:mn,updateProperty:on},Symbol.toStringTag,{value:"Module"})),hn="https://wlrsoyujrmeviczczfsh.supabase.co",un="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndscnNveXVqcm1ldmljemN6ZnNoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxNDM5NjUsImV4cCI6MjA2OTcxOTk2NX0.ZHepp6oDnIfG73nSERBGcgBis-iuumOvVlijUP4fu1Y",pe=Ft(hn,un,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"propertydesk-auth"},global:{headers:{"X-Client":"PropertyDesk-SaaS"}}});class X extends Error{constructor(r,a){var t=(...fi)=>(super(...fi),bs(this,"code"),bs(this,"field"),bs(this,"details"),this);typeof r=="string"?(t(r),this.code="UNKNOWN_ERROR"):(t(r.message),this.code=r.code,this.field=r.field||void 0,this.details=r.details||void 0),this.name="ServiceError",a&&F.error("ServiceError occurred:",{code:this.code,message:this.message,field:this.field,context:a})}}class gn{async getSchedules(t,r){try{let a=pe.from("schedules").select("*").eq("tenant_id",t).order("start_date",{ascending:!0});r&&(r.category&&(a=a.eq("category",r.category)),r.priority&&(a=a.eq("priority",r.priority)),r.status&&(a=a.eq("status",r.status)),r.date_range&&(a=a.gte("start_date",r.date_range.start).lte("end_date",r.date_range.end)),r.created_by&&(a=a.eq("created_by",r.created_by)));const{data:l,error:n}=await a;if(n)throw new X({code:"SCHEDULE_FETCH_ERROR",message:"스케줄 목록을 불러오는 중 오류가 발생했습니다.",details:n});return l||[]}catch(a){throw a instanceof X?a:new X({code:"SCHEDULE_FETCH_UNEXPECTED_ERROR",message:"스케줄 목록을 불러오는 중 예상치 못한 오류가 발생했습니다.",details:a})}}async getSchedulesByDateRange(t,r,a){return this.getSchedules(t,{date_range:{start:r,end:a}})}async getSchedulesByDate(t,r){const a=new Date(r);a.setHours(0,0,0,0);const l=new Date(r);return l.setHours(23,59,59,999),this.getSchedulesByDateRange(t,a.toISOString(),l.toISOString())}async getSchedule(t){try{const{data:r,error:a}=await pe.from("schedules").select("*").eq("id",t).single();if(a){if(a.code==="PGRST116")return null;throw new X({code:"SCHEDULE_GET_ERROR",message:"스케줄을 불러오는 중 오류가 발생했습니다.",details:a})}return r}catch(r){throw r instanceof X?r:new X({code:"SCHEDULE_GET_UNEXPECTED_ERROR",message:"스케줄을 불러오는 중 예상치 못한 오류가 발생했습니다.",details:r})}}async createSchedule(t,r,a){try{console.log("🔄 scheduleService.createSchedule 시작:",{tenantId:t,userId:r,formData:a});const l={...a};(!l.property_id||l.property_id.trim()==="")&&delete l.property_id,Array.isArray(l.attendees)&&l.attendees.length===0&&delete l.attendees;const n={...l,tenant_id:t,created_by:r,status:"scheduled",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("📝 Supabase에 삽입할 데이터:",n);const{data:{user:i}}=await pe.auth.getUser();console.log("🔐 현재 인증된 사용자 (RLS 확인):",{userId:i==null?void 0:i.id,email:i==null?void 0:i.email,tenant_id_in_data:n.tenant_id,created_by_in_data:n.created_by,match_tenant:n.tenant_id===(i==null?void 0:i.id),match_created_by:n.created_by===(i==null?void 0:i.id)});const{data:o,error:c}=await pe.from("schedules").insert([n]).select().single();if(console.log("📊 Supabase 응답:",{data:o,error:c}),c)throw console.error("❌ Supabase 삽입 오류:",c),new X({code:"SCHEDULE_CREATE_ERROR",message:`스케줄 등록 중 오류가 발생했습니다: ${c.message}`,details:c});return console.log("✅ 스케줄 생성 성공:",o),o}catch(l){throw console.error("❌ scheduleService.createSchedule 오류:",l),l instanceof X?l:new X({code:"SCHEDULE_CREATE_UNEXPECTED_ERROR",message:"스케줄 등록 중 예상치 못한 오류가 발생했습니다.",details:l})}}async updateSchedule(t,r,a){try{console.log("🔄 스케줄 수정 시작:",{id:t,updates:r});let l;if(a)console.log("🔐 전달받은 사용자 ID 사용:",a),l=a;else{console.log("🔐 Supabase에서 현재 사용자 확인 중...");const{data:{user:u},error:f}=await pe.auth.getUser();if(console.log("🔐 Supabase 인증 상태:",{hasUser:!!u,userId:u==null?void 0:u.id,email:u==null?void 0:u.email,userError:f}),f||!u)throw console.error("❌ Supabase 인증 실패:",f),new X({code:"SCHEDULE_UPDATE_AUTH_ERROR",message:"인증이 필요합니다.",details:f});l=u.id}const{data:n,error:i}=await pe.from("schedules").select("*").eq("id",t).eq("created_by",l).eq("tenant_id",l).single();if(console.log("📊 기존 스케줄 조회 결과:",{hasData:!!n,fetchError:i,scheduleId:t,queryFilters:{id:t,created_by:l,tenant_id:l}}),i||!n)throw console.error("❌ 스케줄 조회 실패:",i),new X({code:"SCHEDULE_NOT_FOUND",message:"수정할 스케줄을 찾을 수 없거나 권한이 없습니다.",details:i});if(n.created_by!==l||n.tenant_id!==l)throw console.error("❌ 권한 확인 실패:",{scheduleCreatedBy:n.created_by,scheduleTenantId:n.tenant_id,currentUserId:l}),new X({code:"SCHEDULE_UPDATE_PERMISSION_ERROR",message:"이 스케줄을 수정할 권한이 없습니다.",details:{scheduleCreatedBy:n.created_by,currentUserId:l}});const o={...r};o.property_id!==void 0&&(!o.property_id||o.property_id.trim()==="")&&delete o.property_id,Array.isArray(o.attendees)&&o.attendees.length===0&&delete o.attendees;const c={...o,updated_at:new Date().toISOString()},{data:d,error:h}=await pe.from("schedules").update(c).eq("id",t).eq("created_by",l).eq("tenant_id",l).select().single();if(h)throw new X({code:"SCHEDULE_UPDATE_ERROR",message:"스케줄 수정 중 오류가 발생했습니다.",details:h});return console.log("✅ 스케줄 수정 완료:",d),d}catch(l){throw l instanceof X?l:new X({code:"SCHEDULE_UPDATE_UNEXPECTED_ERROR",message:"스케줄 수정 중 예상치 못한 오류가 발생했습니다.",details:l})}}async updateScheduleStatus(t,r){return this.updateSchedule(t,{status:r})}async deleteSchedule(t,r){try{console.log("🗑️ 스케줄 삭제 시작:",{id:t});let a;if(r)console.log("🔐 전달받은 사용자 ID 사용 (삭제):",r),a=r;else{console.log("🔐 Supabase에서 현재 사용자 확인 중 (삭제)...");const{data:{user:n},error:i}=await pe.auth.getUser();if(i||!n)throw console.error("❌ 삭제 시 인증 실패:",i),new X({code:"SCHEDULE_DELETE_AUTH_ERROR",message:"인증이 필요합니다.",details:i});a=n.id}const{error:l}=await pe.from("schedules").delete().eq("id",t).eq("created_by",a).eq("tenant_id",a);if(console.log("🗑️ 스케줄 삭제 쿼리 실행:",{scheduleId:t,userId:a,error:l}),l)throw new X({code:"SCHEDULE_DELETE_ERROR",message:"스케줄 삭제 중 오류가 발생했습니다.",details:l});console.log("✅ 스케줄 삭제 완료")}catch(a){throw a instanceof X?a:new X({code:"SCHEDULE_DELETE_UNEXPECTED_ERROR",message:"스케줄 삭제 중 예상치 못한 오류가 발생했습니다.",details:a})}}async getTodaySchedules(t,r=3){try{const a=new Date,l=new Date(a);l.setHours(0,0,0,0);const n=new Date(a);n.setHours(23,59,59,999);const{data:i,error:o}=await pe.from("schedules").select("*").eq("tenant_id",t).gte("start_date",l.toISOString()).lte("start_date",n.toISOString()).in("status",["scheduled","in_progress"]).order("start_date",{ascending:!0}).limit(r);if(o)throw new X({code:"SCHEDULE_TODAY_ERROR",message:"당일 일정을 불러오는 중 오류가 발생했습니다.",details:o});return i||[]}catch(a){throw a instanceof X?a:new X({code:"SCHEDULE_TODAY_UNEXPECTED_ERROR",message:"당일 일정을 불러오는 중 예상치 못한 오류가 발생했습니다.",details:a})}}async getUpcomingSchedules(t,r=3){try{const a=new Date;a.setDate(a.getDate()+1),a.setHours(0,0,0,0);const{data:l,error:n}=await pe.from("schedules").select("*").eq("tenant_id",t).gte("start_date",a.toISOString()).in("status",["scheduled","in_progress"]).order("start_date",{ascending:!0}).limit(r);if(n)throw new X({code:"SCHEDULE_UPCOMING_ERROR",message:"다가오는 일정을 불러오는 중 오류가 발생했습니다.",details:n});return l||[]}catch(a){throw a instanceof X?a:new X({code:"SCHEDULE_UPCOMING_UNEXPECTED_ERROR",message:"다가오는 일정을 불러오는 중 예상치 못한 오류가 발생했습니다.",details:a})}}async getScheduleStats(t){try{const{data:r,error:a}=await pe.from("schedules").select("status, start_date, end_date").eq("tenant_id",t);if(a)throw new X({code:"SCHEDULE_STATS_ERROR",message:"스케줄 통계를 불러오는 중 오류가 발생했습니다.",details:a});const l=new Date,n=r||[],i={total:n.length,scheduled:0,inProgress:0,completed:0,overdue:0};return n.forEach(o=>{const c=new Date(o.end_date);switch(o.status){case"scheduled":c<l?i.overdue++:i.scheduled++;break;case"in_progress":i.inProgress++;break;case"completed":i.completed++;break}}),i}catch(r){throw r instanceof X?r:new X({code:"SCHEDULE_STATS_UNEXPECTED_ERROR",message:"스케줄 통계를 불러오는 중 예상치 못한 오류가 발생했습니다.",details:r})}}}const Xe=new gn,fn=xn,{getProperties:pn,createProperty:bn,updateProperty:jn,deleteProperty:yn,getPropertyStats:vn}=fn,ps=s=>{const{user:t}=oe(),[r,a]=m.useState([]),[l,n]=m.useState(!0),[i,o]=m.useState(null),c=m.useCallback(async()=>{if(!(t!=null&&t.id)){n(!1),o(null),a([]);return}try{n(!0),o(null);const f=await pn(t.id,s);a(f||[])}catch(f){console.error("❌ 데이터 로딩 실패:",f),o("매물을 불러오는 중 오류가 발생했습니다."),a([])}finally{n(!1)}},[t==null?void 0:t.id,s]);m.useEffect(()=>{c()},[c]);const d=m.useCallback(async f=>{if(!(t!=null&&t.id))throw new Error("사용자 인증 정보가 없습니다. 다시 로그인 해주세요.");try{const j=await bn(f,t.id,t.id);return a(g=>[j,...g]),j}catch(j){throw console.error("❌ useProperties.createNewProperty 실패:",j),console.error("❌ 에러 타입:",typeof j),console.error("❌ 에러 상세:",j instanceof Error?{name:j.name,message:j.message,stack:j.stack}:j),j instanceof Error?j:new Error("매물 생성 중 알 수 없는 오류가 발생했습니다.")}},[t==null?void 0:t.id]),h=m.useCallback(async(f,j)=>{if(!(t!=null&&t.id))throw new Error("사용자 정보가 없습니다.");try{const g=await jn(f,j,t.id);return a(N=>N.map(b=>b.id===f?g:b).filter(b=>b!==null)),g}catch(g){throw console.error("Error updating property:",g),new Error("매물 수정 중 오류가 발생했습니다.")}},[t==null?void 0:t.id]),u=m.useCallback(async f=>{if(!(t!=null&&t.id))throw new Error("사용자 정보가 없습니다.");try{await yn(f,t.id),a(j=>j.filter(g=>g.id!==f))}catch(j){throw console.error("Error deleting property:",j),new Error("매물 삭제 중 오류가 발생했습니다.")}},[t==null?void 0:t.id]);return{properties:r,loading:l,error:i,refreshProperties:c,createProperty:d,updateProperty:h,deleteProperty:u}},Nn=()=>{const{user:s}=oe(),[t,r]=m.useState(null),[a,l]=m.useState(!0),[n,i]=m.useState(null);return m.useEffect(()=>{(async()=>{if(s!=null&&s.id)try{l(!0),i(null);const c=await vn(s.id);r(c)}catch(c){console.error("Error fetching property stats:",c),console.log("🔧 오류로 인한 모사 통계 데이터 사용"),r({total:2,active:2,reserved:0,sold:0,this_month:2,total_users:1,active_users:1,by_transaction_type:{sale:1,jeonse:1,monthly:0}}),i(null)}finally{l(!1)}})()},[s==null?void 0:s.id]),{stats:t,loading:a,error:n}},wn=m.memo(({title:s,value:t,change:r,icon:a,color:l="text-gray-600",loading:n=!1})=>e.jsxs(le,{className:"transition-all hover:shadow-md",children:[e.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2 px-3 sm:px-6 pt-3 sm:pt-6",children:[e.jsx(Ne,{className:"text-xs sm:text-sm font-medium text-gray-600 truncate pr-2",children:s}),e.jsx(a,{className:`h-3 w-3 sm:h-4 sm:w-4 ${l} flex-shrink-0`})]}),e.jsx(xe,{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:n?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 sm:h-8 bg-gray-200 rounded w-3/4 mb-1 sm:mb-2"}),e.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded w-1/2"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-gray-900 leading-none",children:t}),r&&e.jsxs("p",{className:"text-xs sm:text-xs text-gray-500 mt-1 leading-none",children:[e.jsxs("span",{className:"hidden sm:inline",children:[r," 지난달 대비"]}),e.jsx("span",{className:"sm:hidden",children:r})]})]})})]})),Dt=({title:s,schedules:t,loading:r,emptyMessage:a,onViewAll:l})=>{const n={property_viewing:{label:"매물 보기",color:"bg-blue-500",icon:e.jsx(be,{className:"w-3 h-3"})},contract_signing:{label:"계약 체결",color:"bg-green-500",icon:e.jsx(Je,{className:"w-3 h-3"})},maintenance:{label:"유지보수",color:"bg-yellow-500",icon:e.jsx(qe,{className:"w-3 h-3"})},client_meeting:{label:"고객 미팅",color:"bg-purple-500",icon:e.jsx(ie,{className:"w-3 h-3"})},team_meeting:{label:"팀 회의",color:"bg-indigo-500",icon:e.jsx(ie,{className:"w-3 h-3"})},personal:{label:"개인 일정",color:"bg-pink-500",icon:e.jsx(je,{className:"w-3 h-3"})},other:{label:"기타",color:"bg-gray-500",icon:e.jsx(Je,{className:"w-3 h-3"})}},i=(d,h)=>{const u=new Date(d);return h?"종일":u.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1})},o=d=>{const h=new Date(d),u=new Date,f=new Date(u);return f.setDate(u.getDate()+1),h.toDateString()===u.toDateString()?"오늘":h.toDateString()===f.toDateString()?"내일":h.toLocaleDateString("ko-KR",{month:"short",day:"numeric"})},c=(d,h=25)=>d.length>h?`${d.slice(0,h)}...`:d;return r?e.jsx(le,{children:e.jsxs(xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s}),l&&e.jsxs("button",{className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:["더보기",e.jsx(Hs,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(d=>e.jsxs("div",{className:"flex items-center space-x-3 animate-pulse",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-200"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-12"})]},d))})]})}):e.jsx(le,{children:e.jsxs(xe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s}),l&&e.jsxs("button",{onClick:l,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center transition-colors",children:["더보기",e.jsx(Hs,{className:"w-4 h-4 ml-1"})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(je,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-gray-500 text-sm",children:a})]}):e.jsx("div",{className:"space-y-3",children:t.map(d=>{const h=n[d.category];return e.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-3 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer border border-transparent hover:border-gray-200 group",title:`${d.title} - ${h.label}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${h.color} flex-shrink-0`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:c(d.title)}),d.priority==="urgent"&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-red-100 text-red-600",children:"긴급"})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:h.label}),d.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300 hidden sm:inline",children:"•"}),e.jsx("span",{className:"text-xs text-gray-400 truncate max-w-16 sm:max-w-24",children:d.location})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end text-right flex-shrink-0 ml-2 sm:ml-3",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[e.jsx(nt,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:i(d.start_date,d.all_day)}),e.jsx("span",{className:"sm:hidden",children:d.all_day?"종일":i(d.start_date,d.all_day).slice(0,5)})]}),e.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:o(d.start_date)})]})]},d.id)})})]})})},_n=s=>{const t=s.split(" "),r=t.find(l=>l.endsWith("동"));if(r)return r;const a=t.find(l=>l.endsWith("구"));return a||t.slice(-2).join(" ")},Is=s=>{const{transaction_type:t,price:r,deposit:a,monthly_rent:l,title:n}=s;switch(t==="매매"&&F.debug("🔍 매매가 가격 포맷팅:",{title:n,transaction_type:t,price:r,priceType:typeof r,result:r?`${_e(r)}`:"가격 협의"}),t){case"매매":return r?`${_e(r)}`:"가격 협의";case"전세":return a?`전세 ${_e(a)}`:"보증금 협의";case"월세":const i=a?_e(a):"0",o=l?_e(l):"0";return`${i}/${o}`;case"단기임대":return l?`월 ${_e(l)}`:"가격 협의";default:return"가격 정보 없음"}},_e=s=>{if(s>=1e4&&F.debug("💰 formatMoney 매매가 디버깅:",{amount:s,type:typeof s,eok:Math.floor(s/1e4),man:s%1e4,결과:s>=1e4?s%1e4===0?`${Math.floor(s/1e4)}억`:`${Math.floor(s/1e4)}억 ${(s%1e4).toLocaleString()}만원`:`${s.toLocaleString()}만원`}),s>=1e4){const t=Math.floor(s/1e4),r=s%1e4;return r===0?`${t}억`:`${t}억 ${r.toLocaleString()}만원`}else return`${s.toLocaleString()}만원`},Lt=s=>{const t=(s/3.3058).toFixed(1);return`${s}㎡ (${t}평)`},wr=m.memo(({property:s,onClick:t,className:r=""})=>{const a=_n(s.address),l=Is(s);return e.jsxs("div",{className:`
        card bg-white rounded-xl border border-gray-200 hover:border-blue-300 
        hover:shadow-md transition-all duration-200 cursor-pointer
        p-3 sm:p-4 space-y-3 group active:scale-[0.98] touch-target
        relative
        ${r}
      `,onClick:()=>t==null?void 0:t(s),children:[s.status==="거래완료"&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx("div",{className:"bg-red-600/90 text-white px-3 py-1.5 rounded-lg transform rotate-12 shadow-lg",children:e.jsx("span",{className:"text-sm sm:text-base font-bold tracking-wide",children:"완료"})})}),e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg leading-tight line-clamp-2 group-hover:text-blue-600 transition-colors flex-1 min-w-0",children:s.title}),s.is_urgent&&e.jsx("span",{className:"bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full font-medium flex-shrink-0",children:"급매"})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(be,{className:"w-4 h-4 mr-2 flex-shrink-0 text-gray-400"}),e.jsx("span",{className:"text-sm sm:text-base truncate",children:a})]}),e.jsxs("div",{className:"flex items-center text-gray-900",children:[e.jsx(qt,{className:"w-4 h-4 mr-2 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"font-bold text-lg sm:text-xl text-blue-600",children:l})]}),s.exit_date?e.jsxs("div",{className:"flex items-center text-orange-600",children:[e.jsx(je,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsxs("span",{className:"text-sm font-medium",children:["퇴실:"," ",new Date(s.exit_date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}):e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(je,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium",children:"공실"})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs sm:text-sm text-gray-500",children:[e.jsx("span",{children:s.type}),e.jsx("span",{className:"text-gray-300",children:"•"}),e.jsx("span",{children:s.transaction_type})]}),e.jsx(us,{status:s.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{children:[s.area,"m² (",Math.floor(s.area/3.3),"평)"]}),e.jsxs("span",{children:[s.rooms,"룸"]}),s.floor&&e.jsxs("span",{children:[s.floor,"층"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s.parking&&e.jsx("span",{className:"text-green-600",title:"주차 가능",children:"🚗"}),s.elevator&&e.jsx("span",{className:"text-blue-600",title:"엘리베이터",children:"🏢"})]})]})]})]})}),Sn=()=>{const[s,t]=m.useState({isMobile:!1,width:0,height:0,detectionDetails:{isMobileWidth:!1,isMobileUA:!1,isTouchDevice:!1,isPortraitOrientation:!1,mediaQueryMatch:!1,isHighDPR:!1,mobileScore:0,userAgent:""}});return m.useEffect(()=>{const r=()=>{const a=window.innerWidth,l=window.innerHeight,n=navigator.userAgent.toLowerCase(),i=a<1024,o=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(n)||n.includes("chrome")&&n.includes("mobile")||n.includes("chrome")&&n.includes("android")&&n.includes("mobile")||n.includes("crios")&&n.includes("mobile")||/chrome.*android.*mobile/i.test(n)||/android.*chrome.*mobile/i.test(n)||n.includes("samsungbrowser")||n.includes("mobile")||n.includes("phone")||n.includes("wv")||n.includes("android")&&!n.includes("desktop"),c="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,d=l>a,h=window.matchMedia("(max-width: 1023px)").matches,u=window.devicePixelRatio>1.5,f=a<768&&l<1024,j=n.includes("chrome")&&n.includes("android")&&n.includes("mobile"),g=n.includes("mobile")&&(a<768||c);let N=[i?4:0,o?3:0,c?2:0,d&&a<800?1.5:0,h?2:0,u?1:0,f?2:0].reduce((v,y)=>v+y,0);(j||g)&&(N+=2);const x=a<=768&&c||o&&a<1024||j||d&&a<768||h&&c||N>=4,p={isMobileWidth:i,isMobileUA:o,isTouchDevice:c,isPortraitOrientation:d,mediaQueryMatch:h,isHighDPR:u,mobileScore:N,userAgent:navigator.userAgent};t({isMobile:x,width:a,height:l,detectionDetails:p})};return r(),window.addEventListener("resize",r),window.addEventListener("orientationchange",r),()=>{window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)}},[]),s},ht=()=>{const{isMobile:s}=Sn();return s},_r=({property:s,isOpen:t,onClose:r,onEdit:a,onDelete:l})=>{const n=ht();if(!t||!s)return null;const i=Is(s),o=h=>h%1===0?`${h}룸`:`${h}룸`,c=()=>{a&&a(s)},d=()=>{l&&l(s)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center p-0 sm:p-4 z-50 touch-manipulation",children:e.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-lg w-full max-w-7xl max-h-[95vh] h-[95vh] sm:h-auto overflow-hidden flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[n&&e.jsx("div",{className:"flex justify-center pt-2 pb-1",children:e.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),n&&e.jsxs("div",{className:"p-3 sm:p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 flex-1 pr-4",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[e.jsx("button",{onClick:c,className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center","aria-label":"매물 수정",children:e.jsx(ms,{className:"w-4 h-4"})}),e.jsx("button",{onClick:d,className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center","aria-label":"매물 삭제",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center","aria-label":"닫기",children:e.jsx(ue,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(be,{className:"w-4 h-4 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base text-gray-600 leading-relaxed",children:s.address})]}),e.jsxs("div",{className:"text-center py-2 bg-white rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-600 mb-1",children:i}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:s.type}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:s.transaction_type}),e.jsx(us,{status:s.status})]})]})]}),!n&&e.jsxs("div",{className:"hidden lg:flex items-center justify-between p-6 space-x-6",children:[e.jsxs("div",{className:"flex-1 flex items-center space-x-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-base",children:s.address})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:i}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-3 py-1.5 bg-blue-100 text-blue-800 rounded-full font-medium text-sm",children:s.type}),e.jsx("span",{className:"px-3 py-1.5 bg-green-100 text-green-800 rounded-full font-medium text-sm",children:s.transaction_type}),e.jsx(us,{status:s.status})]})]})]}),e.jsx("button",{onClick:r,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ue,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:e.jsxs("div",{className:"px-3 py-2 sm:p-4 space-y-2 sm:space-y-4 pb-safe pb-24",children:[n&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-2",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-1"}),"기본 정보"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"면적"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:Lt(s.area)})]}),e.jsxs("div",{className:"flex justify-between items-center py-1 border-t border-blue-200",children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"층수"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[s.floor,"F/",s.total_floors,"F"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-1 border-t border-blue-200",children:[e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"구조"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[o(s.rooms)," ",s.bathrooms,"욕실"]})]}),e.jsx("div",{className:"pt-1 border-t border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"편의시설"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`flex items-center px-2 py-1 rounded text-xs font-medium ${s.parking?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx(pt,{className:"w-3 h-3 mr-1"}),"주차"]}),e.jsxs("div",{className:`flex items-center px-2 py-1 rounded text-xs font-medium ${s.elevator?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[e.jsx(Ys,{className:"w-3 h-3 mr-1"}),"EV"]})]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-2",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"위치 정보"]}),e.jsxs("div",{className:"flex items-start space-x-2 p-2 bg-white rounded border border-green-200",children:[e.jsx(be,{className:"w-3 h-3 text-green-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-bold text-gray-900 leading-tight break-words",children:s.address}),s.detailed_address&&e.jsx("div",{className:"text-xs text-gray-600 mt-0.5",children:s.detailed_address})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-lg p-2",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-1"}),"가격 정보"]}),e.jsxs("div",{className:"space-y-1",children:[s.transaction_type==="매매"&&s.price&&e.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded p-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-blue-800",children:"매매가"}),e.jsx("span",{className:"text-base font-bold text-blue-900",children:_e(s.price)})]})}),(s.transaction_type==="전세"||s.transaction_type==="월세")&&s.deposit!==void 0&&e.jsx("div",{className:"bg-green-100 border border-green-300 rounded p-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-green-800",children:s.transaction_type==="전세"?"전세금":"보증금"}),e.jsx("span",{className:"text-base font-bold text-green-900",children:_e(s.deposit)})]})}),s.transaction_type==="월세"&&s.monthly_rent&&e.jsx("div",{className:"bg-orange-100 border border-orange-300 rounded p-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-orange-800",children:"월세"}),e.jsxs("span",{className:"text-base font-bold text-orange-900",children:[s.monthly_rent,"만원/월"]})]})})]})]})]}),!n&&e.jsxs("div",{className:"block",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),"기본 정보"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white rounded p-2 border border-blue-200",children:[e.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:"전용면적"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:Lt(s.area)})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white rounded p-2 border border-blue-200",children:[e.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:"층수"}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:[s.floor,"F / ",s.total_floors,"F"]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white rounded p-2 border border-blue-200",children:[e.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:"구조"}),e.jsxs("span",{className:"text-base font-bold text-gray-900",children:[o(s.rooms)," ",s.bathrooms,"욕실"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4 border border-yellow-200",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"가격 정보"]}),e.jsxs("div",{className:"space-y-2",children:[s.transaction_type==="매매"&&s.price&&e.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded p-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-blue-800",children:"매매가"}),e.jsx("span",{className:"text-base font-bold text-blue-900",children:_e(s.price)})]})}),(s.transaction_type==="전세"||s.transaction_type==="월세")&&s.deposit!==void 0&&e.jsx("div",{className:"bg-green-100 border border-green-300 rounded p-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-green-800",children:s.transaction_type==="전세"?"전세금":"보증금"}),e.jsx("span",{className:"text-base font-bold text-green-900",children:_e(s.deposit)})]})}),s.transaction_type==="월세"&&s.monthly_rent&&e.jsx("div",{className:"bg-orange-100 border border-orange-300 rounded p-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-orange-800",children:"월세"}),e.jsxs("span",{className:"text-base font-bold text-orange-900",children:[s.monthly_rent,"만원/월"]})]})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),"편의시설 & 위치"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:`flex items-center justify-center py-2 px-2 rounded text-sm font-semibold ${s.parking?"bg-green-100 text-green-800 border border-green-300":"bg-gray-100 text-gray-600 border border-gray-300"}`,children:[e.jsx(pt,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"주차"})]}),e.jsxs("div",{className:`flex items-center justify-center py-2 px-2 rounded text-sm font-semibold ${s.elevator?"bg-green-100 text-green-800 border border-green-300":"bg-gray-100 text-gray-600 border border-gray-300"}`,children:[e.jsx(Ys,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"EV"})]})]}),e.jsxs("div",{className:"bg-white rounded p-2 border border-green-200",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(be,{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"text-sm text-gray-900 leading-tight font-medium",children:s.address})]}),s.detailed_address&&e.jsx("div",{className:"text-sm text-gray-600 mt-1 ml-6 font-medium",children:s.detailed_address})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full mr-2"}),"임대인 & 날짜"]}),e.jsx("div",{className:"space-y-2 mb-3",children:s.landlord_name||s.landlord_phone?e.jsxs(e.Fragment,{children:[s.landlord_name&&e.jsx("div",{className:"bg-white rounded p-2 border border-purple-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"임대인"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:s.landlord_name})]})}),s.landlord_phone&&e.jsx("div",{className:"bg-white rounded p-2 border border-purple-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"연락처"}),e.jsx("span",{className:"text-base font-bold text-gray-900",children:s.landlord_phone})]})})]}):e.jsxs("div",{className:"bg-white rounded p-2 border border-purple-200 text-center text-gray-500",children:[e.jsx(ie,{className:"w-4 h-4 mx-auto mb-1 opacity-50"}),e.jsx("div",{className:"text-sm font-medium",children:"정보 없음"})]})}),e.jsxs("div",{className:"space-y-2",children:[s.exit_date?e.jsx("div",{className:"bg-red-100 border border-red-300 rounded p-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-red-800",children:"퇴실예정"}),e.jsx("span",{className:"text-sm font-bold text-red-900",children:new Date(s.exit_date).toLocaleDateString("ko-KR")})]})}):e.jsx("div",{className:"bg-green-100 border border-green-300 rounded p-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-green-800",children:"거주현황"}),e.jsx("span",{className:"text-sm font-bold text-green-900",children:"공실"})]})}),e.jsx("div",{className:"bg-white border border-purple-200 rounded p-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-800",children:"등록일"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:new Date(s.created_at).toLocaleDateString("ko-KR")})]})})]})]})]}),s.description&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 rounded-lg p-4 border border-amber-200",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full mr-2"}),"상세 설명"]}),e.jsx("div",{className:"bg-white p-4 rounded border border-amber-200 max-h-32 overflow-y-auto",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap font-medium",children:s.description})})]})]}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-2",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-1"}),"임대인 & 날짜"]}),e.jsxs("div",{className:"space-y-1",children:[s.landlord_name||s.landlord_phone?e.jsxs("div",{className:"bg-white border border-purple-200 rounded p-2 space-y-1",children:[s.landlord_name&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"임대인"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.landlord_name})]}),s.landlord_phone&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"연락처"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.landlord_phone})]})]}):e.jsxs("div",{className:"bg-white border border-purple-200 rounded p-2 text-center",children:[e.jsx(ie,{className:"w-3 h-3 mx-auto mb-0.5 text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500",children:"정보 없음"})]}),e.jsxs("div",{className:"space-y-1",children:[s.exit_date?e.jsx("div",{className:"bg-red-100 border border-red-300 rounded p-1.5",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-red-800",children:"퇴실예정"}),e.jsx("span",{className:"text-sm font-bold text-red-900",children:new Date(s.exit_date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})})]})}):e.jsx("div",{className:"bg-green-100 border border-green-300 rounded p-1.5",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-green-800",children:"거주현황"}),e.jsx("span",{className:"text-sm font-bold text-green-900",children:"공실"})]})}),e.jsx("div",{className:"bg-white border border-purple-200 rounded p-1.5",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-800",children:"등록일"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:new Date(s.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})})]})})]})]})]}),s.description&&e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 rounded-lg p-2",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mr-1"}),"상세 설명"]}),e.jsx("div",{className:"bg-white p-2 rounded border border-amber-200",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:s.description})})]})]})]})}),e.jsxs("div",{className:"border-t border-gray-200 bg-white lg:bg-gray-50",children:[n&&e.jsx("div",{className:"pb-safe-4"}),!n&&e.jsxs("div",{className:"flex items-center justify-between p-6 bg-gray-50",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all duration-200 border border-gray-300 hover:border-gray-400 font-medium",children:"닫기"}),e.jsxs("button",{onClick:c,className:"px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 font-medium text-sm flex items-center",children:[e.jsx(ms,{className:"w-4 h-4 mr-2"}),"수정하기"]}),e.jsxs("button",{onClick:d,className:"px-5 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-200 font-medium text-sm flex items-center",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"삭제하기"]})]})]})]})]})})},kn=["아파트","오피스텔","원룸","빌라","단독주택","상가","사무실","기타"],En=["매매","전세","월세","단기임대"],Cn=["거래중","거래완료"],Sr=({isOpen:s,onClose:t,onSubmit:r,property:a,loading:l=!1})=>{const[n,i]=m.useState({}),[o,c]=m.useState({}),[d,h]=m.useState(!1);m.useEffect(()=>{a&&s&&(i({title:a.title,type:a.type,transaction_type:a.transaction_type,status:a.status,address:a.address,detailed_address:a.detailed_address||"",area:a.area,floor:a.floor,total_floors:a.total_floors,rooms:a.rooms,bathrooms:a.bathrooms,parking:a.parking,elevator:a.elevator,price:a.price,deposit:a.deposit,monthly_rent:a.monthly_rent,description:a.description||"",landlord_name:a.landlord_name||"",landlord_phone:a.landlord_phone||"",exit_date:a.exit_date||""}),c({}))},[a,s]);const u=m.useCallback((g,N)=>{i(b=>({...b,[g]:N})),o[g]&&c(b=>({...b,[g]:void 0}))},[o]),f=()=>{var N,b;const g={};return(N=n.title)!=null&&N.trim()||(g.title="제목을 입력해주세요"),(b=n.address)!=null&&b.trim()||(g.address="주소를 입력해주세요"),(!n.area||n.area<=0)&&(g.area="면적은 0보다 커야 합니다"),(!n.floor||n.floor<1)&&(g.floor="층수는 1층 이상이어야 합니다"),(!n.total_floors||n.total_floors<(n.floor||1))&&(g.total_floors="전체 층수는 해당 층수보다 크거나 같아야 합니다"),(!n.rooms||n.rooms<1)&&(g.rooms="방 개수는 1개 이상이어야 합니다"),(!n.bathrooms||n.bathrooms<1)&&(g.bathrooms="화장실 개수는 1개 이상이어야 합니다"),n.transaction_type==="매매"&&(!n.price||n.price<=0)&&(g.price="매매가를 입력해주세요"),n.transaction_type==="전세"&&(!n.deposit||n.deposit<=0)&&(g.deposit="전세금을 입력해주세요"),n.transaction_type==="월세"&&((!n.deposit||n.deposit<=0)&&(g.deposit="보증금을 입력해주세요"),(!n.monthly_rent||n.monthly_rent<=0)&&(g.monthly_rent="월세를 입력해주세요")),c(g),Object.keys(g).length===0},j=async g=>{if(g.preventDefault(),!(!f()||d)){h(!0);try{await r(n),alert("✅ 매물이 성공적으로 수정되었습니다!"),t()}catch(N){console.error("매물 수정 실패:",N);const b=N instanceof Error?N.message:"알 수 없는 오류가 발생했습니다.";alert(`❌ 매물 수정 실패: ${b}`)}finally{h(!1)}}};return s?e.jsx(Ee,{isOpen:s,onClose:t,size:"lg",children:e.jsxs(le,{children:[e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ne,{children:"매물 정보 수정"}),e.jsx(U,{variant:"ghost",size:"sm",onClick:t,className:"p-1 h-8 w-8",children:e.jsx(ue,{size:16})})]})}),e.jsx(xe,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"기본 정보"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(A,{label:"매물 제목",value:n.title||"",onChange:g=>u("title",g.target.value),error:o.title,placeholder:"예: 강남구 신사동 럭셔리 아파트",required:!0})}),e.jsx(he,{label:"매물 유형",value:n.type||"",onChange:g=>u("type",g.target.value),options:kn.map(g=>({value:g,label:g})),required:!0}),e.jsx(he,{label:"거래 유형",value:n.transaction_type||"",onChange:g=>u("transaction_type",g.target.value),options:En.map(g=>({value:g,label:g})),required:!0}),e.jsx(he,{label:"매물 상태",value:n.status||"",onChange:g=>u("status",g.target.value),options:Cn.map(g=>({value:g,label:g})),required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"위치 정보"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(A,{label:"주소",value:n.address||"",onChange:g=>u("address",g.target.value),error:o.address,placeholder:"예: 서울시 강남구 신사동 123-45",required:!0})}),e.jsx(A,{label:"상세 주소",value:n.detailed_address||"",onChange:g=>u("detailed_address",g.target.value),placeholder:"예: 123동 456호"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"매물 정보"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(A,{label:"면적 (m²)",type:"number",value:n.area||"",onChange:g=>u("area",parseFloat(g.target.value)||0),error:o.area,placeholder:"85.0",min:"0",step:"0.1",required:!0}),e.jsx(A,{label:"층수",type:"number",value:n.floor||"",onChange:g=>u("floor",parseInt(g.target.value)||1),error:o.floor,placeholder:"15",min:"1",required:!0}),e.jsx(A,{label:"전체 층수",type:"number",value:n.total_floors||"",onChange:g=>u("total_floors",parseInt(g.target.value)||1),error:o.total_floors,placeholder:"25",min:"1",required:!0}),e.jsx(A,{label:"방 개수",type:"number",value:n.rooms||"",onChange:g=>u("rooms",parseInt(g.target.value)||1),error:o.rooms,placeholder:"3",min:"1",required:!0}),e.jsx(A,{label:"화장실 개수",type:"number",value:n.bathrooms||"",onChange:g=>u("bathrooms",parseInt(g.target.value)||1),error:o.bathrooms,placeholder:"2",min:"1",required:!0})]}),e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:n.parking||!1,onChange:g=>u("parking",g.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"주차 가능"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:n.elevator||!1,onChange:g=>u("elevator",g.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"엘리베이터"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"가격 정보"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.transaction_type==="매매"&&e.jsx(A,{label:"매매가 (만원)",type:"number",value:n.price||"",onChange:g=>u("price",parseInt(g.target.value)||void 0),error:o.price,placeholder:"35000",min:"0",required:!0}),(n.transaction_type==="전세"||n.transaction_type==="월세")&&e.jsx(A,{label:n.transaction_type==="전세"?"전세금 (만원)":"보증금 (만원)",type:"number",value:n.deposit||"",onChange:g=>u("deposit",parseInt(g.target.value)||void 0),error:o.deposit,placeholder:"21000",min:"0",required:!0}),n.transaction_type==="월세"&&e.jsx(A,{label:"월세 (만원)",type:"number",value:n.monthly_rent||"",onChange:g=>u("monthly_rent",parseInt(g.target.value)||void 0),error:o.monthly_rent,placeholder:"65",min:"0",required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"임대인 정보"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(A,{label:"임대인 이름",value:n.landlord_name||"",onChange:g=>u("landlord_name",g.target.value),placeholder:"홍길동"}),e.jsx(A,{label:"임대인 연락처",value:n.landlord_phone||"",onChange:g=>u("landlord_phone",g.target.value),placeholder:"010-1234-5678"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"기타 정보"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(A,{label:"퇴실 예정일",type:"date",value:n.exit_date||"",onChange:g=>u("exit_date",g.target.value)})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"매물 설명"}),e.jsx("textarea",{value:n.description||"",onChange:g=>u("description",g.target.value),placeholder:"매물에 대한 상세한 설명을 입력해주세요",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(U,{type:"button",variant:"outline",onClick:t,disabled:l,children:"취소"}),e.jsx(U,{type:"submit",variant:"primary",loading:l||d,leftIcon:e.jsx(is,{size:16}),children:"수정 완료"})]})]})})]})}):null},Pn=async s=>{const{data:t,error:r}=await E.functions.invoke("send-team-invitation",{body:s});if(r)throw F.error("Email sending failed",{error:r instanceof Error?r.message:"Unknown error",component:"teamService",action:"sendInvitationEmail"}),r;return t},kr=async s=>{try{const{data:t,error:r}=await E.from("user_profiles").select("tenant_id").eq("id",s).single();if(r)throw r;const{data:a,error:l}=await E.from("user_profiles").select(`
        id,
        tenant_id,
        name,
        email,
        phone,
        role,
        status,
        joined_at,
        invited_by,
        company
      `).eq("tenant_id",t.tenant_id).order("joined_at",{ascending:!1});if(l)throw l;return a||[]}catch(t){throw F.error("Failed to fetch team members",{error:t instanceof Error?t.message:"Unknown error",component:"teamService",action:"getTeamMembers"}),t}},Rn=async s=>{try{const{data:t,error:r}=await E.from("user_profiles").select("tenant_id").eq("id",s).single();if(r)throw r;const{data:a,error:l}=await E.from("team_invitations").select(`
        id,
        tenant_id,
        inviter_id,
        email,
        role,
        status,
        invitation_token,
        expires_at,
        created_at
      `).eq("tenant_id",t.tenant_id).order("created_at",{ascending:!1});if(l)throw l;if(a&&a.length>0){const n=[...new Set(a.map(c=>c.inviter_id))],{data:i}=await E.from("user_profiles").select("id, name").in("id",n),o=(i==null?void 0:i.reduce((c,d)=>(c[d.id]=d.name,c),{}))||{};return a.map(c=>({...c,inviter_name:o[c.inviter_id]||"알 수 없는 사용자"}))}return[]}catch(t){throw F.error("Failed to fetch team invitations",{error:t instanceof Error?t.message:"Unknown error",component:"teamService",action:"getTeamInvitations"}),t}},In=async(s,t)=>{var r;try{const{data:a,error:l}=await E.from("user_profiles").select(`
        tenant_id, 
        role, 
        name,
        tenant:tenant_id(name)
      `).eq("id",s).single();if(l)throw l;if(a.role!=="owner"&&a.role!=="admin")throw new Error("팀원을 초대할 권한이 없습니다.");const{data:n}=await E.from("user_profiles").select("id").eq("tenant_id",a.tenant_id).eq("email",t.email).single();if(n)throw new Error("이미 팀에 속한 회원입니다.");const{data:i}=await E.from("team_invitations").select("id, status").eq("tenant_id",a.tenant_id).eq("email",t.email).eq("status","pending").single();if(i)throw new Error("이미 초대된 이메일입니다.");const{data:o,error:c}=await E.from("team_invitations").insert({tenant_id:a.tenant_id,inviter_id:s,email:t.email,role:t.role}).select().single();if(c)throw c;try{await Pn({invitationToken:o.invitation_token,recipientEmail:t.email,inviterName:a.name,teamName:(a&&"tenant"in a&&a.tenant?(r=a.tenant)==null?void 0:r.name:null)||"팀",role:t.role,message:t.message})}catch(d){F.warn("Email sending failed but invitation created",{error:d instanceof Error?d.message:"Unknown error",component:"teamService",action:"inviteTeamMember"})}return await E.from("team_activity_logs").insert({tenant_id:a.tenant_id,user_id:s,action:"invitation_sent",details:{invited_email:t.email,role:t.role,message:t.message}}),{...o,inviteUrl:`${typeof window<"u"?window.location.origin:"https://summi3-2mk8sy7pu-daesung75-6440s-projects.vercel.app"}/team/invite?token=${o.invitation_token}`}}catch(a){throw F.error("Failed to invite team member",{error:a instanceof Error?a.message:"Unknown error",component:"teamService",action:"inviteTeamMember"}),a}},Tn=async(s,t)=>{try{const{data:r,error:a}=await E.from("user_profiles").select("tenant_id, role").eq("id",s).single();if(a)throw a;if(r.role!=="owner"&&r.role!=="admin")throw new Error("팀원을 추가할 권한이 없습니다.");const{data:l,error:n}=await E.from("user_profiles").select("id, name, email, tenant_id").eq("id",t.user_id).single();if(n)throw new Error("존재하지 않는 사용자입니다.");if(l.tenant_id===r.tenant_id)throw new Error("이미 팀에 속한 회원입니다.");const{data:i,error:o}=await E.from("user_profiles").update({tenant_id:r.tenant_id,role:t.role,invited_by:s,joined_at:new Date().toISOString()}).eq("id",t.user_id).select().single();if(o)throw o;return await E.from("team_activity_logs").insert({tenant_id:r.tenant_id,user_id:s,action:"member_added",details:{added_user_id:t.user_id,added_user_name:l.name,role:t.role,previous_tenant_id:l.tenant_id,transferred_from_team:!!l.tenant_id}}),i}catch(r){throw F.error("Failed to add team member",{error:r instanceof Error?r.message:"Unknown error",component:"teamService",action:"addTeamMember"}),r}},Mn=async(s,t,r)=>{try{const{data:a,error:l}=await E.from("user_profiles").select("tenant_id, role").eq("id",s).single();if(l)throw l;if(a.role!=="owner"&&!(a.role==="admin"&&["member","viewer"].includes(r)))throw new Error("역할을 변경할 권한이 없습니다.");if(s===t)throw new Error("자신의 역할은 변경할 수 없습니다.");const{data:n,error:i}=await E.from("user_profiles").update({role:r}).eq("id",t).eq("tenant_id",a.tenant_id).select().single();if(i)throw i;return await E.from("team_activity_logs").insert({tenant_id:a.tenant_id,user_id:s,action:"role_changed",details:{target_user_id:t,new_role:r}}),n}catch(a){throw F.error("Failed to change member role",{error:a instanceof Error?a.message:"Unknown error",component:"teamService",action:"changeMemberRole"}),a}},On=async(s,t)=>{try{const{data:r,error:a}=await E.from("user_profiles").select("tenant_id, role").eq("id",s).single();if(a)throw a;if(r.role!=="owner"&&r.role!=="admin")throw new Error("팀원을 제거할 권한이 없습니다.");if(s===t)throw new Error("자신을 팀에서 제거할 수 없습니다.");const{data:l,error:n}=await E.from("user_profiles").select("name, role").eq("id",t).eq("tenant_id",r.tenant_id).single();if(n)throw new Error("팀에서 해당 멤버를 찾을 수 없습니다.");if(l.role==="owner")throw new Error("팀 소유자는 제거할 수 없습니다.");const{data:i,error:o}=await E.from("tenants").insert({name:`${l.name}의 부동산`}).select().single();if(o)throw o;const{error:c}=await E.from("user_profiles").update({tenant_id:i.id,role:"owner",invited_by:null}).eq("id",t);if(c)throw c;return await E.from("team_activity_logs").insert({tenant_id:r.tenant_id,user_id:s,action:"member_removed",details:{removed_user_id:t,removed_user_name:l.name}}),!0}catch(r){throw F.error("Failed to remove team member",{error:r instanceof Error?r.message:"Unknown error",component:"teamService",action:"removeTeamMember"}),r}},Dn=async(s,t)=>{try{const{data:r,error:a}=await E.from("user_profiles").select("tenant_id, role").eq("id",s).single();if(a)throw a;if(r.role!=="owner"&&r.role!=="admin")throw new Error("초대를 취소할 권한이 없습니다.");const{error:l}=await E.from("team_invitations").delete().eq("id",t).eq("tenant_id",r.tenant_id);if(l)throw l;return!0}catch(r){throw F.error("Failed to cancel invitation",{error:r instanceof Error?r.message:"Unknown error",component:"teamService",action:"cancelInvitation"}),r}},Ln=async(s,t)=>{try{const{data:r,error:a}=await E.from("user_profiles").select("tenant_id").eq("id",t).single();if(a)throw a;const{data:l,error:n}=await E.from("user_profiles").select("id, name, email, company").or(`name.ilike.%${s}%,email.ilike.%${s}%`).or(`tenant_id.is.null,tenant_id.neq.${r.tenant_id}`).neq("id",t).limit(10);if(n)throw n;return l||[]}catch(r){throw F.error("Failed to search users",{error:r instanceof Error?r.message:"Unknown error",component:"teamService",action:"searchUsers"}),r}},zn=async(s,t,r)=>{try{const{data:a,error:l}=await E.from("user_profiles").select("tenant_id, role").eq("id",s).single();if(l)throw l;if(s!==t&&a.role!=="owner"&&a.role!=="admin")throw new Error("팀원 정보를 수정할 권한이 없습니다.");const{data:n,error:i}=await E.from("user_profiles").update(r).eq("id",t).eq("tenant_id",a.tenant_id).select().single();if(i)throw i;return s!==t&&await E.from("team_activity_logs").insert({tenant_id:a.tenant_id,user_id:s,action:"member_info_updated",details:{target_user_id:t,updated_fields:Object.keys(r)}}),n}catch(a){throw F.error("Failed to update member info",{error:a instanceof Error?a.message:"Unknown error",component:"teamService",action:"updateMemberInfo"}),a}},$n=async(s,t,r)=>{try{const{data:a,error:l}=await E.from("user_profiles").select("tenant_id, role").eq("id",s).single();if(l)throw l;if(a.role!=="owner"&&a.role!=="admin")throw new Error("팀원 상태를 변경할 권한이 없습니다.");if(s===t)throw new Error("자신의 상태는 변경할 수 없습니다.");const{data:n,error:i}=await E.from("user_profiles").update({status:r}).eq("id",t).eq("tenant_id",a.tenant_id).select().single();if(i)throw i;return await E.from("team_activity_logs").insert({tenant_id:a.tenant_id,user_id:s,action:"member_status_changed",details:{target_user_id:t,new_status:r}}),n}catch(a){throw F.error("Failed to change member status",{error:a instanceof Error?a.message:"Unknown error",component:"teamService",action:"changeMemberStatus"}),a}},An=async(s,t=50)=>{try{const{data:r,error:a}=await E.from("user_profiles").select("tenant_id, role").eq("id",s).single();if(a)throw a;if(r.role!=="owner"&&r.role!=="admin")throw new Error("활동 로그를 조회할 권한이 없습니다.");const{data:l,error:n}=await E.from("team_activity_logs").select(`
        id,
        action,
        details,
        created_at,
        user_id
      `).eq("tenant_id",r.tenant_id).order("created_at",{ascending:!1}).limit(t);if(n)throw n;if(l&&l.length>0){const i=[...new Set(l.map(d=>d.user_id))],{data:o}=await E.from("user_profiles").select("id, name").in("id",i),c=(o==null?void 0:o.reduce((d,h)=>(d[h.id]=h.name,d),{}))||{};return l.map(d=>({...d,user_name:c[d.user_id]||"알 수 없는 사용자"}))}return[]}catch(r){throw F.error("Failed to fetch team activity logs",{error:r instanceof Error?r.message:"Unknown error",component:"teamService",action:"getTeamActivityLogs"}),r}},Er=()=>{const s=gs(),{tenant:t}=es(),{user:r}=oe(),{stats:a,loading:l,error:n}=Nn(),{properties:i,loading:o,updateProperty:c,deleteProperty:d,refreshProperties:h}=ps(),[u,f]=m.useState(1),[j,g]=m.useState(!0),[N,b]=m.useState([]),[x,p]=m.useState([]),[v,y]=m.useState(!0),[k,L]=m.useState(null),[z,R]=m.useState(!1),[q,$]=m.useState(!1),[te,ee]=m.useState(!1),[G,Y]=m.useState(null);m.useEffect(()=>{(async()=>{if(r!=null&&r.id)try{g(!0);const D=await kr(r.id);f(D.length)}catch(D){console.error("팀원 수 조회 실패:",D),f(1)}finally{g(!1)}})()},[r==null?void 0:r.id]),m.useEffect(()=>{(async()=>{if(r!=null&&r.id)try{y(!0);const D=r.id,[Z,J]=await Promise.all([Xe.getTodaySchedules(D,3),Xe.getUpcomingSchedules(D,3)]);b(Z),p(J)}catch(D){console.error("일정 조회 실패:",D),b([]),p([])}finally{y(!1)}})()},[r==null?void 0:r.id]);const O=()=>{s("/schedule")},_=C=>{L(C),R(!0)},P=()=>{R(!1),L(null)},w=async C=>{if(G)try{ee(!0),await c(G.id,C),$(!1),Y(null),await h(),alert("✅ 매물이 성공적으로 수정되었습니다!")}catch(D){console.error("매물 수정 실패:",D);const Z=D instanceof Error?D.message:"알 수 없는 오류가 발생했습니다.";throw alert(`❌ 매물 수정 실패: ${Z}`),D}finally{ee(!1)}},B=C=>{console.log("📝 대시보드에서 수정 폼 열기:",C.title),Y(C),$(!0),R(!1)},H=async C=>{if(console.log("🗑️ 대시보드에서 삭제 요청:",C.title),window.confirm(`'${C.title}' 매물을 정말 삭제하시겠습니까?

이 작업은 되돌릴 수 없습니다.`))try{await d(C.id),R(!1),L(null),await h(),alert("✅ 매물이 성공적으로 삭제되었습니다!")}catch(Z){console.error("매물 삭제 실패:",Z);const J=Z instanceof Error?Z.message:"알 수 없는 오류가 발생했습니다.";alert(`❌ 매물 삭제 실패: ${J}`)}},K=[{title:"총 매물",value:((a==null?void 0:a.total)??0).toString(),change:"+12%",icon:Ie,color:"text-blue-600"},{title:"활성 매물",value:((a==null?void 0:a.active)??0).toString(),change:"+5%",icon:ws,color:"text-green-600"},{title:"팀원",value:u.toString(),change:u>1?`+${u-1}`:"0",icon:ke,color:"text-purple-600"},{title:"이번 달 등록",value:((a==null?void 0:a.this_month)??0).toString(),change:"+18%",icon:je,color:"text-orange-600"}],se=[{id:1,title:"강남구 신사동 럭셔리 아파트",type:"아파트",transactionType:"매매",price:"35억",createdAt:"2시간 전"},{id:2,title:"성남시 분당구 정자동",type:"아파트",transactionType:"전세",price:"2억 1천만원",createdAt:"5시간 전"},{id:3,title:"홍대 신축 오피스텔",type:"오피스텔",transactionType:"월세",price:"1000/65만원",createdAt:"1일 전"}];return o||l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-20 sm:pb-6",children:[e.jsxs("div",{className:"px-1 sm:px-0",children:[e.jsxs("h1",{className:"text-lg sm:text-2xl font-bold leading-tight",children:["안녕하세요, ",(r==null?void 0:r.name)||"사용자","님! 👋"]}),e.jsx("h2",{className:"text-sm sm:text-base text-gray-600 mt-1 lg:hidden",children:(t==null?void 0:t.name)||"리체 매물장"}),e.jsxs("h2",{className:"hidden lg:block text-2xl font-bold mt-1",children:[(t==null?void 0:t.name)||"리체 매물장","에 오신 것을 환영합니다 👋"]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"오늘의 매물 현황을 확인해보세요"})]}),l?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[1,2,3,4].map(C=>e.jsx(le,{className:"animate-pulse",children:e.jsx(xe,{className:"p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-6 sm:h-8 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3 hidden sm:block"})]})})},C))}):n?e.jsx(le,{className:"p-4 sm:p-6",children:e.jsx("p",{className:"text-red-600 text-center text-sm sm:text-base",children:n})}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:K.map((C,D)=>e.jsx(wn,{title:C.title,value:C.value,change:C.change,icon:C.icon,color:C.color,loading:C.title==="팀원"?j:l},D))}),e.jsx("div",{className:"space-y-4 lg:space-y-6",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[e.jsx(je,{className:"w-5 h-5 mr-2 text-blue-600"}),"일정 관리"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6",children:[e.jsx(Dt,{title:"오늘 일정",schedules:N,loading:v,emptyMessage:"오늘 등록된 일정이 없습니다.",onViewAll:O}),e.jsx(Dt,{title:"다가올 일정",schedules:x,loading:v,emptyMessage:"예정된 일정이 없습니다.",onViewAll:O})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"최근 등록 매물"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(i==null?void 0:i.slice(0,4).map(C=>e.jsx(wr,{property:C,onClick:_},C.id)))||se.map(C=>e.jsxs("div",{className:"card bg-white rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-md transition-all duration-200 cursor-pointer p-4 space-y-3",onClick:()=>{},children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:C.title}),e.jsx("div",{className:"flex items-center text-gray-600",children:e.jsx("span",{className:"text-sm",children:"강남구"})}),e.jsx("div",{className:"flex items-center text-gray-900",children:e.jsx("span",{className:"font-bold text-lg",children:C.price})}),e.jsxs("div",{className:"border-t border-gray-100 pt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:C.type}),e.jsx("span",{className:"text-gray-300",children:"•"}),e.jsx("span",{className:"text-xs text-gray-500",children:C.transactionType})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-2 bg-blue-400"}),e.jsx("span",{className:"text-xs font-medium text-blue-600",children:"등록됨"})]})]})]},C.id))})]})}),t&&e.jsx(le,{className:"bg-gradient-to-r from-primary-50 to-blue-50 border-primary-200",children:e.jsx(xe,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[t.plan?t.plan.charAt(0).toUpperCase()+t.plan.slice(1):"기본"," ","플랜"]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["매물 ",t.limits.max_properties,"개 · 팀원"," ",t.limits.max_users,"명 · 스토리지"," ",t.limits.max_storage_gb,"GB"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(Se,{variant:"tenant",size:"lg",children:t.status==="trial"?"체험 중":"활성"}),t.trial_ends_at&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["체험 종료:"," ",new Date(t.trial_ends_at).toLocaleDateString()]})]})]})})}),e.jsx(_r,{property:k,isOpen:z,onClose:P,onEdit:B,onDelete:H}),G&&e.jsx(Sr,{isOpen:q,onClose:()=>{$(!1),Y(null)},onSubmit:w,property:G,loading:te})]})},Un=["아파트","오피스텔","원룸","빌라","단독주택","상가","사무실","기타"],Fn=["매매","전세","월세","단기임대"],qn=["거래중","거래완료"],Vn=[{value:"1",label:"1개"},{value:"2",label:"2개"},{value:"3",label:"3개"},{value:"4",label:"4개"},{value:"5",label:"5개"},{value:"6",label:"6개"},{value:"7",label:"7개"}],Bn=({isOpen:s,onClose:t,onSubmit:r,loading:a=!1})=>{var b;const[l,n]=m.useState({title:"",type:"아파트",transaction_type:"매매",status:"거래중",address:"",area:0,floor:1,total_floors:1,rooms:1,bathrooms:1,parking:!1,elevator:!1}),[i,o]=m.useState({}),[c,d]=m.useState(!1),h=m.useCallback((x,p)=>{n(v=>({...v,[x]:p})),i[x]&&o(v=>({...v,[x]:void 0}))},[i]),u=m.useMemo(()=>Un.map(x=>({value:x,label:x})),[]),f=m.useMemo(()=>Fn.map(x=>({value:x,label:x})),[]),j=m.useMemo(()=>qn.map(x=>({value:x,label:x})),[]),g=()=>{var p,v;const x={};return(p=l.title)!=null&&p.trim()||(x.title="제목을 입력해주세요"),(v=l.address)!=null&&v.trim()||(x.address="주소를 입력해주세요"),l.transaction_type==="매매"&&(!l.price||l.price<=0)&&(x.price="매매가를 입력해주세요"),l.transaction_type==="전세"&&(!l.deposit||l.deposit<=0)&&(x.deposit="전세금을 입력해주세요"),l.transaction_type==="월세"&&((!l.deposit||l.deposit<=0)&&(x.deposit="보증금을 입력해주세요"),(!l.monthly_rent||l.monthly_rent<=0)&&(x.monthly_rent="월세를 입력해주세요")),l.total_floors&&l.floor&&l.total_floors<l.floor&&(x.total_floors="전체 층수는 해당 층수보다 크거나 같아야 합니다"),(!l.area||l.area<=0)&&(x.area="면적을 입력해주세요"),o(x),Object.keys(x).length===0},N=async x=>{x.preventDefault(),console.log("🚀 매물 등록 폼 제출 시작"),console.log("📋 폼 데이터:",l),console.log("✅ 폼 유효성 검사 시작...");const p=g();if(console.log("📊 폼 유효성 검사 결과:",p),console.log("❌ 에러 목록:",i),!p){console.log("❌ 폼 유효성 검사 실패 - 제출 중단");return}if(c){console.log("⏳ 이미 제출 중 - 중복 제출 방지");return}console.log("🔄 매물 등록 요청 시작..."),d(!0);try{console.log("📡 onSubmit 함수 호출 중..."),await r(l),console.log("✅ 매물 등록 성공!"),console.log("🧹 폼 초기화 중..."),n({title:"",type:"아파트",transaction_type:"매매",status:"거래중",address:"",area:0,floor:1,total_floors:1,rooms:1,bathrooms:1,parking:!1,elevator:!1}),o({}),console.log("🚪 폼 닫기..."),t()}catch(v){console.error("💥 매물 등록 실패:",v),console.error("💥 에러 타입:",typeof v),console.error("💥 에러 상세:",v instanceof Error?{name:v.name,message:v.message,stack:v.stack}:v),alert(`매물 등록에 실패했습니다: ${v instanceof Error?v.message:"알 수 없는 오류"}`)}finally{console.log("🏁 매물 등록 프로세스 완료"),d(!1)}};return s?e.jsx(Ee,{isOpen:s,onClose:t,size:"xl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden max-h-[95vh] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-4 sm:px-6 py-3 sm:py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-white/20 rounded-lg flex-shrink-0",children:e.jsx(Ie,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"새 매물 등록"}),e.jsx("p",{className:"text-blue-100 text-xs sm:text-sm hidden sm:block",children:"매물 정보를 입력해주세요"})]})]}),e.jsx(U,{variant:"ghost",size:"sm",onClick:t,className:"text-white hover:bg-white/20 active:scale-95 p-2 h-8 w-8 sm:h-10 sm:w-10 rounded-lg flex-shrink-0 ml-2",children:e.jsx(ue,{size:18,className:"sm:w-5 sm:h-5"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("form",{onSubmit:N,className:"p-3 sm:p-4",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 sm:p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-blue-600 rounded-md",children:e.jsx(Me,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"기본 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"매물의 기본적인 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx(A,{label:"매물 제목",value:l.title,onChange:x=>h("title",x.target.value),error:i.title,placeholder:"예: 강남구 신사동 럭셔리 아파트",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-3 sm:gap-3",children:[e.jsx(he,{label:"매물 유형",value:l.type,onChange:x=>h("type",x.target.value),options:u,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(he,{label:"거래 유형",value:l.transaction_type,onChange:x=>h("transaction_type",x.target.value),options:f,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(he,{label:"매물 상태",value:l.status,onChange:x=>h("status",x.target.value),options:j,className:"text-sm sm:text-base h-11 sm:h-12"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-3 sm:p-4 border border-green-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-green-600 rounded-md",children:e.jsx(be,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"위치 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"매물의 정확한 위치를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx(A,{label:"주소",value:l.address,onChange:x=>h("address",x.target.value),error:i.address,placeholder:"예: 서울시 강남구 신사동 123-45",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})}),e.jsx("div",{children:e.jsx(A,{label:"상세 주소",value:l.detailed_address||"",onChange:x=>h("detailed_address",x.target.value),placeholder:"예: 123동 456호",className:"text-sm sm:text-base h-11 sm:h-12"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg p-3 sm:p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-purple-600 rounded-md",children:e.jsx(Ie,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"매물 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"매물의 상세 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 md:grid-cols-3 sm:gap-3",children:[e.jsx(A,{label:"면적 (m²)",type:"number",value:l.area||"",onChange:x=>h("area",parseFloat(x.target.value)||0),error:i.area,placeholder:"85.0",min:"0",step:"0.1",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(A,{label:"층수",type:"number",value:l.floor||"",onChange:x=>h("floor",parseInt(x.target.value)||1),error:i.floor,placeholder:"15",min:"1",className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(A,{label:"전체 층수",type:"number",value:l.total_floors||"",onChange:x=>h("total_floors",parseInt(x.target.value)||1),error:i.total_floors,placeholder:"25",min:"1",className:"text-sm sm:text-base h-11 sm:h-12 sm:col-span-2 md:col-span-1"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(he,{label:"방 개수",value:((b=l.rooms)==null?void 0:b.toString())||"1",onChange:x=>h("rooms",parseInt(x.target.value)||1),error:i.rooms,options:Vn,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(A,{label:"화장실 개수",type:"number",value:l.bathrooms||"",onChange:x=>h("bathrooms",parseInt(x.target.value)||1),error:i.bathrooms,placeholder:"2",min:"1",className:"text-sm sm:text-base h-11 sm:h-12"})]}),e.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-purple-200",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2",children:"편의시설"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:flex sm:flex-wrap sm:gap-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 bg-white rounded-md px-2 sm:px-3 py-2 border border-gray-200 hover:border-purple-300 active:scale-95 transition-all cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.parking,onChange:x=>h("parking",x.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 w-4 h-4 sm:w-3 sm:h-3"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"🚗 주차"})]}),e.jsxs("label",{className:"flex items-center space-x-2 bg-white rounded-md px-2 sm:px-3 py-2 border border-gray-200 hover:border-purple-300 active:scale-95 transition-all cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.elevator,onChange:x=>h("elevator",x.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 w-4 h-4 sm:w-3 sm:h-3"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"🏢 엘리베이터"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-3 sm:p-4 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-orange-600 rounded-md",children:e.jsx(qt,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"가격 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"거래 유형에 맞는 가격을 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-1 md:grid-cols-3 sm:gap-3",children:[l.transaction_type==="매매"&&e.jsx(A,{label:"매매가 (만원)",type:"number",value:l.price||"",onChange:x=>h("price",parseInt(x.target.value)||void 0),error:i.price,placeholder:"35000",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),(l.transaction_type==="전세"||l.transaction_type==="월세")&&e.jsx(A,{label:l.transaction_type==="전세"?"전세금 (만원)":"보증금 (만원)",type:"number",value:l.deposit||"",onChange:x=>h("deposit",parseInt(x.target.value)||void 0),error:i.deposit,placeholder:"21000",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),l.transaction_type==="월세"&&e.jsx(A,{label:"월세 (만원)",type:"number",value:l.monthly_rent||"",onChange:x=>h("monthly_rent",parseInt(x.target.value)||void 0),error:i.monthly_rent,placeholder:"65",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 rounded-lg p-3 sm:p-4 border border-rose-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-rose-600 rounded-md",children:e.jsx(ie,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"임대인 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"임대인의 연락처 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(A,{label:"임대인 이름",value:l.landlord_name||"",onChange:x=>h("landlord_name",x.target.value),placeholder:"홍길동",className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(A,{label:"임대인 연락처",value:l.landlord_phone||"",onChange:x=>h("landlord_phone",x.target.value),placeholder:"010-1234-5678",className:"text-sm sm:text-base h-11 sm:h-12"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-3 sm:p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-gray-600 rounded-md",children:e.jsx(Es,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"기타 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"추가적인 매물 정보를 입력해주세요"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"매물 설명"}),e.jsx("textarea",{value:l.description||"",onChange:x=>h("description",x.target.value),placeholder:`매물에 대한 상세한 설명을 입력해주세요
예: 남향, 풀옵션, 교통 편리, 학군 좋음 등`,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-xs sm:text-sm resize-none transition-colors"})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end space-y-reverse space-y-3 sm:space-y-0 sm:space-x-3 pt-4 border-t border-gray-200 mt-4",children:[e.jsx(U,{type:"button",variant:"outline",onClick:t,disabled:a,className:"w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2 text-sm sm:text-base active:scale-95",children:"취소"}),e.jsx(U,{type:"submit",variant:"primary",loading:a,leftIcon:e.jsx(is,{size:16}),className:"w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2 text-sm sm:text-base bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 active:scale-95",children:"매물 등록"})]})]})})})]})}):null},Cr=()=>{const{user:s}=oe(),{tenant:t}=es(),[r,a]=ar(),[l,n]=m.useState(""),[i,o]=m.useState(""),[c,d]=m.useState(!1),[h,u]=m.useState("전체"),[f,j]=m.useState("전체"),[g,N]=m.useState("전체"),[b,x]=m.useState("card"),[p,v]=m.useState(!1),[y,k]=m.useState(null),[L,z]=m.useState(!1),[R,q]=m.useState(!1),[$,te]=m.useState(!1),[ee,G]=m.useState(!1),[Y,O]=m.useState(null),[_,P]=m.useState(null);m.useEffect(()=>{if(c)return;const I=setTimeout(()=>{o(l)},300);return()=>clearTimeout(I)},[l,c]),m.useEffect(()=>{if(r.get("create")==="true"){z(!0);const I=new URLSearchParams(r);I.delete("create"),a(I,{replace:!0})}},[r,a]);const w=m.useMemo(()=>{const I={};return i&&(I.search=i),h!=="전체"&&(I.transaction_type=h),f!=="전체"&&(I.property_type=f),g!=="전체"&&(I.property_status=g),I},[i,h,f,g]),{properties:B,loading:H,error:K,refreshProperties:se,createProperty:C,updateProperty:D,deleteProperty:Z}=ps(w),J=m.useMemo(()=>B?[...B].sort((I,Q)=>I.status==="거래완료"&&Q.status!=="거래완료"?1:I.status!=="거래완료"&&Q.status==="거래완료"?-1:I.created_at&&Q.created_at?new Date(Q.created_at).getTime()-new Date(I.created_at).getTime():0):[],[B]),W=[{value:"전체",label:"전체"},{value:"매매",label:"매매"},{value:"전세",label:"전세"},{value:"월세",label:"월세"}],ce=[{value:"전체",label:"전체"},{value:"아파트",label:"아파트"},{value:"오피스텔",label:"오피스텔"},{value:"원룸",label:"원룸"},{value:"빌라",label:"빌라"}],we=[{value:"전체",label:"전체"},{value:"거래중",label:"거래중"},{value:"거래완료",label:"거래완료"}],fe=()=>{const I=[];return h!=="전체"&&I.push(h),f!=="전체"&&I.push(f),g!=="전체"&&I.push(g),I.length===0?"매물명, 주소로 검색하세요...":`${I.join(" · ")} 매물 검색...`},de=()=>{const I=[];return h!=="전체"&&I.push(`거래: ${h}`),f!=="전체"&&I.push(`유형: ${f}`),g!=="전체"&&I.push(`상태: ${g}`),I},ye=async()=>{if(y)try{await Z(y.id),v(!1),k(null)}catch(I){console.error("Delete failed:",I)}},rs=()=>{n(""),u("전체"),j("전체"),N("전체")},Os=async I=>{console.log("🏠 PropertiesPageNew.handleCreateProperty 시작"),console.log("📊 받은 데이터:",I),console.log("👤 현재 사용자:",{user:s==null?void 0:s.id,tenant:t==null?void 0:t.id});try{console.log("⏳ 로딩 상태 설정..."),q(!0),console.log("📞 createProperty 훅 호출 중...");const Q=await C(I);console.log("✅ createProperty 성공:",Q),console.log("🔄 매물 목록 새로고침...")}catch(Q){throw console.error("❌ PropertiesPageNew.handleCreateProperty 실패:",Q),console.error("❌ 에러 타입:",typeof Q),console.error("❌ 에러 상세:",Q instanceof Error?{name:Q.name,message:Q.message,stack:Q.stack}:Q),Q}finally{console.log("🏁 PropertiesPageNew.handleCreateProperty 완료"),q(!1)}},Ds=async I=>{if(Y)try{G(!0),await D(Y.id,I),te(!1),O(null)}catch(Q){throw console.error("매물 수정 실패:",Q),Q}finally{G(!1)}},Ls=I=>{console.log("📝 수정 폼 열기 요청:",I.title);try{O(I),te(!0),P(null),console.log("✅ 수정 폼 상태 설정 완료")}catch(Q){console.error("❌ 수정 폼 열기 실패:",Q),alert("수정 폼을 열 수 없습니다. 다시 시도해주세요.")}},zs=I=>{console.log("🗑️ 삭제 확인 요청:",I.title);try{window.confirm(`'${I.title}' 매물을 정말 삭제하시겠습니까?

이 작업은 되돌릴 수 없습니다.`)?(k(I),v(!0),P(null),console.log("✅ 삭제 확인 상태 설정 완료")):console.log("❌ 사용자가 삭제를 취소했습니다")}catch(Q){console.error("❌ 삭제 확인 실패:",Q),alert("삭제 확인 중 오류가 발생했습니다. 다시 시도해주세요.")}};return H?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx(Ae,{size:"lg",text:"매물을 불러오는 중..."})}):K?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 mb-4",children:K}),e.jsx(U,{onClick:se,children:"다시 시도"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-3 sm:p-6 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[e.jsx("div",{className:"p-1.5 bg-blue-600 rounded-lg",children:e.jsx(Me,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("h1",{className:"text-base sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"매물 관리"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-sm sm:text-lg font-bold text-blue-600",children:J.length}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"개"})]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-blue-700 font-medium truncate",children:t==null?void 0:t.name})]})]}),e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center justify-center w-9 h-9 sm:w-auto sm:h-auto sm:px-4 sm:py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-md active:scale-95",children:[e.jsx(ds,{size:16,className:"sm:w-5 sm:h-5 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"새 매물 등록"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-6",children:[e.jsx("div",{className:"p-1 bg-gray-100 rounded",children:e.jsx(os,{className:"w-3 h-3 sm:w-5 sm:h-5 text-gray-600"})}),e.jsx("h2",{className:"text-sm sm:text-lg font-semibold text-gray-900",children:"검색 & 필터"}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"원하는 매물을 빠르게 찾아보세요"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(A,{placeholder:fe(),value:l,onChange:I=>n(I.target.value),onCompositionStart:()=>d(!0),onCompositionEnd:()=>d(!1),leftIcon:e.jsx(os,{size:16}),className:"text-sm h-10 sm:h-14 text-gray-700 bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),de().length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 flex flex-wrap gap-1 z-10",children:de().map((I,Q)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded font-medium",children:I},Q))})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 md:grid-cols-3 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"거래유형"}),e.jsx(he,{options:W,value:h,onChange:I=>u(I.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"매물유형"}),e.jsx(he,{options:ce,value:f,onChange:I=>j(I.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"매물상태"}),e.jsx(he,{options:we,value:g,onChange:I=>N(I.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 mr-2 sm:text-sm",children:"보기:"}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-0.5",children:[e.jsxs("button",{onClick:()=>x("card"),className:`flex items-center justify-center px-2 py-1.5 rounded transition-all duration-200 text-xs font-medium ${b==="card"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Cs,{size:12,className:"mr-1"}),"카드"]}),e.jsxs("button",{onClick:()=>x("list"),className:`flex items-center justify-center px-2 py-1.5 rounded transition-all duration-200 text-xs font-medium ${b==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Vt,{size:12,className:"mr-1"}),"리스트"]})]})]}),e.jsx(U,{variant:"outline",onClick:rs,size:"sm",leftIcon:e.jsx(Me,{size:12}),className:"text-xs font-medium px-3 py-1.5 bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200",children:"초기화"})]})]})]})]})}),J.length===0?e.jsxs(le,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(os,{size:48,className:"mx-auto"})}),e.jsx("p",{className:"text-gray-500",children:"검색 조건에 맞는 매물이 없습니다."})]}):b==="card"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:J.map(I=>e.jsx(wr,{property:I,onClick:()=>P(I)},I.id))}):e.jsx(Wn,{properties:J,onView:I=>P(I)}),e.jsx(Bn,{isOpen:L,onClose:()=>z(!1),onSubmit:Os,loading:R}),_&&e.jsx(_r,{property:_,isOpen:!0,onClose:()=>{console.log("🔒 상세 모달 닫기"),P(null)},onEdit:I=>{console.log("🔧 모달에서 수정 요청 받음:",I.title),Ls(I)},onDelete:I=>{console.log("🔧 모달에서 삭제 요청 받음:",I.title),zs(I)}}),Y&&e.jsx(Sr,{isOpen:$,onClose:()=>{te(!1),O(null)},onSubmit:Ds,property:Y,loading:ee}),e.jsx(Ee,{isOpen:p,onClose:()=>v(!1),title:"매물 삭제",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["'",y==null?void 0:y.title,"' 매물을 삭제하시겠습니까?",e.jsx("br",{}),"이 작업은 되돌릴 수 없습니다."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(U,{variant:"outline",onClick:()=>v(!1),children:"취소"}),e.jsx(U,{variant:"destructive",onClick:ye,children:"삭제"})]})]})})]})},Wn=({properties:s,onView:t})=>e.jsxs(le,{children:[e.jsx("div",{className:"hidden lg:block bg-gray-50 border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-gray-700",children:[e.jsx("div",{className:"col-span-1",children:"거래유형"}),e.jsx("div",{className:"col-span-3",children:"매물정보"}),e.jsx("div",{className:"col-span-3",children:"가격정보"}),e.jsx("div",{className:"col-span-2",children:"임대인정보"}),e.jsx("div",{className:"col-span-1",children:"퇴실예정일"}),e.jsx("div",{className:"col-span-2",children:"추가정보"})]})}),e.jsx("div",{children:s.map(r=>e.jsxs("div",{className:"border-b border-gray-100 hover:bg-blue-50 transition-colors cursor-pointer touch-target relative",onClick:()=>t(r),children:[r.status==="거래완료"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:e.jsx("div",{className:"w-full h-0.5 bg-red-500 opacity-60"})}),e.jsx("div",{className:"hidden lg:block px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center text-sm",children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(Se,{size:"sm",variant:r.transaction_type==="매매"?"sale":r.transaction_type==="전세"?"jeonse":"monthly",children:r.transaction_type}),e.jsx(us,{status:r.status})]})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate text-sm mb-1",children:r.title}),e.jsxs("div",{className:"text-xs text-gray-600 truncate mb-1",children:["📍 ",r.address]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[r.type," • ",r.area,"m²(",Math.floor(r.area/3.3),"평) • ",r.floor,"/",r.total_floors,"층 • ",r.rooms,"룸"," ",r.bathrooms,"욕실"]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm break-words",children:Is(r)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["등록:"," ",r.created_at&&new Date(r.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}),e.jsx("div",{className:"col-span-2",children:r.landlord_name?e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-700 truncate",children:r.landlord_name}),r.landlord_phone&&e.jsx("div",{className:"text-gray-500 truncate",children:r.landlord_phone})]}):e.jsx("div",{className:"text-xs text-gray-400",children:"정보 없음"})}),e.jsx("div",{className:"col-span-1",children:r.exit_date?e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-700",children:new Date(r.exit_date).toLocaleDateString("ko-KR")}),e.jsx("div",{className:"text-gray-500",children:"퇴실예정"})]}):e.jsx("div",{className:"text-xs text-gray-400",children:"미정"})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[e.jsxs("span",{className:`${r.parking?"text-green-600":"text-gray-400"}`,children:["🚗",r.parking?"주차":"주차X"]}),e.jsxs("span",{className:`${r.elevator?"text-green-600":"text-gray-400"}`,children:["🏢",r.elevator?"엘베":"엘베X"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["조회: ",r.view_count||0]})]})]})}),e.jsx("div",{className:"lg:hidden px-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{size:"sm",variant:r.transaction_type==="매매"?"sale":r.transaction_type==="전세"?"jeonse":"monthly",children:r.transaction_type}),e.jsx(us,{status:r.status})]}),e.jsx("div",{className:"font-bold text-primary-600 text-base",children:Is(r)})]}),e.jsx("div",{className:"font-medium text-gray-900 text-base",children:r.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:["📍 ",r.address]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[r.type," • ",r.area,"m² (",Math.floor(r.area/3.3),"평) • ",r.floor,"/",r.total_floors,"층 • ",r.rooms,"룸"," ",r.bathrooms,"욕실"]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`${r.parking?"text-green-600":"text-gray-400"}`,children:["🚗",r.parking?"주차":"주차X"]}),e.jsxs("span",{className:`${r.elevator?"text-green-600":"text-gray-400"}`,children:["🏢",r.elevator?"엘베":"엘베X"]}),r.exit_date&&e.jsxs("span",{className:"text-orange-600",children:["퇴실:"," ",new Date(r.exit_date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}),e.jsxs("div",{children:["등록:"," ",r.created_at&&new Date(r.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]})]})})]},r.id))})]}),Gn=({isOpen:s,onClose:t,onSubmit:r,initialData:a,selectedDate:l})=>{const{user:n,loading:i,session:o,getCurrentUser:c}=oe(),{properties:d}=ps(),[h,u]=m.useState(!1),[f,j]=m.useState(null),[g,N]=m.useState({title:"",description:"",start_date:"",end_date:"",all_day:!1,category:"other",priority:"medium",property_id:"",attendees:[],location:""});m.useEffect(()=>{if(a)N({title:a.title,description:a.description||"",start_date:a.start_date,end_date:a.end_date,all_day:a.all_day,category:a.category,priority:a.priority,property_id:a.property_id||"",attendees:a.attendees||[],location:a.location||""});else{const y=new Date;let k,L;if(l){k=new Date(l);const q=y.getHours(),$=y.getMinutes();l.toDateString()===y.toDateString()?k.setHours(q+($>0?1:0),0,0,0):k.setHours(9,0,0,0)}else k=new Date(y),k.setHours(y.getHours()+1,0,0,0);L=new Date(k),L.setHours(k.getHours()+1);const z=k.toISOString().slice(0,16),R=L.toISOString().slice(0,16);console.log("🕐 기본 시간 설정:",{selectedDate:l==null?void 0:l.toISOString(),clickedDate:l==null?void 0:l.toDateString(),currentDate:y.toDateString(),isToday:(l==null?void 0:l.toDateString())===y.toDateString(),startDateTime:z,endDateTime:R}),N(q=>({...q,start_date:z,end_date:R}))}},[a,l]);const b=async y=>{var k,L,z,R,q;if(y.preventDefault(),console.log("🚀 handleSubmit 함수 실행됨!"),console.log("📋 현재 formData:",g),console.log("🔍 현재 인증 상태:",{authLoading:i,hasUser:!!n,userId:n==null?void 0:n.id,hasSession:!!o}),i){j("인증 상태를 확인하는 중입니다. 잠시 후 다시 시도해주세요.");return}if(!g.title.trim()){j("일정 제목을 입력해주세요.");return}if(!g.start_date){j("시작 일시를 선택해주세요.");return}if(!g.end_date){j("종료 일시를 선택해주세요.");return}if(new Date(g.start_date)>=new Date(g.end_date)){j("종료 일시는 시작 일시보다 뒤여야 합니다.");return}console.log("✅ 폼 유효성 검사 통과"),u(!0),j(null);try{console.log("🔐 인증 사용자 확인 중...");let $=null;const te=await c();if(!te){console.error("❌ 사용자 인증 실패"),j("사용자 인증에 실패했습니다. 페이지를 새로고침하거나 다시 로그인해주세요.");return}$={id:te.id,email:te.email},console.log("✅ 인증된 사용자:",{id:$.id,email:$.email});const ee=$.id;console.log("🏢 테넌트 ID:",ee);const G={...g};(!G.property_id||G.property_id.trim()==="")&&delete G.property_id,Array.isArray(G.attendees)&&G.attendees.length===0&&delete G.attendees,console.log("🧹 정리된 폼 데이터:",G);let Y;if(a){if(console.log("🔄 일정 수정 중...",{scheduleId:a.id,tenantId:ee,currentUserId:$.id,originalTenantId:a.tenant_id,originalCreatedBy:a.created_by}),a.tenant_id!==ee||a.created_by!==$.id){console.error("❌ 클라이언트 권한 확인 실패"),j("이 일정을 수정할 권한이 없습니다.");return}Y=await Xe.updateSchedule(a.id,G,$.id)}else console.log("➕ 일정 생성 중..."),Y=await Xe.createSchedule(ee,$.id,G);console.log("✅ 일정 저장 성공:",Y),r(Y),t()}catch($){console.error("❌ 일정 저장 실패:",$),console.error("❌ 오류 상세:",{message:$.message,stack:$.stack,name:$.name,code:$.code}),(k=$.message)!=null&&k.includes("JWT")||(L=$.message)!=null&&L.includes("인증이 필요합니다")?j("세션이 만료되었습니다. 페이지를 새로고침하거나 다시 로그인해주세요."):(z=$.message)!=null&&z.includes("permission")||(R=$.message)!=null&&R.includes("권한이 없습니다")?j("이 일정을 수정할 권한이 없습니다. 본인이 작성한 일정만 수정 가능합니다."):(q=$.message)!=null&&q.includes("찾을 수 없습니다")?j("일정을 찾을 수 없습니다. 이미 삭제되었거나 권한이 없을 수 있습니다."):j($.message||"일정 저장 중 오류가 발생했습니다.")}finally{u(!1)}},x=(y,k)=>{if(N(L=>({...L,[y]:k})),y==="all_day"&&k){const L=g.start_date.split("T")[0],z=g.end_date.split("T")[0];N(R=>({...R,start_date:`${L}T00:00`,end_date:`${z}T23:59`}))}},p=[{value:"property_viewing",label:"매물 보기",icon:e.jsx(be,{className:"w-4 h-4"})},{value:"contract_signing",label:"계약 체결",icon:e.jsx(Je,{className:"w-4 h-4"})},{value:"maintenance",label:"유지보수",icon:e.jsx(qe,{className:"w-4 h-4"})},{value:"client_meeting",label:"고객 미팅",icon:e.jsx(ke,{className:"w-4 h-4"})},{value:"team_meeting",label:"팀 회의",icon:e.jsx(ke,{className:"w-4 h-4"})},{value:"personal",label:"개인 일정",icon:e.jsx(je,{className:"w-4 h-4"})},{value:"other",label:"기타",icon:e.jsx(Je,{className:"w-4 h-4"})}],v=[{value:"low",label:"낮음",color:"text-gray-600"},{value:"medium",label:"보통",color:"text-blue-600"},{value:"high",label:"높음",color:"text-orange-600"},{value:"urgent",label:"긴급",color:"text-red-600"}];return e.jsx(Ee,{isOpen:s,onClose:t,title:a?"일정 수정":"새 일정 등록",size:"lg",children:e.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-600",children:f})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"일정 제목 *"}),e.jsx(A,{value:g.title,onChange:y=>x("title",y.target.value),placeholder:"일정 제목을 입력하세요",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"설명"}),e.jsx("textarea",{value:g.description,onChange:y=>x("description",y.target.value),placeholder:"일정에 대한 자세한 설명을 입력하세요",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none h-20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"카테고리 *"}),e.jsx("select",{value:g.category,onChange:y=>x("category",y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",required:!0,children:p.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"우선순위"}),e.jsx("select",{value:g.priority,onChange:y=>x("priority",y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:v.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))})]}),(g.category==="property_viewing"||g.category==="contract_signing")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"연관 매물"}),e.jsxs("select",{value:g.property_id,onChange:y=>x("property_id",y.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"매물 선택 (선택사항)"}),d.map(y=>e.jsxs("option",{value:y.id,children:[y.title," - ",y.address]},y.id))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"all_day",checked:g.all_day,onChange:y=>x("all_day",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"all_day",className:"text-sm text-gray-700",children:"종일 일정"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작 일시 *"}),e.jsx(A,{type:g.all_day?"date":"datetime-local",value:g.all_day?g.start_date.split("T")[0]:g.start_date,onChange:y=>{const k=g.all_day?`${y.target.value}T00:00`:y.target.value;x("start_date",k)},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료 일시 *"}),e.jsx(A,{type:g.all_day?"date":"datetime-local",value:g.all_day?g.end_date.split("T")[0]:g.end_date,onChange:y=>{const k=g.all_day?`${y.target.value}T23:59`:y.target.value;x("end_date",k)},required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"장소"}),e.jsx(A,{value:g.location,onChange:y=>x("location",y.target.value),placeholder:"일정 장소를 입력하세요",leftIcon:e.jsx(be,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx(U,{type:"button",onClick:t,variant:"outline",disabled:h||i,children:"취소"}),e.jsx(U,{type:"submit",variant:"tenant",disabled:h||i,onClick:()=>console.log("🔘 등록 버튼 클릭됨!"),children:i?"인증 확인 중...":h?"저장 중...":a?"수정":"등록"})]})]})})},Hn=({isOpen:s,onClose:t,schedule:r,onEdit:a,onDelete:l})=>{const n=ht(),[i,o]=m.useState(!1);if(!r)return null;const c={property_viewing:{label:"매물 보기",color:"bg-blue-500",icon:e.jsx(be,{className:"w-4 h-4"})},contract_signing:{label:"계약 체결",color:"bg-green-500",icon:e.jsx(Je,{className:"w-4 h-4"})},maintenance:{label:"유지보수",color:"bg-yellow-500",icon:e.jsx(qe,{className:"w-4 h-4"})},client_meeting:{label:"고객 미팅",color:"bg-purple-500",icon:e.jsx(ie,{className:"w-4 h-4"})},team_meeting:{label:"팀 회의",color:"bg-indigo-500",icon:e.jsx(ie,{className:"w-4 h-4"})},personal:{label:"개인 일정",color:"bg-pink-500",icon:e.jsx(je,{className:"w-4 h-4"})},other:{label:"기타",color:"bg-gray-500",icon:e.jsx(Je,{className:"w-4 h-4"})}},d={low:{label:"낮음",color:"text-gray-600 bg-gray-100"},medium:{label:"보통",color:"text-blue-600 bg-blue-100"},high:{label:"높음",color:"text-orange-600 bg-orange-100"},urgent:{label:"긴급",color:"text-red-600 bg-red-100"}},h={scheduled:{label:"예정됨",color:"text-blue-600 bg-blue-100"},in_progress:{label:"진행 중",color:"text-yellow-600 bg-yellow-100"},completed:{label:"완료됨",color:"text-green-600 bg-green-100"},cancelled:{label:"취소됨",color:"text-red-600 bg-red-100"},postponed:{label:"연기됨",color:"text-gray-600 bg-gray-100"}},u=(b,x)=>{const p=new Date(b);return x?p.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):p.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"2-digit",minute:"2-digit"})},f=async()=>{if(confirm("정말로 이 일정을 삭제하시겠습니까?")){o(!0);try{await l(r.id),t()}catch(b){console.error("일정 삭제 실패:",b)}finally{o(!1)}}},j=c[r.category],g=d[r.priority],N=h[r.status];return e.jsx(Ee,{isOpen:s,onClose:t,title:"",size:"lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:r.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded text-white text-xs font-medium ${j.color}`,children:[j.icon,e.jsx("span",{className:"ml-1",children:j.label})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${g.color}`,children:g.label}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${N.color}`,children:N.label})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 ml-4",children:e.jsx(ue,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(je,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"시작"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:u(r.start_date,r.all_day)}),e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(nt,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"종료"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:u(r.end_date,r.all_day)}),r.all_day&&e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-600",children:"종일 일정"})})]}),r.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"상세 내용"}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.description})})]}),r.location&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(be,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"장소"})]}),e.jsx("p",{className:"text-gray-600 ml-7",children:r.location})]}),e.jsxs("div",{className:"mb-6 pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["생성일: ",new Date(r.created_at).toLocaleDateString("ko-KR")]}),r.updated_at!==r.created_at&&e.jsxs("p",{className:"text-xs text-gray-500",children:["수정일: ",new Date(r.updated_at).toLocaleDateString("ko-KR")]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx(U,{onClick:t,variant:"outline",size:n?"sm":"md",children:"닫기"}),e.jsx(U,{onClick:()=>{a(r),t()},variant:"primary",leftIcon:e.jsx(ms,{className:"w-4 h-4"}),size:n?"sm":"md",children:"수정"}),e.jsx(U,{onClick:f,variant:"danger",leftIcon:e.jsx(Ye,{className:"w-4 h-4"}),disabled:i,size:n?"sm":"md",children:i?"삭제 중...":"삭제"})]})]})})},Pr=()=>{const s=ht(),{user:t}=oe(),[r,a]=m.useState(new Date),[l,n]=m.useState("month"),[i,o]=m.useState(null),[c,d]=m.useState(!1),[h,u]=m.useState(!1),[f,j]=m.useState(!1),[g,N]=m.useState(null),[b,x]=m.useState(null),[p,v]=m.useState([]),[y,k]=m.useState("all"),L={property_viewing:"bg-blue-500",contract_signing:"bg-green-500",maintenance:"bg-yellow-500",client_meeting:"bg-purple-500",team_meeting:"bg-indigo-500",personal:"bg-pink-500",other:"bg-gray-500"},z={property_viewing:"매물 보기",contract_signing:"계약 체결",maintenance:"유지보수",client_meeting:"고객 미팅",team_meeting:"팀 회의",personal:"개인 일정",other:"기타"};m.useEffect(()=>{(async()=>{if(!t){console.log("⏳ 사용자 인증 대기 중...");return}try{console.log("📅 스케줄 데이터 로드 시작:",{userId:t.id,tenantId:t.id});const _=await Xe.getSchedules(t.id);console.log("📅 로드된 스케줄:",_.length,"개"),v(_)}catch(_){console.error("❌ 스케줄 로드 실패:",_),v([])}finally{}})()},[t]);const R=O=>{v(_=>_.find(w=>w.id===O.id)?_.map(w=>w.id===O.id?O:w):[..._,O])},q=O=>{N(O),j(!0)},$=O=>{console.log("📝 스케줄 수정 요청:",{id:O.id,title:O.title,tenant_id:O.tenant_id,created_by:O.created_by,currentUserId:t==null?void 0:t.id}),x(O),d(!0)},te=async O=>{try{console.log("🗑️ 스케줄 삭제 요청:",{scheduleId:O,currentUserId:t==null?void 0:t.id}),await Xe.deleteSchedule(O,t==null?void 0:t.id),v(_=>_.filter(P=>P.id!==O)),console.log("✅ 스케줄 삭제 완료:",O)}catch(_){throw console.error("❌ 스케줄 삭제 실패:",_),_}},ee=()=>{d(!1),x(null),o(null)},G=()=>{const O=r.getFullYear(),_=r.getMonth(),P=new Date(O,_,1),w=new Date(O,_+1,0),B=new Date(P);B.setDate(B.getDate()-P.getDay());const H=new Date(w);H.setDate(H.getDate()+(6-w.getDay()));const K=[],se=new Date(B);for(;se<=H;)K.push(new Date(se)),se.setDate(se.getDate()+1);const C=[];for(let D=0;D<K.length;D+=7)C.push(K.slice(D,D+7));return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:e.jsx("div",{className:"grid grid-cols-7 text-center text-sm font-medium text-gray-500 py-3",children:["일","월","화","수","목","금","토"].map(D=>e.jsx("div",{children:D},D))})}),e.jsx("div",{className:"divide-y divide-gray-200",children:C.map((D,Z)=>e.jsx("div",{className:"grid grid-cols-7",children:D.map((J,W)=>{const ce=J.toDateString()===new Date().toDateString(),we=J.getMonth()===_,fe=p.filter(de=>new Date(de.start_date).toDateString()===J.toDateString());return e.jsxs("div",{className:`min-h-[60px] sm:min-h-[80px] p-1 sm:p-2 border-r border-gray-100 last:border-r-0 cursor-pointer hover:bg-gray-50 transition-colors ${we?"":"bg-gray-25 text-gray-400"}`,onClick:()=>{o(J),d(!0)},children:[e.jsx("div",{className:`text-xs sm:text-sm mb-1 ${ce?"w-5 h-5 sm:w-6 sm:h-6 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-xs":"font-medium"}`,children:J.getDate()}),e.jsxs("div",{className:"space-y-1",children:[fe.slice(0,s?1:3).map((de,ye)=>e.jsx("div",{className:`text-xs px-1 py-0.5 sm:px-2 sm:py-1 rounded text-white truncate cursor-pointer hover:opacity-80 touch-target ${L[de.category]}`,onClick:rs=>{rs.stopPropagation(),q(de)},title:`${de.title} - 클릭하여 상세보기`,children:de.title},ye)),fe.length>(s?1:3)&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",fe.length-(s?1:3),"개 더"]})]})]},W)})},Z))})]})},Y=()=>{const O=p.filter(_=>y==="all"||_.category===y);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"일정 목록"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:O.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(je,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"등록된 일정이 없습니다."})]}):O.map(_=>e.jsx("div",{className:"p-4 hover:bg-blue-50 cursor-pointer transition-all duration-200 border-l-4 border-transparent hover:border-blue-400 hover:shadow-sm",onClick:()=>q(_),role:"button",tabIndex:0,onKeyDown:P=>{(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),q(_))},"aria-label":`${_.title} 일정 상세보기`,title:"클릭하여 일정 상세보기",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mt-1 ${L[_.category]} flex-shrink-0`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:_.title}),_.priority==="urgent"&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-red-100 text-red-600",children:"긴급"}),_.priority==="high"&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-600",children:"높음"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:z[_.category]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-400 mb-1",children:[e.jsx(je,{className:"w-4 h-4 mr-1"}),new Date(_.start_date).toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:_.all_day?void 0:"2-digit",minute:_.all_day?void 0:"2-digit"}),_.location&&e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-3 h-3 ml-3 mr-1"}),e.jsx("span",{className:"truncate",children:_.location})]})]}),_.description&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:_.description})]})]}),e.jsx("div",{className:"flex-shrink-0 ml-2",children:e.jsx(Ke,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-500"})})]})},_.id))})]})};return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"일정 관리"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"캘린더로 일정을 관리하세요"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{onClick:()=>d(!0),leftIcon:e.jsx(ds,{className:"w-4 h-4"}),variant:"tenant",size:s?"sm":"md",children:s?"등록":"일정 등록"}),e.jsx(U,{onClick:()=>u(!0),leftIcon:e.jsx(Hr,{className:"w-4 h-4"}),variant:"outline",size:s?"sm":"md",children:"필터"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{onClick:()=>{const O=new Date(r);O.setMonth(O.getMonth()-1),a(O)},variant:"outline",size:"sm",children:e.jsx(Yr,{className:"w-4 h-4"})}),e.jsx("h2",{className:"text-lg font-semibold min-w-[120px] text-center",children:r.toLocaleDateString("ko-KR",{year:"numeric",month:"long"})}),e.jsx(U,{onClick:()=>{const O=new Date(r);O.setMonth(O.getMonth()+1),a(O)},variant:"outline",size:"sm",children:e.jsx(Hs,{className:"w-4 h-4"})})]}),e.jsx(U,{onClick:()=>a(new Date),variant:"outline",size:"sm",children:"오늘"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{onClick:()=>n("month"),variant:l==="month"?"primary":"outline",size:"sm",leftIcon:e.jsx(Cs,{className:"w-4 h-4"}),children:"월간"}),e.jsx(U,{onClick:()=>n("agenda"),variant:l==="agenda"?"primary":"outline",size:"sm",leftIcon:e.jsx(Kr,{className:"w-4 h-4"}),children:"목록"})]})]}),l==="month"?G():Y(),e.jsx(Gn,{isOpen:c,onClose:ee,onSubmit:R,initialData:b,selectedDate:i||void 0}),e.jsx(Hn,{isOpen:f,onClose:()=>j(!1),schedule:g,onEdit:$,onDelete:te}),e.jsx(Ee,{isOpen:h,onClose:()=>u(!1),title:"일정 필터",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"카테고리"}),e.jsxs("select",{value:y,onChange:O=>k(O.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"all",children:"전체"}),e.jsx("option",{value:"property_viewing",children:"매물 보기"}),e.jsx("option",{value:"contract_signing",children:"계약 체결"}),e.jsx("option",{value:"maintenance",children:"유지보수"}),e.jsx("option",{value:"client_meeting",children:"고객 미팅"}),e.jsx("option",{value:"team_meeting",children:"팀 회의"}),e.jsx("option",{value:"personal",children:"개인 일정"}),e.jsx("option",{value:"other",children:"기타"})]})]})}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[e.jsx(U,{onClick:()=>u(!1),variant:"outline",children:"취소"}),e.jsx(U,{onClick:()=>u(!1),variant:"tenant",children:"적용"})]})]})})]})},He={owner:"팀 소유자",admin:"관리자",member:"멤버",viewer:"뷰어"},Yn={active:"활성",inactive:"비활성",suspended:"정지됨"},Kn={pending:"대기중",accepted:"수락됨",declined:"거절됨",expired:"만료됨"},Jn=({member:s,isOpen:t,onClose:r,onUpdate:a,onRoleChange:l,onStatusChange:n,currentUserRole:i,canEdit:o})=>{const[c,d]=m.useState("info"),[h,u]=m.useState(!1),[f,j]=m.useState({name:s.name||"",email:s.email||"",phone:s.phone||"",company:s.company||""});if(!t)return null;const g=async()=>{try{u(!0),await a(s.id,f),r()}catch(y){alert(y.message||"정보 업데이트에 실패했습니다.")}finally{u(!1)}},N=async y=>{if(confirm(`${s.name}님의 역할을 ${He[y]}로 변경하시겠습니까?`))try{u(!0),await l(s.id,y),r()}catch(k){alert(k.message||"역할 변경에 실패했습니다.")}finally{u(!1)}},b=async y=>{if(confirm(`${s.name}님의 상태를 변경하시겠습니까?`))try{u(!0),await n(s.id,y),r()}catch(k){alert(k.message||"상태 변경에 실패했습니다.")}finally{u(!1)}},x=y=>{switch(y){case"owner":return e.jsx(Bt,{className:"w-4 h-4 text-yellow-500"});case"admin":return e.jsx(it,{className:"w-4 h-4 text-blue-500"});case"member":return e.jsx(ie,{className:"w-4 h-4 text-green-500"});case"viewer":return e.jsx(Ke,{className:"w-4 h-4 text-gray-500"});default:return e.jsx(ie,{className:"w-4 h-4"})}},p=y=>!!(i==="owner"||i==="admin"&&["member","viewer"].includes(y)),v=i==="owner"||i==="admin";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[x(s.role),e.jsx("span",{className:"text-sm text-gray-600",children:He[s.role]})]})]})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ue,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex",children:[e.jsx("button",{onClick:()=>d("info"),className:`px-6 py-3 text-sm font-medium ${c==="info"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"기본 정보"}),o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d("role"),className:`px-6 py-3 text-sm font-medium ${c==="role"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"역할 관리"}),e.jsx("button",{onClick:()=>d("status"),className:`px-6 py-3 text-sm font-medium ${c==="status"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"상태 관리"})]})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[c==="info"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이름"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",value:f.name,onChange:y=>j({...f,name:y.target.value}),className:"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"이름을 입력하세요",readOnly:!o})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"email",value:f.email,onChange:y=>j({...f,email:y.target.value}),className:"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"이메일을 입력하세요",readOnly:!o})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"전화번호"}),e.jsxs("div",{className:"relative",children:[e.jsx(Jr,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"tel",value:f.phone,onChange:y=>j({...f,phone:y.target.value}),className:"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"전화번호를 입력하세요",readOnly:!o})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"회사명"}),e.jsxs("div",{className:"relative",children:[e.jsx(lt,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",value:f.company,onChange:y=>j({...f,company:y.target.value}),className:"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"회사명을 입력하세요",readOnly:!o})]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:e.jsxs("p",{children:["가입일:"," ",new Date(s.joined_at).toLocaleDateString("ko-KR")]})})]}),c==="role"&&o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["현재 역할:"," ",e.jsx("span",{className:"font-medium",children:He[s.role]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:["viewer","member","admin","owner"].map(y=>e.jsx("button",{onClick:()=>N(y),disabled:!p(y)||s.role===y||h,className:`p-4 border rounded-lg text-left transition-colors ${s.role===y?"border-blue-500 bg-blue-50":p(y)?"border-gray-200 hover:border-gray-300 hover:bg-gray-50":"border-gray-100 bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[x(y),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:He[y]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[y==="owner"&&"모든 권한을 가지며 팀을 관리할 수 있습니다.",y==="admin"&&"팀원을 관리하고 매물을 관리할 수 있습니다.",y==="member"&&"매물을 등록하고 수정할 수 있습니다.",y==="viewer"&&"매물을 조회만 할 수 있습니다."]})]})]})},y))})]}),c==="status"&&o&&v&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["현재 상태:"," ",e.jsx("span",{className:"font-medium",children:s.status==="active"?"활성":s.status==="inactive"?"비활성":"정지"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("button",{onClick:()=>b("active"),disabled:s.status==="active"||h,className:`p-4 border rounded-lg text-left transition-colors ${s.status==="active"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"활성"}),e.jsx("div",{className:"text-sm text-gray-500",children:"팀원이 정상적으로 활동할 수 있습니다."})]})]})}),e.jsx("button",{onClick:()=>b("inactive"),disabled:s.status==="inactive"||h,className:`p-4 border rounded-lg text-left transition-colors ${s.status==="inactive"?"border-gray-500 bg-gray-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"비활성"}),e.jsx("div",{className:"text-sm text-gray-500",children:"팀원이 일시적으로 비활성 상태입니다."})]})]})}),e.jsx("button",{onClick:()=>b("suspended"),disabled:s.status==="suspended"||h,className:`p-4 border rounded-lg text-left transition-colors ${s.status==="suspended"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"정지"}),e.jsx("div",{className:"text-sm text-gray-500",children:"팀원의 접근이 정지됩니다."})]})]})})]})]})]}),c==="info"&&o&&e.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"취소"}),e.jsx("button",{onClick:g,disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"저장 중...":"저장"})]})]})})},zt={invitation_sent:"팀원 초대",invitation_accepted:"초대 수락",invitation_declined:"초대 거절",invitation_cancelled:"초대 취소",member_added:"팀원 추가",member_removed:"팀원 제거",role_changed:"역할 변경",member_info_updated:"정보 수정",member_status_changed:"상태 변경"},Xn=({isOpen:s,onClose:t})=>{const{user:r}=oe(),[a,l]=m.useState([]),[n,i]=m.useState(!0),[o,c]=m.useState(null);m.useEffect(()=>{s&&(r!=null&&r.id)&&d()},[s,r==null?void 0:r.id]);const d=async()=>{try{i(!0);const f=await An(r.id);l(f)}catch(f){console.error("활동 로그 조회 실패:",f)}finally{i(!1)}},h=f=>{const j=new Date(f),N=Math.floor((new Date().getTime()-j.getTime())/1e3);return N<60?"방금 전":N<3600?`${Math.floor(N/60)}분 전`:N<86400?`${Math.floor(N/3600)}시간 전`:N<2592e3?`${Math.floor(N/86400)}일 전`:j.toLocaleDateString("ko-KR")},u=f=>{const j=zt[f.action]||f.action;switch(f.action){case"role_changed":return`${f.details.target_user_name||"팀원"}의 역할을 변경했습니다`;case"member_status_changed":return`${f.details.target_user_name||"팀원"}의 상태를 변경했습니다`;case"member_info_updated":return`${f.details.target_user_name||"팀원"}의 정보를 수정했습니다`;case"member_removed":return`${f.details.target_user_name||"팀원"}을 팀에서 제거했습니다`;case"invitation_sent":return`${f.details.email}로 초대를 발송했습니다`;default:return j}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_s,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"팀 활동 로그"}),e.jsx("p",{className:"text-sm text-gray-600",children:"팀의 모든 활동을 확인할 수 있습니다"})]})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"×"})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_s,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"활동 로그가 없습니다."})]}):e.jsx("div",{className:"space-y-4",children:a.map(f=>e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>c(o===f.id?null:f.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(_s,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:u(f)}),e.jsxs("p",{className:"text-sm text-gray-500",children:[f.user_name," • ",h(f.created_at)]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:zt[f.action]||f.action}),o===f.id?e.jsx(Ys,{className:"w-4 h-4 text-gray-400"}):e.jsx(at,{className:"w-4 h-4 text-gray-400"})]})]})}),o===f.id&&e.jsx("div",{className:"border-t border-gray-100 px-4 py-3 bg-gray-50",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium mb-2",children:"상세 정보:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:["• 시간:"," ",new Date(f.created_at).toLocaleString("ko-KR")]}),e.jsxs("p",{children:["• 실행자: ",f.user_name]}),f.details&&Object.keys(f.details).length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"font-medium",children:"추가 정보:"}),e.jsx("div",{className:"mt-1 pl-4 space-y-1",children:Object.entries(f.details).map(([j,g])=>e.jsxs("p",{className:"text-xs",children:["• ",j,":"," ",typeof g=="object"?JSON.stringify(g):String(g)]},j))})]})]})]})})]},f.id))})}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"닫기"})})]})}):null},Qn=({isOpen:s,onClose:t,inviteData:r})=>{const[a,l]=m.useState(!1);if(!s)return null;const n=async()=>{try{await navigator.clipboard.writeText(r.inviteUrl),l(!0),setTimeout(()=>l(!1),2e3)}catch(c){console.error("클립보드 복사 실패:",c)}},i=()=>{const c=`[${r.teamName||"팀"}] 초대 - ${o(r.role)} 역할`,d=`안녕하세요!

${r.teamName||"팀"}에서 ${o(r.role)} 역할로 초대드립니다.

아래 링크를 클릭하여 초대를 수락해주세요:
${r.inviteUrl}

감사합니다.`,h=`mailto:${r.email}?subject=${encodeURIComponent(c)}&body=${encodeURIComponent(d)}`;window.open(h)},o=c=>({admin:"관리자",member:"멤버",viewer:"뷰어"})[c]||c;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md mx-4",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"초대 링크 생성 완료"}),e.jsx("p",{className:"text-sm text-gray-600",children:"팀원에게 링크를 전송해주세요"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(ue,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"초대 정보"})]}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"이메일:"})," ",r.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"역할:"})," ",o(r.role)]}),r.teamName&&e.jsxs("p",{children:[e.jsx("strong",{children:"팀:"})," ",r.teamName]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"초대 링크"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:r.inviteUrl,readOnly:!0,className:"flex-1 p-3 border border-gray-300 rounded-l-lg bg-gray-50 text-sm"}),e.jsx("button",{onClick:n,className:`px-4 py-3 border border-l-0 border-gray-300 rounded-r-lg transition-colors ${a?"bg-green-100 text-green-700 border-green-300":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,title:"클립보드에 복사",children:a?e.jsx(Wt,{className:"w-4 h-4"}):e.jsx(Xr,{className:"w-4 h-4"})})]}),a&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"✅ 클립보드에 복사되었습니다!"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"text-yellow-600",children:"⚠️"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"링크 보안 안내"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"• 이 링크는 7일 후 만료됩니다"}),e.jsx("li",{children:"• 초대받은 이메일 계정으로만 수락 가능합니다"}),e.jsx("li",{children:"• 안전한 방법으로 전달해주세요"})]})]})]})})]})}),e.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 flex space-x-3",children:[e.jsxs("button",{onClick:i,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"이메일로 전송"})]}),e.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"완료"})]})]})})},Zn=()=>{var gt;const{user:s}=oe(),[t,r]=m.useState([]),[a,l]=m.useState([]),[n,i]=m.useState(!0),[o,c]=m.useState(!1),[d,h]=m.useState("email"),[u,f]=m.useState(""),[j,g]=m.useState("member"),[N,b]=m.useState(""),[x,p]=m.useState(""),[v,y]=m.useState([]),[k,L]=m.useState(null),[z,R]=m.useState("member"),[q,$]=m.useState(!1),[te,ee]=m.useState(null),[G,Y]=m.useState(!1),[O,_]=m.useState(!1),[P,w]=m.useState(null),[B,H]=m.useState(!1),[K,se]=m.useState(null),[C,D]=m.useState(!1),[Z,J]=m.useState(null),W=(gt=t.find(S=>S.id===(s==null?void 0:s.id)))==null?void 0:gt.role;m.useEffect(()=>{s!=null&&s.id&&ce()},[s==null?void 0:s.id]),m.useEffect(()=>{const S=()=>{w(null)};if(P)return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[P]);const ce=async()=>{try{i(!0);const[S,me]=await Promise.all([kr(s.id),Rn(s.id)]);r(S),l(me)}catch(S){console.error("팀 데이터 로드 실패:",S),alert("팀 정보를 불러오는데 실패했습니다.")}finally{i(!1)}},we=async()=>{if(!u.trim()){alert("이메일을 입력해주세요.");return}try{$(!0);const S=await In(s.id,{email:u,role:j,message:N});se({email:u,inviteUrl:S.inviteUrl,role:j,teamName:"리체 매물장"}),H(!0),c(!1),Ds(),ce()}catch(S){alert(S.message||"초대 발송에 실패했습니다.")}finally{$(!1)}},fe=async()=>{if(!k){alert("추가할 회원을 선택해주세요.");return}try{$(!0),await Tn(s.id,{user_id:k.id,role:z}),alert("팀원이 추가되었습니다."),c(!1),Ls(),ce()}catch(S){alert(S.message||"팀원 추가에 실패했습니다.")}finally{$(!1)}},de=async S=>{if(!S.trim()||S.length<2){y([]);return}try{const me=await Ln(S,s.id);y(me)}catch(me){console.error("사용자 검색 실패:",me)}},ye=(S,me)=>{const ft=t.find(Ur=>Ur.id===S);if(!ft){alert("삭제할 팀원을 찾을 수 없습니다.");return}if(ft.role==="owner"){alert("Owner는 팀에서 제거할 수 없습니다.");return}if(S===(s==null?void 0:s.id)){alert("자신을 팀에서 제거할 수 없습니다.");return}if(W!=="owner"&&W!=="admin"){alert("팀원을 제거할 권한이 없습니다.");return}J({id:S,name:me}),D(!0)},rs=async()=>{if(Z)try{$(!0),await On(s.id,Z.id),alert(`✅ ${Z.name}님이 팀에서 제거되었습니다.`),ce(),D(!1),J(null)}catch(S){console.error("팀원 제거 실패:",S),alert(`❌ 팀원 제거에 실패했습니다.

오류: ${S.message||"알 수 없는 오류"}`)}finally{$(!1)}},Os=async S=>{if(confirm("초대를 취소하시겠습니까?"))try{$(!0),await Dn(s.id,S),alert("초대가 취소되었습니다."),ce()}catch(me){alert(me.message||"초대 취소에 실패했습니다.")}finally{$(!1)}},Ds=()=>{f(""),g("member"),b("")},Ls=()=>{p(""),y([]),L(null),R("member")},zs=S=>{ee(S),Y(!0),w(null)},I=async(S,me)=>{await zn(s.id,S,me),ce()},Q=async(S,me)=>{await Mn(s.id,S,me),ce()},Ar=async(S,me)=>{await $n(s.id,S,me),ce()},ut=S=>{switch(S){case"owner":return e.jsx(Bt,{className:"w-4 h-4 text-yellow-500"});case"admin":return e.jsx(it,{className:"w-4 h-4 text-blue-500"});case"member":return e.jsx(ie,{className:"w-4 h-4 text-green-500"});case"viewer":return e.jsx(Ke,{className:"w-4 h-4 text-gray-500"});default:return e.jsx(ie,{className:"w-4 h-4"})}},$s=W==="owner"||W==="admin";return n?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"팀 정보를 불러오는 중..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"팀 관리"}),e.jsx("p",{className:"text-sm text-gray-600",children:"팀원 초대 및 관리"})]})]}),$s&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>_(!0),className:"text-gray-600 hover:text-gray-800 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors flex items-center space-x-2",children:[e.jsx(_s,{className:"w-4 h-4"}),e.jsx("span",{children:"활동 로그"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(Qr,{className:"w-4 h-4"}),e.jsx("span",{children:"팀원 초대"})]})]})]})}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["팀원 (",t.length,"명)"]})}),e.jsx("div",{className:"space-y-3",children:t.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:S.name}),ut(S.role),e.jsx("span",{className:"text-sm text-gray-600",children:He[S.role]})]}),S.email&&e.jsx("p",{className:"text-sm text-gray-500",children:S.email}),e.jsxs("p",{className:"text-xs text-gray-400",children:[new Date(S.joined_at).toLocaleDateString("ko-KR")," ","가입"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="active"?"bg-green-100 text-green-800":S.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:Yn[S.status]}),e.jsx("button",{onClick:()=>zs(S),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"정보 수정",children:e.jsx(ms,{className:"w-4 h-4"})}),(W==="owner"||W==="admin")&&S.role!=="owner"&&S.id!==(s==null?void 0:s.id)?e.jsx("button",{onClick:()=>ye(S.id,S.name),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"팀에서 제거",disabled:q,children:e.jsx(Ye,{className:"w-4 h-4"})}):!1,e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>w(P===S.id?null:S.id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"추가 옵션",children:e.jsx(bt,{className:"w-4 h-4"})}),P===S.id&&e.jsx("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:e.jsx("div",{className:"py-1",children:e.jsxs("button",{onClick:()=>{w(null),alert("추가 기능은 준비 중입니다.")},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx(bt,{className:"w-4 h-4"}),e.jsx("span",{children:"추가 옵션"})]})})})]})]})]},S.id))})]}),a.length>0&&e.jsxs("div",{className:"border-t border-gray-200 px-6 py-4",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:["대기 중인 초대 (",a.length,"개)"]}),e.jsx("div",{className:"space-y-3",children:a.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(Ue,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:S.email}),ut(S.role),e.jsx("span",{className:"text-sm text-gray-600",children:He[S.role]})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[S.inviter_name,"님이 초대 •"," ",new Date(S.created_at).toLocaleDateString("ko-KR")]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["만료일:"," ",new Date(S.expires_at).toLocaleDateString("ko-KR")]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="pending"?"bg-yellow-100 text-yellow-800":S.status==="accepted"?"bg-green-100 text-green-800":S.status==="declined"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:Kn[S.status]}),$s&&S.status==="pending"&&e.jsx("button",{onClick:()=>Os(S.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"초대 취소",children:e.jsx(ue,{className:"w-4 h-4"})})]})]},S.id))})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md mx-4",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"팀원 초대"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(ue,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"초대 방식 선택"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:`flex items-center p-4 border rounded-lg cursor-pointer transition-colors ${d==="email"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("input",{type:"radio",name:"inviteType",value:"email",checked:d==="email",onChange:S=>h(S.target.value),className:"mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"📧 이메일 초대"}),e.jsx("div",{className:"text-xs text-gray-600",children:"새로운 사용자를 초대"})]})]}),e.jsxs("label",{className:`flex items-center p-4 border rounded-lg cursor-pointer transition-colors ${d==="existing"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("input",{type:"radio",name:"inviteType",value:"existing",checked:d==="existing",onChange:S=>h(S.target.value),className:"mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"👥 기존 회원 추가"}),e.jsx("div",{className:"text-xs text-gray-600",children:"이미 가입한 회원 검색"})]})]})]})]}),d==="email"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"이메일"}),e.jsx("input",{type:"email",value:u,onChange:S=>f(S.target.value),placeholder:"초대할 이메일을 입력하세요",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"역할"}),e.jsxs("select",{value:j,onChange:S=>g(S.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"member",children:"멤버 - 매물 관리 가능"}),e.jsx("option",{value:"admin",children:"관리자 - 팀원 관리 및 매물 관리 가능"}),e.jsx("option",{value:"viewer",children:"뷰어 - 매물 조회만 가능"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"초대 메시지 (선택)"}),e.jsx("textarea",{value:N,onChange:S=>b(S.target.value),placeholder:"초대 메시지를 입력하세요",rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"회원 검색"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"text-blue-600 mt-0.5",children:"💡"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium",children:"기존 회원 추가:"}),e.jsx("p",{children:"• 이름 또는 이메일을 2글자 이상 입력하세요"}),e.jsx("p",{children:"• 이미 다른 팀에 속한 회원도 추가할 수 있습니다"}),e.jsx("p",{children:"• 해당 회원은 이 팀으로 이동하게 됩니다"})]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(os,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",value:x,onChange:S=>{p(S.target.value),de(S.target.value)},placeholder:"이름 또는 이메일로 검색 (2글자 이상 입력)",className:"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),v.length>0&&e.jsx("div",{className:"mt-2 border border-gray-200 rounded-lg max-h-40 overflow-y-auto",children:v.map(S=>e.jsxs("button",{onClick:()=>{L(S),p(S.name),y([])},className:"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:S.name}),S.email&&e.jsx("div",{className:"text-sm text-gray-500",children:S.email}),S.company&&e.jsx("div",{className:"text-xs text-gray-400",children:S.company})]},S.id))}),k&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"font-medium text-blue-900",children:["선택됨: ",k.name]}),k.email&&e.jsx("div",{className:"text-sm text-blue-700",children:k.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"역할"}),e.jsxs("select",{value:z,onChange:S=>R(S.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"member",children:"멤버 - 매물 관리 가능"}),e.jsx("option",{value:"admin",children:"관리자 - 팀원 관리 및 매물 관리 가능"}),e.jsx("option",{value:"viewer",children:"뷰어 - 매물 조회만 가능"})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"취소"}),e.jsx("button",{onClick:d==="email"?we:fe,disabled:q||(d==="email"?!u.trim():!k),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:q?"처리중...":d==="email"?"초대 발송":"팀원 추가"})]})]})}),te&&e.jsx(Jn,{member:te,isOpen:G,onClose:()=>{Y(!1),ee(null)},onUpdate:I,onRoleChange:Q,onStatusChange:Ar,currentUserRole:W||"viewer",canEdit:$s||te.id===(s==null?void 0:s.id)}),e.jsx(Xn,{isOpen:O,onClose:()=>_(!1)}),K&&e.jsx(Qn,{isOpen:B,onClose:()=>{H(!1),se(null)},inviteData:K}),C&&Z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md mx-4",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Ye,{className:"w-4 h-4 text-red-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"팀원 제거 확인"})]}),e.jsx("button",{onClick:()=>{D(!1),J(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(ue,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-red-50 rounded-lg mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ie,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-900",children:Z.name}),e.jsx("p",{className:"text-sm text-red-700",children:"제거할 팀원"})]})]}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-yellow-400 text-lg",children:"⚠️"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:e.jsx("strong",{children:"주의사항:"})}),e.jsxs("ul",{className:"mt-2 text-sm text-yellow-700 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"제거된 팀원은 더 이상 이 팀의 데이터에 접근할 수 없습니다."}),e.jsx("li",{children:"이 작업은 되돌릴 수 없습니다."}),e.jsx("li",{children:"필요시 나중에 다시 초대할 수 있습니다."})]})]})]})}),e.jsxs("p",{className:"text-gray-600 text-center",children:[e.jsxs("strong",{children:[Z.name,"님"]}),"을 정말로 팀에서 제거하시겠습니까?"]})]})}),e.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{D(!1),J(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:q,children:"취소"}),e.jsx("button",{onClick:rs,disabled:q,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"제거중..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{children:"팀에서 제거"})]})})]})]})})]})},Rr=()=>e.jsx(Zn,{}),Ir=async(s,t,r)=>{const a=[],l=[];for(let n=0;n<s.length;n++){const i=s[n];try{const o=ei(i,n+1);if(o){a.push(o);continue}const{data:c,error:d}=await E.from("properties").insert({tenant_id:t,created_by:r,...i,view_count:0,inquiry_count:0,is_featured:!1,is_urgent:!1,is_favorite:!1}).select().single();if(d){a.push({row:n+1,message:`데이터베이스 오류: ${d.message}`,data:i});continue}c&&l.push(c)}catch(o){a.push({row:n+1,message:`처리 중 오류: ${o instanceof Error?o.message:"알 수 없는 오류"}`,data:i})}}return{success:l.length,failed:s.length-l.length,errors:a,importedProperties:l}},Tr=(s,t)=>{const r={title:"매물명",type:"매물유형",transaction_type:"거래유형",status:"매물상태",address:"주소",detailed_address:"상세주소",area:"면적(m²)",floor:"층",total_floors:"총층수",rooms:"방수",bathrooms:"화장실수",parking:"주차가능",elevator:"엘리베이터",price:"매매가(만원)",deposit:"보증금(만원)",monthly_rent:"월세(만원)",maintenance_fee:"관리비(만원)",landlord_name:"임대인명",landlord_phone:"임대인 연락처",landlord_email:"임대인 이메일",exit_date:"퇴실날짜",available_from:"입주가능일",description:"설명",view_count:"조회수",inquiry_count:"문의수",created_at:"등록일",updated_at:"수정일"},a=t.map(n=>r[n]||n),l=s.map(n=>t.map(i=>{const o=Or(n,i);return`"${String(o).replace(/"/g,'""')}"`}));return[a,...l].map(n=>n.join(",")).join(`
`)},Mr=(s,t)=>{const r={title:"매물명",type:"매물유형",transaction_type:"거래유형",status:"매물상태",address:"주소",detailed_address:"상세주소",area:"면적",floor:"층",total_floors:"총층수",rooms:"방수",bathrooms:"화장실수",parking:"주차가능",elevator:"엘리베이터",price:"매매가",deposit:"보증금",monthly_rent:"월세",maintenance_fee:"관리비",landlord_name:"임대인명",landlord_phone:"임대인 연락처",landlord_email:"임대인 이메일",exit_date:"퇴실날짜",available_from:"입주가능일",description:"설명",view_count:"조회수",inquiry_count:"문의수",created_at:"등록일",updated_at:"수정일"},a=s.map(l=>{const n={};return t.forEach(i=>{const o=r[i]||i;n[o]=Or(l,i)}),n});return JSON.stringify({exportDate:new Date().toISOString(),totalRecords:a.length,data:a},null,2)},Or=(s,t)=>{const r=s[t];if(r==null)return"";switch(t){case"parking":case"elevator":return typeof r=="boolean"?r?"있음":"없음":"";case"price":case"deposit":case"monthly_rent":case"maintenance_fee":return typeof r=="number"?r.toLocaleString():"";case"created_at":case"updated_at":case"exit_date":case"available_from":return typeof r=="string"?new Date(r).toLocaleDateString("ko-KR"):"";default:return typeof r=="object"&&r!==null?Array.isArray(r)?r.join(", "):JSON.stringify(r):typeof r=="string"||typeof r=="number"||typeof r=="boolean"?r:String(r)}},ei=(s,t)=>{const r=["title","type","transaction_type","address","area","floor","total_floors","rooms","bathrooms"];for(const i of r){const o=s[i];if(o==null||o==="")return{row:t,field:i,message:`필수 필드 '${i}'가 누락되었습니다.`}}const a=["area","floor","total_floors","rooms","bathrooms","price","deposit","monthly_rent"];for(const i of a){const o=s[i];if(o!=null&&o!==""&&(typeof o!="number"||isNaN(o)||o<0))return{row:t,field:i,message:`'${i}'는 유효한 양수여야 합니다.`}}const l=["아파트","오피스텔","원룸","빌라","단독주택","상가","사무실","기타"];if(!l.includes(s.type))return{row:t,field:"type",message:`매물 유형은 다음 중 하나여야 합니다: ${l.join(", ")}`};const n=["매매","전세","월세","단기임대"];if(!n.includes(s.transaction_type))return{row:t,field:"transaction_type",message:`거래 유형은 다음 중 하나여야 합니다: ${n.join(", ")}`};if(s.exit_date){const i=new Date(s.exit_date);if(isNaN(i.getTime()))return{row:t,field:"exit_date",message:"퇴실날짜는 유효한 날짜 형식이어야 합니다. (예: 2024-12-31)"}}return null},Dr=(s,t=10)=>{const r=t*1024*1024;return s.size<=r},Lr=s=>{const t=["text/csv","application/vnd.ms-excel","text/tab-separated-values"],r=[".csv",".tsv",".txt"];return t.includes(s.type)||r.some(a=>s.name.toLowerCase().endsWith(a))},si=()=>[["매물명","매물유형","거래유형","주소","상세주소","면적","층","총층수","방수","화장실수","주차","엘리베이터","매매가","보증금","월세","임대인명","연락처","퇴실일","설명"],["강남 신축 아파트","아파트","전세","서울시 강남구 역삼동","123-45","84.5","15","25","3","2","있음","있음","","50000","","홍길동","010-1234-5678","2024-12-31","역세권 3분거리 신축아파트"]].map(r=>r.map(a=>`"${a}"`).join(",")).join(`
`),ti=Object.freeze(Object.defineProperty({__proto__:null,formatAsCSV:Tr,formatAsJSON:Mr,generateTemplateCSV:si,importProperties:Ir,validateFileFormat:Lr,validateFileSize:Dr},Symbol.toStringTag,{value:"Module"})),ri=["title","type","transaction_type","address","area","floor","total_floors","rooms","bathrooms"],ai={매물명:"title",제목:"title",매물유형:"type",유형:"type",거래유형:"transaction_type",거래:"transaction_type",주소:"address",상세주소:"detailed_address",면적:"area",전용면적:"area",층:"floor",해당층:"floor",총층수:"total_floors",전체층:"total_floors",방수:"rooms",방:"rooms",화장실수:"bathrooms",화장실:"bathrooms",주차:"parking",주차가능:"parking",엘리베이터:"elevator",엘베:"elevator",매매가:"price",가격:"price",보증금:"deposit",월세:"monthly_rent",월임대료:"monthly_rent",임대인명:"landlord_name",임대인:"landlord_name",연락처:"landlord_phone",전화번호:"landlord_phone",퇴실일:"exit_date",퇴실날짜:"exit_date",설명:"description",비고:"description"},$t=["아파트","오피스텔","원룸","빌라","단독주택","상가","사무실","기타"],At=["매매","전세","월세","단기임대"],li=({isOpen:s,onClose:t,onImportComplete:r})=>{var O;const{user:a}=oe();let l=a!=null&&a.id?{id:a.id,name:"PropertyDesk"}:null,n=!1;try{const _=es();(O=_==null?void 0:_.tenant)!=null&&O.id&&(l=_.tenant,n=(_==null?void 0:_.isLoading)||!1)}catch(_){console.log("TenantContext 오류, 사용자 ID를 테넌트 ID로 사용:",_)}const i=m.useRef(null),[o,c]=m.useState("upload"),[d,h]=m.useState(null),[u,f]=m.useState([]),[j,g]=m.useState(null),[N,b]=m.useState(!1),[x,p]=m.useState(null),v=_=>{var w;const P=(w=_.target.files)==null?void 0:w[0];if(P){if(!Dr(P,10)){p("파일 크기는 10MB를 초과할 수 없습니다.");return}if(!Lr(P)){p("CSV 파일만 지원합니다.");return}h(P),p(null),y(P)}},y=async _=>{b(!0),p(null);try{const P=await _.text();let w;if(_.name.endsWith(".csv"))w=k(P);else if(_.name.endsWith(".tsv")||_.name.endsWith(".txt"))w=L(P);else throw new Error("지원하지 않는 파일 형식입니다. CSV 파일만 지원합니다.");if(w.length<2)throw new Error("데이터가 부족합니다. 헤더와 최소 1개의 데이터 행이 필요합니다.");const B=w[0].map(se=>se.trim()),H=w.slice(1);console.log("📊 파싱된 헤더:",B),console.log("📊 데이터 행 수:",H.length);const K=H.map((se,C)=>z(se,B,C+2));f(K),c("preview")}catch(P){const w=P instanceof Error?P.message:"파일 파싱 중 오류가 발생했습니다.";p(w),console.error("파일 파싱 오류:",P)}finally{b(!1)}},k=_=>{const P=[],w=_.split(/\r?\n/);for(const B of w)if(B.trim()){const H=[];let K="",se=!1;for(let C=0;C<B.length;C++){const D=B[C];D==='"'?se=!se:D===","&&!se?(H.push(K.trim()),K=""):K+=D}H.push(K.trim()),P.push(H)}return P},L=_=>_.split(/\r?\n/).filter(P=>P.trim()).map(P=>P.split("	").map(w=>w.trim())),z=(_,P,w)=>{const B=[],H={status:"거래중"};return P.forEach((K,se)=>{var Z;const C=(Z=_[se])==null?void 0:Z.trim();if(!C)return;const D=ai[K];if(D)try{switch(D){case"type":$t.includes(C)?H.type=C:B.push(`매물유형 '${C}'는 유효하지 않습니다. (${$t.join(", ")})`);break;case"transaction_type":At.includes(C)?H.transaction_type=C:B.push(`거래유형 '${C}'는 유효하지 않습니다. (${At.join(", ")})`);break;case"area":case"floor":case"total_floors":case"rooms":case"bathrooms":case"price":case"deposit":case"monthly_rent":const J=parseFloat(C.replace(/[,\s]/g,""));!isNaN(J)&&J>0?H[D]=J:B.push(`${K} '${C}'는 유효한 숫자가 아닙니다.`);break;case"parking":case"elevator":const W=["true","1","yes","y","있음","가능","o","O"].includes(C.toLowerCase());H[D]=W;break;case"exit_date":R(C)?H.exit_date=q(C):B.push(`퇴실일 '${C}'는 유효한 날짜 형식이 아닙니다. (YYYY-MM-DD 형식 사용)`);break;default:H[D]=C;break}}catch(J){B.push(`${K} 처리 중 오류: ${J}`)}}),ri.forEach(K=>{H[K]||B.push(`필수 필드 '${K}'가 누락되었습니다.`)}),{row:w,data:H,errors:B}},R=_=>{const P=new Date(_);return!isNaN(P.getTime())},q=_=>new Date(_).toISOString().split("T")[0],$=async()=>{if(n){console.log("테넌트 로딩 중입니다.");return}if(!(l!=null&&l.id)||!(a!=null&&a.id)){p("인증 정보가 없습니다.");return}c("importing"),b(!0);try{const _=u.filter(w=>w.errors.length===0).map(w=>w.data),P=await Ir(_,l.id,a.id);g(P),c("complete"),P.importedProperties.length>0&&r(P.importedProperties)}catch(_){const P=_ instanceof Error?_.message:"가져오기 중 오류가 발생했습니다.";p(P),console.error("Import error:",_)}finally{b(!1)}},te=()=>{Br(async()=>{const{generateTemplateCSV:_}=await Promise.resolve().then(()=>ti);return{generateTemplateCSV:_}},void 0).then(({generateTemplateCSV:_})=>{const P=_(),w=new Blob(["\uFEFF"+P],{type:"text/csv;charset=utf-8;"}),B=document.createElement("a");B.href=URL.createObjectURL(w),B.download="매물_가져오기_템플릿.csv",B.click(),URL.revokeObjectURL(B.href)})},ee=()=>{c("upload"),h(null),f([]),g(null),p(null),b(!1),i.current&&(i.current.value="")},G=()=>{ee(),t()},Y=()=>{switch(o){case"upload":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Ps,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"매물 데이터 가져오기"}),e.jsx("p",{className:"text-gray-600",children:"CSV 파일을 업로드하여 여러 매물을 한번에 등록하세요"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[e.jsx("input",{ref:i,type:"file",accept:".csv,.tsv,.txt",onChange:v,className:"hidden"}),e.jsx(U,{onClick:()=>{var w;return(w=i.current)==null?void 0:w.click()},leftIcon:e.jsx(Es,{size:20}),size:"lg",disabled:N,children:N?"파일 분석 중...":"CSV 파일 선택"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"CSV 파일만 지원합니다 (최대 10MB)"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(U,{variant:"outline",onClick:te,leftIcon:e.jsx(De,{size:18}),children:"템플릿 다운로드"})})]}),d&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Es,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:d.name}),e.jsxs("p",{className:"text-sm text-blue-600",children:["크기: ",(d.size/1024).toFixed(1),"KB"]})]})]})}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(qe,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:"오류"}),e.jsx("p",{className:"text-sm text-red-600",children:x})]})]})}),N&&e.jsx("div",{className:"text-center py-4",children:e.jsx(Ae,{size:"md",text:"파일을 분석하고 있습니다..."})})]});case"preview":const _=u.filter(w=>w.errors.length===0),P=u.filter(w=>w.errors.length>0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(cs,{className:"mx-auto h-12 w-12 text-green-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"데이터 미리보기"}),e.jsxs("p",{className:"text-gray-600",children:[u.length,"개 행을 분석했습니다"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.length}),e.jsx("div",{className:"text-sm text-green-800",children:"가져올 수 있는 매물"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:P.length}),e.jsx("div",{className:"text-sm text-red-800",children:"오류가 있는 매물"})]})]}),P.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-red-900",children:"오류 내역:"}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-40 overflow-y-auto",children:[P.slice(0,10).map((w,B)=>e.jsxs("div",{className:"text-sm text-red-800 mb-2",children:[e.jsxs("strong",{children:["행 ",w.row,":"]})," ",w.errors.join(", ")]},B)),P.length>10&&e.jsxs("div",{className:"text-sm text-red-600",children:["...외 ",P.length-10,"개 오류"]})]})]}),e.jsxs("div",{className:"flex justify-between space-x-3",children:[e.jsx(U,{variant:"outline",onClick:()=>c("upload"),children:"다시 선택"}),e.jsx(U,{onClick:$,disabled:_.length===0||N||n,leftIcon:N?e.jsx(Ae,{size:"sm"}):e.jsx(Ps,{size:18}),children:n?"테넌트 정보 로딩 중...":`${_.length}개 매물 가져오기`})]})]});case"importing":return e.jsxs("div",{className:"space-y-6 text-center py-8",children:[e.jsx(Ae,{size:"lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"매물을 가져오는 중..."}),e.jsx("p",{className:"text-gray-600",children:"잠시만 기다려주세요. 매물 데이터를 처리하고 있습니다."})]})]});case"complete":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(cs,{className:"mx-auto h-12 w-12 text-green-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"가져오기 완료"})]}),j&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.success}),e.jsx("div",{className:"text-sm text-green-800",children:"성공"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:j.failed}),e.jsx("div",{className:"text-sm text-red-800",children:"실패"})]})]}),j.errors.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-red-900",children:"오류 내역:"}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-40 overflow-y-auto",children:[j.errors.slice(0,10).map((w,B)=>e.jsxs("div",{className:"text-sm text-red-800 mb-2",children:[e.jsxs("strong",{children:["행 ",w.row,":"]})," ",w.message]},B)),j.errors.length>10&&e.jsxs("div",{className:"text-sm text-red-600",children:["...외 ",j.errors.length-10,"개 오류"]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(U,{onClick:G,children:"완료"})})]});default:return null}};return e.jsx(Ee,{isOpen:s,onClose:G,title:"데이터 가져오기",size:"lg",children:Y()})},ni={format:"csv",includeFields:["title","type","transaction_type","status","address","area","floor","total_floors","rooms","bathrooms","parking","elevator","price","deposit","monthly_rent","landlord_name","landlord_phone","exit_date","created_at"],dateRange:"all",propertyStatus:"all",propertyType:"all"},ii=[{id:"title",label:"매물명",required:!0},{id:"type",label:"매물유형",required:!0},{id:"transaction_type",label:"거래유형",required:!0},{id:"status",label:"매물상태",required:!1},{id:"address",label:"주소",required:!0},{id:"detailed_address",label:"상세주소",required:!1},{id:"area",label:"면적(m²)",required:!0},{id:"floor",label:"층",required:!0},{id:"total_floors",label:"총층수",required:!0},{id:"rooms",label:"방수",required:!0},{id:"bathrooms",label:"화장실수",required:!0},{id:"parking",label:"주차가능",required:!1},{id:"elevator",label:"엘리베이터",required:!1},{id:"price",label:"매매가(만원)",required:!1},{id:"deposit",label:"보증금(만원)",required:!1},{id:"monthly_rent",label:"월세(만원)",required:!1},{id:"maintenance_fee",label:"관리비(만원)",required:!1},{id:"landlord_name",label:"임대인명",required:!1},{id:"landlord_phone",label:"임대인 연락처",required:!1},{id:"landlord_email",label:"임대인 이메일",required:!1},{id:"exit_date",label:"퇴실날짜",required:!1},{id:"available_from",label:"입주가능일",required:!1},{id:"description",label:"설명",required:!1},{id:"view_count",label:"조회수",required:!1},{id:"inquiry_count",label:"문의수",required:!1},{id:"created_at",label:"등록일",required:!1},{id:"updated_at",label:"수정일",required:!1}],oi=({isOpen:s,onClose:t})=>{var x;const{user:r}=oe();let a=r!=null&&r.id?{id:r.id,name:"PropertyDesk"}:null,l=!1;try{const p=es();(x=p==null?void 0:p.tenant)!=null&&x.id&&(a=p.tenant,l=(p==null?void 0:p.isLoading)||!1)}catch(p){console.log("TenantContext 오류, 사용자 ID를 테넌트 ID로 사용:",p)}const{properties:n}=ps(),[i,o]=m.useState(ni),[c,d]=m.useState(!1),[h,u]=m.useState(null);console.log("DataExportModal - 테넌트 정보:",{tenant:a==null?void 0:a.id,tenantName:a==null?void 0:a.name,tenantLoading:l,isOpen:s,userId:r==null?void 0:r.id});const f=p=>{o(v=>({...v,...p}))},j=()=>n?n.filter(p=>{if(i.propertyStatus!=="all"&&p.status!==i.propertyStatus||i.propertyType!=="all"&&p.type!==i.propertyType)return!1;if(i.dateRange!=="all"){const v=new Date(p.created_at),y=new Date;switch(i.dateRange){case"thisMonth":if(v.getMonth()!==y.getMonth()||v.getFullYear()!==y.getFullYear())return!1;break;case"lastMonth":const k=new Date(y.getFullYear(),y.getMonth()-1);if(v.getMonth()!==k.getMonth()||v.getFullYear()!==k.getFullYear())return!1;break;case"custom":if(i.customDateFrom&&v<new Date(i.customDateFrom)||i.customDateTo&&v>new Date(i.customDateTo+"T23:59:59"))return!1;break}}return!0}):[],g=(p,v,y)=>{const k=new Blob(["\uFEFF"+p],{type:`${y};charset=utf-8;`}),L=document.createElement("a");L.href=URL.createObjectURL(k),L.download=v,L.click(),URL.revokeObjectURL(L.href)},N=async()=>{if(l){console.log("테넌트 로딩 중입니다.");return}if(!(a!=null&&a.id)){console.log("테넌트 정보 확인:",{tenant:a}),u("테넌트 정보가 없습니다. 페이지를 새로고침 후 다시 시도해주세요.");return}d(!0),u(null);try{console.log("내보내기 시작:",{tenant:a==null?void 0:a.id,options:i});const p=j();if(console.log("내보낼 매물 수:",p.length),p.length===0){u("선택한 조건에 맞는 매물이 없습니다. 필터 조건을 확인해보세요.");return}const v=new Date().toISOString().slice(0,19).replace(/[:-]/g,"").replace("T","_");let y,k,L;switch(i.format){case"csv":case"excel":k=Tr(p,i.includeFields),y=`매물데이터_${v}.csv`,L="text/csv";break;case"json":k=Mr(p,i.includeFields),y=`매물데이터_${v}.json`,L="application/json";break;default:throw new Error("지원하지 않는 파일 형식입니다.")}g(k,y,L),setTimeout(()=>{t()},1e3)}catch(p){const v=p instanceof Error?p.message:"내보내기 중 오류가 발생했습니다.";u(v),console.error("Export error:",p)}finally{d(!1)}},b=j();return l?e.jsx(Ee,{isOpen:s,onClose:t,title:"데이터 내보내기",size:"lg",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsx(Ae,{size:"lg"}),e.jsx("p",{className:"text-gray-600",children:"테넌트 정보를 불러오는 중..."})]})}):e.jsx(Ee,{isOpen:s,onClose:t,title:"데이터 내보내기",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(De,{className:"mx-auto h-12 w-12 text-blue-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"매물 데이터 내보내기"}),e.jsx("p",{className:"text-gray-600",children:"필요한 매물 정보를 선택하여 파일로 내보내세요"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"파일 형식"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"csv",label:"CSV",desc:"엑셀에서 열기 가능"},{value:"json",label:"JSON",desc:"프로그래밍용"},{value:"excel",label:"Excel",desc:"마이크로소프트 엑셀"}].map(p=>e.jsxs("button",{onClick:()=>f({format:p.value}),className:`p-3 border-2 rounded-lg text-center transition-all ${i.format===p.value?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"font-medium",children:p.label}),e.jsx("div",{className:"text-xs text-gray-500",children:p.desc})]},p.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"날짜 범위"}),e.jsx(he,{value:i.dateRange,onChange:p=>f({dateRange:p.target.value}),options:[{value:"all",label:"전체 기간"},{value:"thisMonth",label:"이번 달"},{value:"lastMonth",label:"지난 달"},{value:"custom",label:"사용자 지정"}]}),i.dateRange==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"시작일"}),e.jsx("input",{type:"date",value:i.customDateFrom||"",onChange:p=>f({customDateFrom:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"종료일"}),e.jsx("input",{type:"date",value:i.customDateTo||"",onChange:p=>f({customDateTo:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"매물 상태"}),e.jsx(he,{value:i.propertyStatus,onChange:p=>f({propertyStatus:p.target.value}),options:[{value:"all",label:"전체"},{value:"거래중",label:"거래중"},{value:"거래완료",label:"거래완료"}]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"매물 유형"}),e.jsx(he,{value:i.propertyType,onChange:p=>f({propertyType:p.target.value}),options:[{value:"all",label:"전체"},{value:"아파트",label:"아파트"},{value:"오피스텔",label:"오피스텔"},{value:"원룸",label:"원룸"},{value:"빌라",label:"빌라"},{value:"기타",label:"기타"}]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900",children:"포함할 정보 선택"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-48 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ii.map(p=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.includeFields.includes(p.id),disabled:p.required,onChange:v=>{v.target.checked?f({includeFields:[...i.includeFields,p.id]}):f({includeFields:i.includeFields.filter(y=>y!==p.id)})},className:"rounded text-blue-600"}),e.jsxs("span",{className:`text-sm ${p.required?"font-medium text-gray-900":"text-gray-700"}`,children:[p.label,p.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]},p.id))})}),e.jsx("p",{className:"text-xs text-gray-500",children:"* 표시는 필수 필드로 항상 포함됩니다"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Es,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"내보내기 미리보기"}),e.jsxs("div",{className:"text-sm text-blue-800 mt-1 space-y-1",children:[e.jsxs("p",{children:["• 총 매물 수: ",b.length,"개"]}),e.jsxs("p",{children:["• 선택된 필드: ",i.includeFields.length,"개"]}),e.jsxs("p",{children:["• 파일 형식: ",i.format.toUpperCase()]})]})]})]})}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(qe,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:"오류"}),e.jsx("p",{className:"text-sm text-red-600",children:h})]})]})})]}),e.jsxs("div",{className:"flex justify-between space-x-3",children:[e.jsx(U,{variant:"outline",onClick:t,children:"취소"}),e.jsx(U,{onClick:N,disabled:c||l||!(a!=null&&a.id)||b.length===0,leftIcon:c?e.jsx(Ae,{size:"sm"}):e.jsx(De,{size:18}),children:c?"내보내는 중...":l?"테넌트 정보 로딩 중...":a!=null&&a.id?`${b.length}개 매물 내보내기`:"테넌트 정보 없음"})]})]})})},zr=()=>{const{tenant:s}=es(),{refreshProperties:t}=ps(),[r,a]=m.useState("general"),[l,n]=m.useState(!1),[i,o]=m.useState(!1),[c,d]=m.useState(!1),[h,u]=m.useState(!1),f=[{id:"general",label:"일반 설정",icon:it},{id:"billing",label:"결제 및 요금제",icon:Ss},{id:"branding",label:"브랜딩",icon:Zr},{id:"notifications",label:"알림 설정",icon:Ge}],j=[{value:"starter",label:"스타터 (19,000원/월)",price:19e3},{value:"professional",label:"프로페셔널 (39,000원/월)",price:39e3},{value:"business",label:"비즈니스 (69,000원/월)",price:69e3},{value:"enterprise",label:"엔터프라이즈 (99,000원/월)",price:99e3}],g=async()=>{if(!(s!=null&&s.id)){alert("테넌트 정보가 없습니다.");return}try{o(!0),console.log("🧹 샘플 데이터 초기화 시작:",s.id),console.log("🗑️ 로컬 저장소 상태 정보 삭제 중..."),Object.keys(localStorage).forEach(k=>{k.startsWith("property_status_")&&(localStorage.removeItem(k),console.log("삭제된 키:",k))});const{data:p,error:v}=await E.from("properties").select("id").eq("tenant_id",s.id);if(v)throw console.error("❌ 매물 조회 실패:",v),new Error(`매물 조회 실패: ${v.message}`);if(console.log("📊 삭제할 매물 개수:",(p==null?void 0:p.length)||0),!p||p.length===0){alert("삭제할 매물이 없습니다."),n(!1);return}console.log("🗑️ Supabase에서 매물 데이터 삭제 중...");const{error:y}=await E.from("properties").delete().eq("tenant_id",s.id);if(y)throw console.error("❌ 매물 삭제 실패:",y),new Error(`매물 삭제 실패: ${y.message}`);console.log("✅ 매물 데이터 삭제 완료"),console.log("🔄 데이터 새로고침 중..."),await t(),n(!1),alert(`✅ ${p.length}개의 샘플 매물이 성공적으로 삭제되었습니다!`)}catch(x){console.error("💥 초기화 실패:",x);const p=x instanceof Error?x.message:"알 수 없는 오류가 발생했습니다.";alert(`❌ 데이터 초기화 실패: ${p}`)}finally{o(!1)}},N=x=>{console.log("가져오기 완료:",x.length,"개 매물"),t()},b=()=>{switch(r){case"general":return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 sm:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"기본 정보"}),e.jsx(U,{leftIcon:e.jsx(is,{size:18}),size:"lg",className:"h-12 px-6 text-base",children:"변경사항 저장"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-800 mb-3",children:"회사명"}),e.jsx(A,{defaultValue:(s==null?void 0:s.name)||"PropertyDesk",placeholder:"회사명을 입력하세요",className:"text-base h-12 bg-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-800 mb-3",children:"도메인 주소"}),e.jsx(A,{defaultValue:(s==null?void 0:s.slug)||"propertydesk",placeholder:"도메인 주소",readOnly:!0,className:"bg-gray-100 text-base h-12"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-800 mb-3",children:"회사 소개"}),e.jsx("textarea",{className:"w-full p-4 sm:p-5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none text-base bg-white",rows:4,placeholder:"회사 소개를 입력하세요",defaultValue:"부동산 전문 관리 솔루션 PropertyDesk입니다."})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-800 mb-3",children:"대표 전화번호"}),e.jsx(A,{placeholder:"02-1234-5678",defaultValue:"02-1234-5678",className:"text-base h-12 bg-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-800 mb-3",children:"대표 이메일"}),e.jsx(A,{type:"email",placeholder:"contact@propertydesk.com",defaultValue:"contact@propertydesk.com",className:"text-base h-12 bg-white"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 sm:p-8 border border-blue-200",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6",children:"앱 설치"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 bg-white rounded-lg p-6 border border-blue-300",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-gray-900 mb-3",children:"PC에 바로가기 만들기"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-700 leading-relaxed",children:"리체 매물장을 PC 바탕화면에 설치하여 더 편리하게 사용하세요."})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Xl,{})})]})}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border border-blue-300",children:[e.jsx("h4",{className:"font-bold text-lg text-gray-900 mb-4",children:"💡 PWA 설치 혜택"}),e.jsxs("ul",{className:"space-y-3 text-base text-gray-700",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"브라우저 없이 독립 실행"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"더 빠른 로딩 속도"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"오프라인 일부 기능 사용"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"푸시 알림 수신 가능"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 sm:p-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6",children:"데이터 관리"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(U,{variant:"outline",leftIcon:e.jsx(Ps,{size:20}),size:"lg",onClick:()=>d(!0),className:"h-16 text-base font-semibold bg-white hover:bg-green-50 border-2 hover:border-green-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{children:"데이터 가져오기"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Excel, CSV 파일 지원"})]})}),e.jsx(U,{variant:"outline",leftIcon:e.jsx(De,{size:20}),size:"lg",onClick:()=>u(!0),className:"h-16 text-base font-semibold bg-white hover:bg-blue-50 border-2 hover:border-blue-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{children:"데이터 내보내기"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"백업 및 분석용"})]})}),e.jsx(U,{variant:"destructive",leftIcon:e.jsx(js,{size:20}),onClick:()=>n(!0),size:"lg",className:"h-16 text-base font-semibold",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{children:"샘플 데이터 초기화"}),e.jsx("div",{className:"text-xs text-red-100 mt-1",children:"복구 불가능"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-blue-100 border-l-4 border-blue-500 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-600 text-2xl",children:"💡"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg text-blue-900 mb-2",children:"샘플 데이터 초기화"}),e.jsx("p",{className:"text-base text-blue-800 leading-relaxed",children:"회원가입 시 제공된 샘플 매물 데이터를 모두 삭제하여 깨끗한 상태에서 시작할 수 있습니다."})]})]})}),e.jsx("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-yellow-600 text-2xl",children:"⚠️"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg text-yellow-900 mb-2",children:"중요 주의사항"}),e.jsx("p",{className:"text-base text-yellow-800 leading-relaxed",children:"초기화된 데이터는 복구할 수 없습니다. 실제 매물 데이터를 등록하기 전에 진행해주세요."})]})]})})]})]})]})]});case"billing":return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 via-blue-50 to-indigo-50 rounded-xl p-6 sm:p-8 border border-primary-200",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6",children:"현재 플랜"}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 border border-primary-300 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:[s.plan.charAt(0).toUpperCase()+s.plan.slice(1)," ","플랜"]}),e.jsxs("p",{className:"text-base sm:text-lg text-gray-700",children:["매물 ",s.limits.max_properties,"개 · 팀원"," ",s.limits.max_users,"명 · 스토리지"," ",s.limits.max_storage_gb,"GB"]})]}),e.jsxs("div",{className:"text-left lg:text-right",children:[e.jsx(Se,{variant:"tenant",size:"lg",className:"text-base px-4 py-2",children:s.status==="trial"?"체험 중":"활성 상태"}),s.trial_ends_at&&e.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mt-2",children:["체험 종료:"," ",new Date(s.trial_ends_at).toLocaleDateString()]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-6 sm:p-8 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-primary-600 mb-2",children:"156"}),e.jsx("p",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-1",children:"사용 중인 매물"}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-500",children:["/ ",s.limits.max_properties,"개 제한"]}),e.jsx("div",{className:"mt-3 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${156/s.limits.max_properties*100}%`}})})]}),e.jsxs("div",{className:"text-center p-6 sm:p-8 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-green-600 mb-2",children:"8"}),e.jsx("p",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-1",children:"팀원 수"}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-500",children:["/ ",s.limits.max_users,"명 제한"]}),e.jsx("div",{className:"mt-3 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${8/s.limits.max_users*100}%`}})})]}),e.jsxs("div",{className:"text-center p-6 sm:p-8 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-blue-600 mb-2",children:"2.3"}),e.jsx("p",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-1",children:"스토리지 사용량"}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-500",children:["/ ",s.limits.max_storage_gb,"GB 제한"]}),e.jsx("div",{className:"mt-3 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${2.3/s.limits.max_storage_gb*100}%`}})})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 sm:p-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6",children:"플랜 변경"}),e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:j.map(x=>e.jsxs("div",{className:`p-6 sm:p-8 border-2 rounded-xl cursor-pointer transition-all duration-200 bg-white ${(s==null?void 0:s.plan)===x.value?"border-primary-500 shadow-lg ring-2 ring-primary-100":"border-gray-200 hover:border-primary-300 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-xl sm:text-2xl text-gray-900",children:x.label.split(" (")[0]}),(s==null?void 0:s.plan)===x.value&&e.jsx(Se,{variant:"primary",size:"lg",className:"text-sm px-3 py-1",children:"현재 플랜"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("span",{className:"text-3xl sm:text-4xl font-bold text-gray-900",children:[x.price.toLocaleString(),"원"]}),e.jsx("span",{className:"text-lg text-gray-500 ml-1",children:"/월"})]}),(s==null?void 0:s.plan)!==x.value&&e.jsx(U,{size:"lg",variant:"outline",className:"w-full h-12 text-base font-semibold",children:"이 플랜으로 변경"})]},x.value))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 sm:p-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6",children:"결제 정보"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white p-6 sm:p-8 rounded-lg border border-gray-200 shadow-sm",children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded flex items-center justify-center",children:e.jsx(Ss,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[e.jsx("span",{className:"font-bold text-lg text-gray-900",children:"등록된 카드"}),e.jsx(Se,{variant:"success",size:"sm",className:"text-sm",children:"활성"})]}),e.jsx("p",{className:"text-gray-600 text-lg font-mono",children:"•••• •••• •••• 4567"}),e.jsx("p",{className:"text-base text-gray-500",children:"만료일: 12/25"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(U,{variant:"outline",size:"lg",className:"h-14 text-base font-semibold bg-white hover:bg-blue-50 border-2 hover:border-blue-300",children:[e.jsx(Ss,{size:20,className:"mr-2"}),"결제 수단 변경"]}),e.jsxs(U,{variant:"outline",size:"lg",className:"h-14 text-base font-semibold bg-white hover:bg-green-50 border-2 hover:border-green-300",children:[e.jsx(De,{size:20,className:"mr-2"}),"결제 내역 보기"]})]})]})]})]});case"branding":return e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 sm:p-8 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"브랜드 설정"}),e.jsx(U,{leftIcon:e.jsx(is,{size:20}),size:"lg",className:"h-12 px-6 text-base",children:"브랜드 설정 저장"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 sm:p-8 border border-purple-200 shadow-sm",children:[e.jsx("label",{className:"block text-lg sm:text-xl font-bold text-gray-800 mb-4",children:"로고 업로드"}),e.jsxs("div",{className:"border-3 border-dashed border-purple-300 rounded-xl p-8 sm:p-10 text-center hover:border-purple-400 transition-colors cursor-pointer",children:[e.jsx(Ps,{className:"mx-auto h-16 w-16 sm:h-20 sm:w-20 text-purple-400 mb-4"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-700 font-medium mb-2",children:"이미지를 드래그하거나 클릭하여 업로드"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500",children:"PNG, JPG 파일 / 최대 2MB"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 sm:p-8 border border-purple-200 shadow-sm",children:[e.jsx("label",{className:"block text-lg sm:text-xl font-bold text-gray-800 mb-4",children:"브랜드 컬러"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-700 mb-3",children:"주 컬러"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"color",defaultValue:"#3b82f6",className:"w-16 h-16 sm:w-20 sm:h-20 rounded-lg border-2 border-gray-300 cursor-pointer"}),e.jsx(A,{defaultValue:"#3b82f6",placeholder:"#3b82f6",className:"flex-1 text-base h-12 bg-gray-50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-700 mb-3",children:"보조 컬러"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"color",defaultValue:"#1d4ed8",className:"w-16 h-16 sm:w-20 sm:h-20 rounded-lg border-2 border-gray-300 cursor-pointer"}),e.jsx(A,{defaultValue:"#1d4ed8",placeholder:"#1d4ed8",className:"flex-1 text-base h-12 bg-gray-50"})]})]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg p-6 sm:p-8 border border-purple-200 shadow-sm",children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-gray-900 mb-4",children:"브랜드 미리보기"}),e.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-blue-50 rounded-lg p-6 sm:p-8 border border-primary-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-primary-600 rounded-full flex items-center justify-center text-white font-bold text-xl sm:text-2xl shadow-lg",children:"P"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-xl sm:text-2xl text-gray-900",children:"PropertyDesk"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600 mt-1",children:"새로운 브랜드 스타일 적용"})]})]})})]})]})});case"notifications":return e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 rounded-xl p-6 sm:p-8 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"알림 설정"}),e.jsx(U,{leftIcon:e.jsx(is,{size:20}),size:"lg",className:"h-12 px-6 text-base",children:"알림 설정 저장"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 sm:p-8 border border-green-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ge,{className:"w-6 h-6 text-green-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-gray-900 mb-1",children:"새로운 매물 등록"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600",children:"매물이 새로 등록될 때 알림을 받습니다"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-base font-medium",children:"이메일"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-base font-medium",children:"앱 알림"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 sm:p-8 border border-green-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ge,{className:"w-6 h-6 text-blue-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-gray-900 mb-1",children:"계약 완료"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600",children:"계약이 완료될 때 알림을 받습니다"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-base font-medium",children:"이메일"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-base font-medium",children:"앱 알림"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 sm:p-8 border border-green-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ge,{className:"w-6 h-6 text-purple-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-gray-900 mb-1",children:"팀원 초대"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600",children:"새로운 팀원이 초대될 때 알림을 받습니다"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-base font-medium",children:"이메일"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-base font-medium",children:"앱 알림"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 sm:p-8 border border-green-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ge,{className:"w-6 h-6 text-orange-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-gray-900 mb-1",children:"시스템 업데이트"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600",children:"시스템 업데이트 및 유지보수 알림을 받습니다"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-base font-medium",children:"이메일"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-base font-medium",children:"앱 알림"})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 sm:p-8 border border-green-200 shadow-sm",children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-gray-900 mb-6",children:"알림 시간 설정"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-800 mb-3",children:"알림 시작 시간"}),e.jsx(A,{type:"time",defaultValue:"09:00",className:"text-base h-14 bg-gray-50 text-lg font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-800 mb-3",children:"알림 종료 시간"}),e.jsx(A,{type:"time",defaultValue:"18:00",className:"text-base h-14 bg-gray-50 text-lg font-mono"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-base text-blue-800",children:["💡 ",e.jsx("strong",{children:"알림 시간 안내:"})," 설정된 시간 외에는 긴급하지 않은 알림이 발송되지 않습니다."]})})]})]})]})});default:return null}};return e.jsxs("div",{className:"max-w-none space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 sm:p-8 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-3 lg:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"설정"}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600 mt-2",children:"시스템 설정을 관리하고 커스터마이징할 수 있습니다"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Se,{variant:"success",size:"lg",className:"text-sm",children:(s==null?void 0:s.status)==="trial"?"체험 중":"활성 상태"}),e.jsxs(Se,{variant:"primary",size:"lg",className:"text-sm",children:[(s==null?void 0:s.plan)||"Professional"," 플랜"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex overflow-x-auto px-6 sm:px-8 scrollbar-hide",children:f.map(x=>{const p=x.icon;return e.jsxs("button",{onClick:()=>a(x.id),className:`flex items-center space-x-2 py-5 px-4 sm:px-6 border-b-2 font-medium text-base sm:text-lg transition-colors whitespace-nowrap min-w-max touch-target ${r===x.id?"border-primary-500 text-primary-600 bg-primary-50":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(p,{size:22,className:"flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline",children:x.label}),e.jsx("span",{className:"sm:hidden text-sm font-medium",children:x.label.split(" ")[0]})]},x.id)})})}),e.jsx("div",{className:"px-6 sm:px-8 py-6 sm:py-8",children:b()})]}),e.jsx(Ee,{isOpen:l,onClose:()=>n(!1),title:"샘플 데이터 초기화",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(js,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"정말로 샘플 데이터를 초기화하시겠습니까?"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[e.jsx("p",{children:"이 작업을 수행하면:"}),e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"모든 샘플 매물 데이터가 삭제됩니다"}),e.jsx("li",{children:"매물 상태 정보가 초기화됩니다"}),e.jsx("li",{children:"삭제된 데이터는 복구할 수 없습니다"})]})]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"참고:"})," 초기화 후에는 깨끗한 상태에서 실제 매물 데이터를 등록할 수 있습니다."]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(U,{variant:"outline",onClick:()=>n(!1),disabled:i,children:"취소"}),e.jsx(U,{variant:"destructive",onClick:g,disabled:i,leftIcon:i?e.jsx(js,{size:16,className:"animate-spin"}):e.jsx(js,{size:16}),children:i?"초기화 중...":"초기화 실행"})]})]})}),e.jsx(li,{isOpen:c,onClose:()=>d(!1),onImportComplete:N}),e.jsx(oi,{isOpen:h,onClose:()=>u(!1)})]})},$r=()=>{const[s,t]=m.useState("overview"),r=[{id:"overview",title:"개요",icon:Ie},{id:"dashboard",title:"대시보드",icon:ws},{id:"properties",title:"매물 관리",icon:As},{id:"team",title:"팀 관리",icon:ke},{id:"settings",title:"설정",icon:Me},{id:"tips",title:"사용 팁",icon:ns}],a=()=>{switch(s){case"overview":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 sm:p-6 border border-blue-200",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4",children:"리체 매물장에 오신 것을 환영합니다! 🏠"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-700 mb-4",children:"리체 매물장은 부동산 매물을 효율적으로 관리할 수 있는 전문 SaaS 플랫폼입니다. 매물 등록부터 계약 관리까지 모든 업무를 하나의 시스템에서 처리할 수 있습니다."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white p-4 sm:p-5 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(As,{className:"w-5 h-5 text-blue-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-sm sm:text-base text-gray-900",children:"매물 관리"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"매물 등록, 수정, 삭제 및 상태 관리"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(ws,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"실시간 통계"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"매물 현황 및 트렌드 분석"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-purple-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(ke,{className:"w-5 h-5 text-purple-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"팀 협업"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"팀원 초대 및 권한 관리"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Bs,{className:"w-5 h-5 text-orange-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"PWA 지원"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"PC 앱으로 설치하여 사용"})]})]})]}),e.jsxs(le,{children:[e.jsx(ve,{children:e.jsxs(Ne,{className:"flex items-center",children:[e.jsx(ns,{className:"w-5 h-5 mr-2"}),"주요 특징"]})}),e.jsx(xe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"🎯 핵심 기능"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:"• 매물 등록 및 관리"}),e.jsx("li",{children:"• 실시간 대시보드"}),e.jsx("li",{children:"• 통계 및 차트 분석"}),e.jsx("li",{children:"• 팀원 관리 및 권한 설정"}),e.jsx("li",{children:"• 데이터 가져오기/내보내기"}),e.jsx("li",{children:"• PWA 지원 (앱 설치 가능)"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"💡 편의 기능"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:"• 샘플 데이터 자동 입력"}),e.jsx("li",{children:"• 다양한 검색 및 필터"}),e.jsx("li",{children:"• 카드형/리스트형 보기 전환"}),e.jsx("li",{children:"• 반응형 디자인 (모바일 지원)"}),e.jsx("li",{children:"• 브랜딩 커스터마이징"}),e.jsx("li",{children:"• 알림 설정"})]})]})]})})]})]});case"dashboard":return e.jsx("div",{className:"space-y-6",children:e.jsxs(le,{children:[e.jsx(ve,{children:e.jsxs(Ne,{className:"flex items-center",children:[e.jsx(ws,{className:"w-5 h-5 mr-2"}),"대시보드 사용법"]})}),e.jsxs(xe,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"📊 통계 카드"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"총 매물, 활성 매물, 팀원 수, 이번 달 등록 매물 수를 한눈에 확인할 수 있습니다."}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"text-blue-600 font-bold",children:"156"}),e.jsx("div",{className:"text-xs text-gray-500",children:"총 매물"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"text-green-600 font-bold",children:"142"}),e.jsx("div",{className:"text-xs text-gray-500",children:"활성 매물"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"text-purple-600 font-bold",children:"8"}),e.jsx("div",{className:"text-xs text-gray-500",children:"팀원"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border text-center",children:[e.jsx("div",{className:"text-orange-600 font-bold",children:"23"}),e.jsx("div",{className:"text-xs text-gray-500",children:"이번 달"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"📈 차트 분석"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"매물 트렌드와 유형별 분포를 시각적으로 확인할 수 있습니다."}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"매물 트렌드 차트"}),": 월별 매물 등록 추이"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"매물 유형 차트"}),": 아파트, 오피스텔, 원룸, 빌라 비율"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"🏠 최근 등록 매물"}),e.jsx("p",{className:"text-sm text-gray-600",children:"최근에 등록된 매물 4개를 카드 형태로 보여줍니다. 매물 카드를 클릭하면 상세 정보를 확인하고 편집/삭제할 수 있습니다."})]})]})]})});case"properties":return e.jsx("div",{className:"space-y-6",children:e.jsxs(le,{children:[e.jsx(ve,{children:e.jsxs(Ne,{className:"flex items-center",children:[e.jsx(As,{className:"w-5 h-5 mr-2"}),"매물 관리 사용법"]})}),e.jsxs(xe,{className:"space-y-6",children:[e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(ds,{className:"w-4 h-4 mr-2 text-blue-600"}),"매물 등록하기"]}),e.jsxs("ol",{className:"text-sm text-gray-600 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:'우상단 "매물 등록" 버튼 클릭'}),e.jsx("li",{children:"기본 정보 입력 (제목, 주소, 유형, 거래유형)"}),e.jsx("li",{children:"상세 정보 입력 (면적, 층수, 룸 구조)"}),e.jsx("li",{children:"가격 정보 입력 (매매가, 전세금, 월세)"}),e.jsx("li",{children:"임대인 정보 및 기타 옵션 설정"}),e.jsx("li",{children:'"매물 등록" 버튼으로 완료'})]}),e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-xs text-blue-700",children:["💡 ",e.jsx("strong",{children:"팁:"}),' "샘플 데이터 입력" 버튼을 사용하면 예시 데이터가 자동으로 입력됩니다.']})]}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(os,{className:"w-4 h-4 mr-2 text-green-600"}),"검색 및 필터링"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"검색:"})," 매물명이나 주소로 실시간 검색 가능"]}),e.jsx("p",{children:e.jsx("strong",{children:"필터:"})}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:"• 거래유형: 매매, 전세, 월세"}),e.jsx("li",{children:"• 매물유형: 아파트, 오피스텔, 원룸, 빌라"}),e.jsx("li",{children:"• 상태: 거래중, 거래완료"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(Cs,{className:"w-4 h-4 mr-2 text-purple-600"}),"보기 모드 전환"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"flex items-center mb-1",children:[e.jsx(Cs,{className:"w-3 h-3 mr-1"}),e.jsx("strong",{children:"카드형 보기"})]}),e.jsx("p",{children:"매물을 카드 형태로 시각적으로 표시"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"flex items-center mb-1",children:[e.jsx(Vt,{className:"w-3 h-3 mr-1"}),e.jsx("strong",{children:"리스트형 보기"})]}),e.jsx("p",{children:"매물을 테이블 형태로 간략하게 표시"})]})]})]}),e.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(ms,{className:"w-4 h-4 mr-2 text-orange-600"}),"매물 편집 및 삭제"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"상세보기:"})," 매물 카드 클릭 → 상세 정보 모달 표시"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"편집:"})," 상세보기 모달에서 편집 버튼 클릭"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"삭제:"})," 상세보기 모달에서 삭제 버튼 클릭 (확인 필요)"]})]}),e.jsxs("div",{className:"mt-2 p-2 bg-orange-50 rounded text-xs text-orange-700",children:["⚠️ ",e.jsx("strong",{children:"주의:"})," 삭제된 매물은 복구할 수 없습니다."]})]})]})]})});case"team":return e.jsx("div",{className:"space-y-6",children:e.jsxs(le,{children:[e.jsx(ve,{children:e.jsxs(Ne,{className:"flex items-center",children:[e.jsx(ke,{className:"w-5 h-5 mr-2"}),"팀 관리 사용법"]})}),e.jsxs(xe,{className:"space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"🚧 개발 예정:"})," 팀 관리 기능은 현재 개발 중입니다. 향후 업데이트를 통해 팀원 초대, 권한 관리, 역할 설정 등의 기능을 제공할 예정입니다."]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"예정된 기능:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:"• 팀원 초대 및 관리"}),e.jsx("li",{children:"• 권한 설정 (관리자, 일반 사용자)"}),e.jsx("li",{children:"• 역할별 접근 제어"}),e.jsx("li",{children:"• 팀원 활동 로그"}),e.jsx("li",{children:"• 협업 도구 연동"})]})]})]})]})});case"settings":return e.jsx("div",{className:"space-y-6",children:e.jsxs(le,{children:[e.jsx(ve,{children:e.jsxs(Ne,{className:"flex items-center",children:[e.jsx(Me,{className:"w-5 h-5 mr-2"}),"설정 사용법"]})}),e.jsxs(xe,{className:"space-y-6",children:[e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(Me,{className:"w-4 h-4 mr-2 text-blue-600"}),"일반 설정"]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"기본 정보:"})," 회사명, 도메인, 연락처 설정"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"PWA 설치:"})," PC에 앱으로 설치하여 사용"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"데이터 관리:"})," 가져오기/내보내기, 샘플 데이터 초기화"]})]})]}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(Ss,{className:"w-4 h-4 mr-2 text-green-600"}),"결제 및 요금제"]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"현재 플랜:"})," 사용 중인 요금제 및 제한사항 확인"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"플랜 변경:"})," 스타터, 프로페셔널, 비즈니스, 엔터프라이즈"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"결제 정보:"})," 결제 수단 관리 및 결제 내역 확인"]})]})]}),e.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(l,{className:"w-4 h-4 mr-2 text-purple-600"}),"브랜딩"]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"로고 업로드:"})," 회사 로고 설정 (PNG, JPG 최대 2MB)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"브랜드 컬러:"})," 주 컬러와 보조 컬러 설정"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"미리보기:"})," 적용된 브랜드 스타일 확인"]})]})]}),e.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2 text-orange-600"}),"알림 설정"]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"이메일 알림:"})," 새 매물, 계약 완료, 팀원 초대 등"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"앱 알림:"})," 실시간 푸시 알림 설정"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"알림 시간:"})," 알림 수신 시간대 설정"]})]})]})]})]})});case"tips":return e.jsx("div",{className:"space-y-6",children:e.jsxs(le,{children:[e.jsx(ve,{children:e.jsxs(Ne,{className:"flex items-center",children:[e.jsx(ns,{className:"w-5 h-5 mr-2"}),"사용 팁 및 노하우"]})}),e.jsxs(xe,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:"💡 효율적인 매물 관리 팁"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"일관된 제목 규칙:"}),' "지역명 + 매물유형 + 특징" 형태로 작성']}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"상세한 주소 입력:"})," 정확한 위치 정보로 고객 신뢰도 향상"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"퇴실예정일 활용:"})," 임차인 관리 및 계약 갱신 준비"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"정기적인 상태 업데이트:"})," 매물 상태를 실시간으로 관리"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:"🚀 생산성 향상 방법"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"PWA 설치:"})," 바탕화면에서 바로 접근하여 업무 효율성 증대"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"샘플 데이터 활용:"})," 새 매물 등록 시 기존 정보를 참고하여 빠른 입력"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"필터 활용:"})," 원하는 조건의 매물을 빠르게 찾기"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"리스트형 보기:"})," 많은 매물을 한 번에 비교할 때 유용"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:"🔧 유용한 단축키 및 기능"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"빠른 검색:"})," 검색창에서 실시간으로 결과 확인"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"카드 클릭:"})," 매물 카드를 클릭하여 바로 상세보기"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"모달에서 편집:"})," 상세보기에서 바로 편집 모드로 전환"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"초기화 기능:"})," 설정에서 샘플 데이터 일괄 삭제"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:"📱 모바일 사용 팁"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"반응형 디자인:"})," 모바일에서도 모든 기능 완벽 지원"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"터치 최적화:"})," 버튼과 링크가 터치하기 쉽게 설계됨"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"빠른 로딩:"})," 모바일 환경에 최적화된 성능"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"홈 화면 추가:"})," 브라우저에서 홈 화면에 추가하여 앱처럼 사용"]})]})]})]})]})});default:return null}},l=Bs;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 sm:p-6 border border-blue-200",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(ns,{className:"w-5 h-5 sm:w-6 sm:h-6 mr-2 sm:mr-3 text-blue-600"}),"사용설명서"]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-2",children:"리체 매물장의 모든 기능과 사용법을 자세히 안내해드립니다."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(le,{children:[e.jsx(ve,{children:e.jsx(Ne,{className:"text-lg",children:"목차"})}),e.jsx(xe,{className:"p-0",children:e.jsx("nav",{className:"space-y-1",children:r.map(n=>{const i=n.icon;return e.jsxs("button",{onClick:()=>t(n.id),className:`w-full flex items-center space-x-3 px-4 py-4 text-sm sm:text-base font-medium transition-colors touch-target ${s===n.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-500":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx(i,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),e.jsx("span",{className:"text-left",children:n.title})]},n.id)})})})]})}),e.jsx("div",{className:"lg:col-span-3",children:a()})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 sm:p-6 text-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:[e.jsx("strong",{children:"개발회사:"})," 리체부동산"]}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:[e.jsx("strong",{children:"대표:"})," 김선미 공인중개사"]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-300",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"© 2024 리체부동산. All rights reserved."})})]})]})},ci=()=>{var b,x;const[s]=ar(),{user:t}=oe(),r=gs(),[a,l]=m.useState(null),[n,i]=m.useState(!0),[o,c]=m.useState(!1),[d,h]=m.useState(null),u=s.get("token");m.useEffect(()=>{u?f():(h("유효하지 않은 초대 링크입니다."),i(!1))},[u]);const f=async()=>{var p,v;try{const{data:y,error:k}=await E.from("team_invitations").select(`
          id,
          email,
          role,
          status,
          expires_at,
          tenant_id,
          inviter_id
        `).eq("invitation_token",u).eq("status","pending").single();if(k||!y){h("초대를 찾을 수 없거나 이미 처리된 초대입니다.");return}if(new Date(y.expires_at)<new Date){h("만료된 초대입니다.");return}if((t==null?void 0:t.email)!==y.email){h("초대받은 이메일과 로그인한 계정이 다릅니다.");return}const[L,z]=await Promise.all([E.from("tenants").select("name").eq("id",y.tenant_id).single(),E.from("user_profiles").select("name").eq("id",y.inviter_id).single()]),R={...y,tenant:{name:((p=L.data)==null?void 0:p.name)||"알 수 없는 팀"},inviter:{name:((v=z.data)==null?void 0:v.name)||"알 수 없는 사용자"}};l(R)}catch(y){console.error("초대 정보 로드 실패:",y),h("초대 정보를 불러오는데 실패했습니다.")}finally{i(!1)}},j=async()=>{if(!(!a||!t))try{c(!0);const{error:p}=await E.from("team_invitations").update({status:"accepted",updated_at:new Date().toISOString()}).eq("id",a.id);if(p)throw p;const{error:v}=await E.from("user_profiles").update({tenant_id:a.tenant_id,role:a.role,joined_at:new Date().toISOString(),status:"active"}).eq("id",t.id);if(v)throw v;await E.from("team_activity_logs").insert({tenant_id:a.tenant_id,user_id:t.id,action:"invitation_accepted",details:{invitation_id:a.id,role:a.role}}),alert("팀 초대를 수락했습니다! 잠시 후 대시보드로 이동합니다."),setTimeout(()=>{r("/")},1e3)}catch(p){console.error("초대 수락 실패:",p),h(p.message||"초대 수락에 실패했습니다.")}finally{c(!1)}},g=async()=>{if(a&&confirm("정말로 초대를 거절하시겠습니까?"))try{c(!0);const{error:p}=await E.from("team_invitations").update({status:"declined",updated_at:new Date().toISOString()}).eq("id",a.id);if(p)throw p;alert("초대를 거절했습니다."),r("/")}catch(p){console.error("초대 거절 실패:",p),h(p.message||"초대 거절에 실패했습니다.")}finally{c(!1)}},N=p=>({owner:"팀 소유자",admin:"관리자",member:"멤버",viewer:"뷰어"})[p]||p;return n?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"초대 정보를 확인하는 중..."})]})}):d?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ue,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"오류가 발생했습니다"}),e.jsx("p",{className:"text-gray-600 mb-6",children:d}),e.jsx("button",{onClick:()=>r("/"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"대시보드로 이동"})]})})}):a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ke,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"팀 초대"}),e.jsx("p",{className:"text-gray-600",children:"팀에 합류하도록 초대되었습니다"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(lt,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"팀"}),e.jsx("p",{className:"font-medium text-gray-900",children:((b=a.tenant)==null?void 0:b.name)||"알 수 없는 팀"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"초대자"}),e.jsx("p",{className:"font-medium text-gray-900",children:((x=a.inviter)==null?void 0:x.name)||"알 수 없는 사용자"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(ke,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"역할"}),e.jsx("p",{className:"font-medium text-gray-900",children:N(a.role)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(nt,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"만료일"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(a.expires_at).toLocaleDateString("ko-KR")})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:g,disabled:o,className:"flex-1 bg-gray-100 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"거절"}),e.jsx("button",{onClick:j,disabled:o,className:"flex-1 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center space-x-2",children:o?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"w-5 h-5"}),e.jsx("span",{children:"수락"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"초대를 수락하면 현재 팀에서 나가고 새로운 팀으로 이동됩니다."})]})}):null};function di(){return e.jsx(rn,{children:e.jsx(cl,{children:e.jsx(dl,{children:e.jsx(al,{children:e.jsxs(Xs,{children:[e.jsx(ne,{path:"/team/invite",element:e.jsx(ci,{})}),e.jsx(ne,{path:"/*",element:e.jsx(en,{children:e.jsxs(tn,{children:[e.jsxs(Xs,{children:[e.jsx(ne,{path:"/",element:e.jsx(Er,{})}),e.jsx(ne,{path:"/properties",element:e.jsx(Cr,{})}),e.jsx(ne,{path:"/schedule",element:e.jsx(Pr,{})}),e.jsx(ne,{path:"/team",element:e.jsx(Rr,{})}),e.jsx(ne,{path:"/settings",element:e.jsx(zr,{})}),e.jsx(ne,{path:"/guide",element:e.jsx($r,{})}),e.jsx(ne,{path:"/tenant/:tenantSlug/*",element:e.jsx(mi,{})}),e.jsx(ne,{path:"*",element:e.jsx(Ka,{to:"/",replace:!0})})]}),e.jsx(Jl,{})]})})})]})})})})})}const mi=()=>e.jsxs(Xs,{children:[e.jsx(ne,{path:"/",element:e.jsx(Er,{})}),e.jsx(ne,{path:"/properties",element:e.jsx(Cr,{})}),e.jsx(ne,{path:"/schedule",element:e.jsx(Pr,{})}),e.jsx(ne,{path:"/team",element:e.jsx(Rr,{})}),e.jsx(ne,{path:"/settings",element:e.jsx(zr,{})}),e.jsx(ne,{path:"/guide",element:e.jsx($r,{})})]});Ks.createRoot(document.getElementById("root")).render(e.jsx(Fe.StrictMode,{children:e.jsx(di,{})}));
//# sourceMappingURL=index-B9ABu-MC.js.map
