import{d as te,j as e,I as q,e as u,l as S}from"./index-DmqqP2-K.js";import{r as g}from"./react-vendor-DS3Z5Hf_.js";import{a as me,M as X}from"./useProperties-Clv9Am2z.js";import{s as A}from"./scheduleService-DGqpjI1l.js";import{k as U,T as G,b as se,g as Z,f as K,X as xe,j as ge,q as he,r as ue,U as ee,P as pe,u as ye,v as be,i as je,G as fe,w as ve,d as we}from"./ui-vendor-DnkZPEX2.js";import{u as ae}from"./useMobileDetection-BYhEgXwQ.js";import"./supabase-vendor-CCigGT7m.js";import"./utils-vendor-BJeS7sC5.js";const Ne=({isOpen:p,onClose:c,onSubmit:n,initialData:i,selectedDate:y})=>{const{user:_,loading:f,session:M,getCurrentUser:E}=te(),{properties:D}=me(),[k,b]=g.useState(!1),[z,o]=g.useState(null),[l,v]=g.useState({title:"",description:"",start_date:"",end_date:"",all_day:!1,category:"other",priority:"medium",property_id:"",attendees:[],location:""});g.useEffect(()=>{if(i){const t=new Date(i.start_date),s=new Date(i.end_date),x=new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(0,16),j=new Date(s.getTime()-s.getTimezoneOffset()*6e4).toISOString().slice(0,16);v({title:i.title,description:i.description||"",start_date:x,end_date:j,all_day:i.all_day,category:i.category,priority:i.priority,property_id:i.property_id||"",attendees:i.attendees||[],location:i.location||""})}else{const t=new Date;let s,x;if(y){s=new Date(y);const h=t.getHours(),T=t.getMinutes();y.toDateString()===t.toDateString()?s.setHours(h+(T>0?1:0),0,0,0):s.setHours(9,0,0,0)}else s=new Date(t),s.setHours(t.getHours()+1,0,0,0);x=new Date(s),x.setHours(s.getHours()+1);const j=s.toISOString().slice(0,16),d=x.toISOString().slice(0,16);v(h=>({...h,start_date:j,end_date:d}))}},[i,y]);const O=async t=>{if(t.preventDefault(),f){o("ì¸ì¦ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");return}if(!l.title.trim()){o("ì¼ì • ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}if(!l.start_date){o("ì‹œì‘ ì¼ì‹œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");return}if(!l.end_date){o("ì¢…ë£Œ ì¼ì‹œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");return}if(new Date(l.start_date)>=new Date(l.end_date)){o("ì¢…ë£Œ ì¼ì‹œëŠ” ì‹œì‘ ì¼ì‹œë³´ë‹¤ ë’¤ì—¬ì•¼ í•©ë‹ˆë‹¤.");return}b(!0),o(null);try{let s=null;const x=await E();if(!x){o("ì‚¬ìš©ì ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");return}s={id:x.id,email:x.email};const j=s.id,d={...l};(!d.property_id||d.property_id.trim()==="")&&delete d.property_id,Array.isArray(d.attendees)&&d.attendees.length===0&&delete d.attendees;const h={...d};if(l.all_day){const H=new Date(d.start_date),F=new Date(d.end_date);h.start_date=H.toISOString(),h.end_date=F.toISOString()}else{const H=new Date(d.start_date),F=new Date(d.end_date);h.start_date=H.toISOString(),h.end_date=F.toISOString()}let T;if(i){if(i.tenant_id!==j||i.created_by!==s.id){o("ì´ ì¼ì •ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");return}T=await A.updateSchedule(i.id,h,s.id)}else T=await A.createSchedule(j,s.id,h);n(T),c()}catch(s){s.message?.includes("JWT")||s.message?.includes("ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤")?o("ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”."):s.message?.includes("permission")||s.message?.includes("ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤")?o("ì´ ì¼ì •ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ë³¸ì¸ì´ ì‘ì„±í•œ ì¼ì •ë§Œ ìˆ˜ì • ê°€ëŠ¥í•©ë‹ˆë‹¤."):s.message?.includes("ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")?o("ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë¯¸ ì‚­ì œë˜ì—ˆê±°ë‚˜ ê¶Œí•œì´ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."):o(s.message||"ì¼ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{b(!1)}},m=(t,s)=>{if(v(x=>({...x,[t]:s})),t==="all_day"&&s){const x=l.start_date.split("T")[0],j=l.end_date.split("T")[0];v(d=>({...d,start_date:`${x}T00:00`,end_date:`${j}T23:59`}))}},C=[{value:"property_viewing",label:"ë§¤ë¬¼ ë³´ê¸°",icon:e.jsx(U,{className:"w-4 h-4"})},{value:"contract_signing",label:"ê³„ì•½ ì²´ê²°",icon:e.jsx(G,{className:"w-4 h-4"})},{value:"maintenance",label:"ìœ ì§€ë³´ìˆ˜",icon:e.jsx(se,{className:"w-4 h-4"})},{value:"client_meeting",label:"ê³ ê° ë¯¸íŒ…",icon:e.jsx(Z,{className:"w-4 h-4"})},{value:"team_meeting",label:"íŒ€ íšŒì˜",icon:e.jsx(Z,{className:"w-4 h-4"})},{value:"personal",label:"ê°œì¸ ì¼ì •",icon:e.jsx(K,{className:"w-4 h-4"})},{value:"other",label:"ê¸°íƒ€",icon:e.jsx(G,{className:"w-4 h-4"})}],$=[{value:"low",label:"ë‚®ìŒ",color:"text-gray-600"},{value:"medium",label:"ë³´í†µ",color:"text-blue-600"},{value:"high",label:"ë†’ìŒ",color:"text-orange-600"},{value:"urgent",label:"ê¸´ê¸‰",color:"text-red-600"}];return e.jsx(X,{isOpen:p,onClose:c,title:i?"ì¼ì • ìˆ˜ì •":"ìƒˆ ì¼ì • ë“±ë¡",size:"lg",children:e.jsxs("form",{onSubmit:O,className:"p-6 space-y-6",children:[z&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-600",children:z})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¼ì • ì œëª© *"}),e.jsx(q,{value:l.title,onChange:t=>m("title",t.target.value),placeholder:"ì¼ì • ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì„¤ëª…"}),e.jsx("textarea",{value:l.description,onChange:t=>m("description",t.target.value),placeholder:"ì¼ì •ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none h-20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¹´í…Œê³ ë¦¬ *"}),e.jsx("select",{value:l.category,onChange:t=>m("category",t.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",required:!0,children:C.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ìš°ì„ ìˆœìœ„"}),e.jsx("select",{value:l.priority,onChange:t=>m("priority",t.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:$.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),(l.category==="property_viewing"||l.category==="contract_signing")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì—°ê´€ ë§¤ë¬¼"}),e.jsxs("select",{value:l.property_id,onChange:t=>m("property_id",t.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"ë§¤ë¬¼ ì„ íƒ (ì„ íƒì‚¬í•­)"}),D.map(t=>e.jsxs("option",{value:t.id,children:[t.title," - ",t.address]},t.id))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"all_day",checked:l.all_day,onChange:t=>m("all_day",t.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"all_day",className:"text-sm text-gray-700",children:"ì¢…ì¼ ì¼ì •"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì‹œì‘ ì¼ì‹œ *"}),e.jsx(q,{type:l.all_day?"date":"datetime-local",value:l.all_day?l.start_date.split("T")[0]:l.start_date,onChange:t=>{if(l.all_day){const s=`${t.target.value}T00:00`;m("start_date",s)}else{const s=t.target.value;m("start_date",s)}},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¢…ë£Œ ì¼ì‹œ *"}),e.jsx(q,{type:l.all_day?"date":"datetime-local",value:l.all_day?l.end_date.split("T")[0]:l.end_date,onChange:t=>{if(l.all_day){const s=`${t.target.value}T23:59`;m("end_date",s)}else{const s=t.target.value;m("end_date",s)}},required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¥ì†Œ"}),e.jsx(q,{value:l.location,onChange:t=>m("location",t.target.value),placeholder:"ì¼ì • ì¥ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”",leftIcon:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx(u,{type:"button",onClick:c,variant:"outline",disabled:k||f,children:"ì·¨ì†Œ"}),e.jsx(u,{type:"submit",variant:"tenant",disabled:k||f,onClick:()=>{},children:f?"ì¸ì¦ í™•ì¸ ì¤‘...":k?"ì €ì¥ ì¤‘...":i?"ìˆ˜ì •":"ë“±ë¡"})]})]})})},_e=({isOpen:p,onClose:c,schedule:n,onEdit:i,onDelete:y})=>{const _=ae(),[f,M]=g.useState(!1);if(!n)return null;const E={property_viewing:{label:"ë§¤ë¬¼ ë³´ê¸°",color:"bg-blue-500",icon:e.jsx(U,{className:"w-4 h-4"})},contract_signing:{label:"ê³„ì•½ ì²´ê²°",color:"bg-green-500",icon:e.jsx(G,{className:"w-4 h-4"})},maintenance:{label:"ìœ ì§€ë³´ìˆ˜",color:"bg-yellow-500",icon:e.jsx(se,{className:"w-4 h-4"})},client_meeting:{label:"ê³ ê° ë¯¸íŒ…",color:"bg-purple-500",icon:e.jsx(ee,{className:"w-4 h-4"})},team_meeting:{label:"íŒ€ íšŒì˜",color:"bg-indigo-500",icon:e.jsx(ee,{className:"w-4 h-4"})},personal:{label:"ê°œì¸ ì¼ì •",color:"bg-pink-500",icon:e.jsx(K,{className:"w-4 h-4"})},other:{label:"ê¸°íƒ€",color:"bg-gray-500",icon:e.jsx(G,{className:"w-4 h-4"})}},D={low:{label:"ë‚®ìŒ",color:"text-gray-600 bg-gray-100"},medium:{label:"ë³´í†µ",color:"text-blue-600 bg-blue-100"},high:{label:"ë†’ìŒ",color:"text-orange-600 bg-orange-100"},urgent:{label:"ê¸´ê¸‰",color:"text-red-600 bg-red-100"}},k={scheduled:{label:"ì˜ˆì •ë¨",color:"text-blue-600 bg-blue-100"},in_progress:{label:"ì§„í–‰ ì¤‘",color:"text-yellow-600 bg-yellow-100"},completed:{label:"ì™„ë£Œë¨",color:"text-green-600 bg-green-100"},cancelled:{label:"ì·¨ì†Œë¨",color:"text-red-600 bg-red-100"},postponed:{label:"ì—°ê¸°ë¨",color:"text-gray-600 bg-gray-100"}},b=(O,m)=>{const C=new Date(O);return m?C.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):C.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"2-digit",minute:"2-digit"})},z=async()=>{if(confirm("ì •ë§ë¡œ ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){M(!0);try{await y(n.id),c()}catch{}finally{M(!1)}}},o=E[n.category],l=D[n.priority],v=k[n.status];return e.jsx(X,{isOpen:p,onClose:c,title:"",size:"lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:n.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded text-white text-xs font-medium ${o.color}`,children:[o.icon,e.jsx("span",{className:"ml-1",children:o.label})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${l.color}`,children:l.label}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${v.color}`,children:v.label})]})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 ml-4",children:e.jsx(xe,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(K,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"ì‹œì‘"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:b(n.start_date,n.all_day)}),e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"ì¢…ë£Œ"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:b(n.end_date,n.all_day)}),n.all_day&&e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-600",children:"ì¢…ì¼ ì¼ì •"})})]}),n.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"ìƒì„¸ ë‚´ìš©"}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:n.description})})]}),n.location&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(U,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"ì¥ì†Œ"})]}),e.jsx("p",{className:"text-gray-600 ml-7",children:n.location})]}),e.jsxs("div",{className:"mb-6 pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["ìƒì„±ì¼: ",new Date(n.created_at).toLocaleDateString("ko-KR")]}),n.updated_at!==n.created_at&&e.jsxs("p",{className:"text-xs text-gray-500",children:["ìˆ˜ì •ì¼: ",new Date(n.updated_at).toLocaleDateString("ko-KR")]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx(u,{onClick:c,variant:"outline",size:_?"sm":"md",children:"ë‹«ê¸°"}),e.jsx(u,{onClick:()=>{i(n),c()},variant:"primary",leftIcon:e.jsx(he,{className:"w-4 h-4"}),size:_?"sm":"md",children:"ìˆ˜ì •"}),e.jsx(u,{onClick:z,variant:"danger",leftIcon:e.jsx(ue,{className:"w-4 h-4"}),disabled:f,size:_?"sm":"md",children:f?"ì‚­ì œ ì¤‘...":"ì‚­ì œ"})]})]})})},Oe=()=>{const p=ae(),{user:c}=te(),[n,i]=g.useState(new Date),[y,_]=g.useState("month"),[f,M]=g.useState(null),[E,D]=g.useState(!1),[k,b]=g.useState(!1),[z,o]=g.useState(!1),[l,v]=g.useState(null),[O,m]=g.useState(null),[C,$]=g.useState([]),[t,s]=g.useState("all"),x={property_viewing:"bg-blue-500",contract_signing:"bg-green-500",maintenance:"bg-yellow-500",client_meeting:"bg-purple-500",team_meeting:"bg-indigo-500",personal:"bg-pink-500",other:"bg-gray-500"},j={property_viewing:"ë§¤ë¬¼ ë³´ê¸°",contract_signing:"ê³„ì•½ ì²´ê²°",maintenance:"ìœ ì§€ë³´ìˆ˜",client_meeting:"ê³ ê° ë¯¸íŒ…",team_meeting:"íŒ€ íšŒì˜",personal:"ê°œì¸ ì¼ì •",other:"ê¸°íƒ€"};g.useEffect(()=>{(async()=>{if(!c){S.info("â³ ì‚¬ìš©ì ì¸ì¦ ëŒ€ê¸° ì¤‘...");return}try{S.info("ğŸ“… ìŠ¤ì¼€ì¤„ ë°ì´í„° ë¡œë“œ ì‹œì‘",{userId:c.id,tenantId:c.id});const a=await A.getSchedules(c.id);S.info("ğŸ“… ë¡œë“œëœ ìŠ¤ì¼€ì¤„",{count:a.length}),$(a)}catch(a){S.error("âŒ ìŠ¤ì¼€ì¤„ ë¡œë“œ ì‹¤íŒ¨",{error:a}),$([])}})()},[c]);const d=r=>{$(a=>a.find(I=>I.id===r.id)?a.map(I=>I.id===r.id?r:I):[...a,r])},h=r=>{v(r),o(!0)},T=r=>{S.info("ğŸ“ ìŠ¤ì¼€ì¤„ ìˆ˜ì • ìš”ì²­",{id:r.id,title:r.title,tenant_id:r.tenant_id,created_by:r.created_by,currentUserId:c?.id}),m(r),D(!0)},H=async r=>{try{S.info("ğŸ—‘ï¸ ìŠ¤ì¼€ì¤„ ì‚­ì œ ìš”ì²­",{scheduleId:r,currentUserId:c?.id}),await A.deleteSchedule(r,c?.id),$(a=>a.filter(w=>w.id!==r)),S.info("âœ… ìŠ¤ì¼€ì¤„ ì‚­ì œ ì™„ë£Œ",{scheduleId:r})}catch(a){throw S.error("âŒ ìŠ¤ì¼€ì¤„ ì‚­ì œ ì‹¤íŒ¨",{error:a}),a}},F=()=>{D(!1),m(null),M(null)},re=()=>{const r=n.getFullYear(),a=n.getMonth(),w=new Date(r,a,1),I=new Date(r,a+1,0),V=new Date(w);V.setDate(V.getDate()-w.getDay());const B=new Date(I);B.setDate(B.getDate()+(6-I.getDay()));const J=[],P=new Date(V);for(;P<=B;)J.push(new Date(P)),P.setDate(P.getDate()+1);const Y=[];for(let N=0;N<J.length;N+=7)Y.push(J.slice(N,N+7));return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:e.jsx("div",{className:"grid grid-cols-7 text-center text-sm font-medium text-gray-500 py-3",children:["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "].map(N=>e.jsx("div",{children:N},N))})}),e.jsx("div",{className:"divide-y divide-gray-200",children:Y.map((N,ne)=>e.jsx("div",{className:"grid grid-cols-7",children:N.map((R,ie)=>{const oe=R.toDateString()===new Date().toDateString(),ce=R.getMonth()===a,W=C.filter(L=>new Date(L.start_date).toDateString()===R.toDateString());return e.jsxs("div",{className:`min-h-[60px] sm:min-h-[80px] p-1 sm:p-2 border-r border-gray-100 last:border-r-0 cursor-pointer hover:bg-gray-50 transition-colors ${ce?"":"bg-gray-25 text-gray-400"}`,onClick:()=>{M(R),D(!0)},children:[e.jsx("div",{className:`text-xs sm:text-sm mb-1 ${oe?"w-5 h-5 sm:w-6 sm:h-6 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-xs":"font-medium"}`,children:R.getDate()}),e.jsxs("div",{className:"space-y-0.5",children:[W.slice(0,p?1:3).map((L,Q)=>e.jsx("div",{className:`text-xs px-1.5 py-0.5 rounded text-white truncate cursor-pointer hover:opacity-80 leading-tight ${x[L.category]}`,onClick:de=>{de.stopPropagation(),h(L)},title:`${L.title} - í´ë¦­í•˜ì—¬ ìƒì„¸ë³´ê¸°`,style:{lineHeight:"1.2"},children:L.title},Q)),W.length>(p?1:3)&&e.jsxs("div",{className:"text-xs text-gray-500 leading-tight",style:{lineHeight:"1.2"},children:["+",W.length-(p?1:3),"ê°œ ë”"]})]})]},ie)})},ne))})]})},le=()=>{const r=C.filter(a=>t==="all"||a.category===t);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ì¼ì • ëª©ë¡"})}),e.jsx("div",{className:"divide-y divide-gray-100",children:r.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(K,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."})]}):r.map(a=>e.jsx("div",{className:"px-4 py-2.5 hover:bg-blue-50 cursor-pointer transition-all duration-200 border-l-4 border-transparent hover:border-blue-400 hover:shadow-sm",onClick:()=>h(a),role:"button",tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),h(a))},"aria-label":`${a.title} ì¼ì • ìƒì„¸ë³´ê¸°`,title:"í´ë¦­í•˜ì—¬ ì¼ì • ìƒì„¸ë³´ê¸°",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${x[a.category]} flex-shrink-0`}),e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:a.title}),a.priority==="urgent"&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-red-100 text-red-600 flex-shrink-0",children:"ê¸´ê¸‰"}),a.priority==="high"&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-600 flex-shrink-0",children:"ë†’ìŒ"}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded flex-shrink-0",children:j[a.category]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-400 flex-shrink-0",children:[e.jsx(K,{className:"w-3 h-3 mr-1"}),new Date(a.start_date).toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:a.all_day?void 0:"2-digit",minute:a.all_day?void 0:"2-digit"})]}),a.location&&e.jsxs("div",{className:"flex items-center text-xs text-gray-400 flex-shrink-0",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"truncate max-w-32",children:a.location})]}),a.description&&e.jsxs("span",{className:"text-xs text-gray-400 truncate max-w-48 hidden md:inline",children:["- ",a.description]})]}),e.jsx("div",{className:"flex-shrink-0 ml-2",children:e.jsx(we,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-500"})})]})},a.id))})]})};return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ì¼ì • ê´€ë¦¬"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ìº˜ë¦°ë”ë¡œ ì¼ì •ì„ ê´€ë¦¬í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{onClick:()=>D(!0),leftIcon:e.jsx(pe,{className:"w-4 h-4"}),variant:"tenant",size:p?"sm":"md",children:p?"ë“±ë¡":"ì¼ì • ë“±ë¡"}),e.jsx(u,{onClick:()=>b(!0),leftIcon:e.jsx(ye,{className:"w-4 h-4"}),variant:"outline",size:p?"sm":"md",children:"í•„í„°"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{onClick:()=>{const r=new Date(n);r.setMonth(r.getMonth()-1),i(r)},variant:"outline",size:"sm",children:e.jsx(be,{className:"w-4 h-4"})}),e.jsx("h2",{className:"text-lg font-semibold min-w-[120px] text-center",children:n.toLocaleDateString("ko-KR",{year:"numeric",month:"long"})}),e.jsx(u,{onClick:()=>{const r=new Date(n);r.setMonth(r.getMonth()+1),i(r)},variant:"outline",size:"sm",children:e.jsx(je,{className:"w-4 h-4"})})]}),e.jsx(u,{onClick:()=>i(new Date),variant:"outline",size:"sm",children:"ì˜¤ëŠ˜"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{onClick:()=>_("month"),variant:y==="month"?"primary":"outline",size:"sm",leftIcon:e.jsx(fe,{className:"w-4 h-4"}),children:"ì›”ê°„"}),e.jsx(u,{onClick:()=>_("agenda"),variant:y==="agenda"?"primary":"outline",size:"sm",leftIcon:e.jsx(ve,{className:"w-4 h-4"}),children:"ëª©ë¡"})]})]}),y==="month"?re():le(),e.jsx(Ne,{isOpen:E,onClose:F,onSubmit:d,initialData:O,selectedDate:f||void 0}),e.jsx(_e,{isOpen:z,onClose:()=>o(!1),schedule:l,onEdit:T,onDelete:H}),e.jsx(X,{isOpen:k,onClose:()=>b(!1),title:"ì¼ì • í•„í„°",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¹´í…Œê³ ë¦¬"}),e.jsxs("select",{value:t,onChange:r=>s(r.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"all",children:"ì „ì²´"}),e.jsx("option",{value:"property_viewing",children:"ë§¤ë¬¼ ë³´ê¸°"}),e.jsx("option",{value:"contract_signing",children:"ê³„ì•½ ì²´ê²°"}),e.jsx("option",{value:"maintenance",children:"ìœ ì§€ë³´ìˆ˜"}),e.jsx("option",{value:"client_meeting",children:"ê³ ê° ë¯¸íŒ…"}),e.jsx("option",{value:"team_meeting",children:"íŒ€ íšŒì˜"}),e.jsx("option",{value:"personal",children:"ê°œì¸ ì¼ì •"}),e.jsx("option",{value:"other",children:"ê¸°íƒ€"})]})]})}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[e.jsx(u,{onClick:()=>b(!1),variant:"outline",children:"ì·¨ì†Œ"}),e.jsx(u,{onClick:()=>b(!1),variant:"tenant",children:"ì ìš©"})]})]})})]})};export{Oe as default};
