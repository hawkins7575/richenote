import{j as e,e as b,I as x,S as p,d as ge,u as be,L as pe,C as Y,B as X,P as B}from"./index-DmqqP2-K.js";import{r as c,f as fe}from"./react-vendor-DS3Z5Hf_.js";import{M as G,a as ve}from"./useProperties-Clv9Am2z.js";import{H as K,X as je,S as $,k as Ne,m as ye,U as we,F as _e,n as Se,P as Ce,o as F,G as ke,p as Pe}from"./ui-vendor-DnkZPEX2.js";import{P as Te,a as Oe,b as De,f as U}from"./PropertyEditForm-BG4Tl00T.js";import"./supabase-vendor-CCigGT7m.js";import"./utils-vendor-BJeS7sC5.js";import"./useMobileDetection-BYhEgXwQ.js";const Me=["아파트","오피스텔","원룸","빌라","단독주택","상가","사무실","기타"],Ee=["매매","전세","월세","단기임대"],ze=["거래중","거래완료"],Ve=[{value:"1",label:"1개"},{value:"2",label:"2개"},{value:"3",label:"3개"},{value:"4",label:"4개"},{value:"5",label:"5개"},{value:"6",label:"6개"},{value:"7",label:"7개"}],Fe=({isOpen:v,onClose:g,onSubmit:t,loading:j=!1})=>{const[l,N]=c.useState({title:"",type:"아파트",transaction_type:"매매",status:"거래중",address:"",area:0,floor:void 0,total_floors:void 0,rooms:1,bathrooms:1,parking:!1,elevator:!1,exit_date:""}),[d,y]=c.useState({}),[C,w]=c.useState(!1),[o,f]=c.useState(!1),h=c.useCallback(s=>{f(s),s&&i("exit_date","")},[]),i=c.useCallback((s,n)=>{N(r=>({...r,[s]:n})),s==="exit_date"&&n&&f(!1),d[s]&&y(r=>({...r,[s]:void 0}))},[d]),u=c.useMemo(()=>Me.map(s=>({value:s,label:s})),[]),k=c.useMemo(()=>Ee.map(s=>({value:s,label:s})),[]),_=c.useMemo(()=>ze.map(s=>({value:s,label:s})),[]),P=()=>{const s={};return l.title?.trim()||(s.title="제목을 입력해주세요"),l.address?.trim()||(s.address="주소를 입력해주세요"),l.transaction_type==="매매"&&(!l.price||l.price<=0)&&(s.price="매매가를 입력해주세요"),l.transaction_type==="전세"&&(!l.deposit||l.deposit<=0)&&(s.deposit="전세금을 입력해주세요"),l.transaction_type==="월세"&&((!l.deposit||l.deposit<=0)&&(s.deposit="보증금을 입력해주세요"),(!l.monthly_rent||l.monthly_rent<=0)&&(s.monthly_rent="월세를 입력해주세요")),l.total_floors&&l.floor&&l.total_floors<l.floor&&(s.total_floors="전체 층수는 해당 층수보다 크거나 같아야 합니다"),(!l.area||l.area<=0)&&(s.area="면적을 입력해주세요"),y(s),Object.keys(s).length===0},D=async s=>{if(s.preventDefault(),!!P()&&!C){w(!0);try{await t(l),N({title:"",type:"아파트",transaction_type:"매매",status:"거래중",address:"",area:0,floor:void 0,total_floors:void 0,rooms:1,bathrooms:1,parking:!1,elevator:!1,exit_date:""}),y({}),f(!1),g()}catch(r){alert(`매물 등록에 실패했습니다: ${r instanceof Error?r.message:"알 수 없는 오류"}`)}finally{w(!1)}}};return v?e.jsx(G,{isOpen:v,onClose:g,size:"xl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden max-h-[95vh] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-4 sm:px-6 py-3 sm:py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-white/20 rounded-lg flex-shrink-0",children:e.jsx(K,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"새 매물 등록"}),e.jsx("p",{className:"text-blue-100 text-xs sm:text-sm hidden sm:block",children:"매물 정보를 입력해주세요"})]})]}),e.jsx(b,{variant:"ghost",size:"sm",onClick:g,className:"text-white hover:bg-white/20 active:scale-95 p-2 h-8 w-8 sm:h-10 sm:w-10 rounded-lg flex-shrink-0 ml-2",children:e.jsx(je,{size:18,className:"sm:w-5 sm:h-5"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("form",{onSubmit:D,className:"p-3 sm:p-4",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 sm:p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-blue-600 rounded-md",children:e.jsx($,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"기본 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"매물의 기본적인 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx(x,{label:"매물 제목",value:l.title,onChange:s=>i("title",s.target.value),error:d.title,placeholder:"예: 강남구 신사동 럭셔리 아파트",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-3 sm:gap-3",children:[e.jsx(p,{label:"매물 유형",value:l.type,onChange:s=>i("type",s.target.value),options:u,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(p,{label:"거래 유형",value:l.transaction_type,onChange:s=>i("transaction_type",s.target.value),options:k,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(p,{label:"매물 상태",value:l.status,onChange:s=>i("status",s.target.value),options:_,className:"text-sm sm:text-base h-11 sm:h-12"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-3 sm:p-4 border border-green-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-green-600 rounded-md",children:e.jsx(Ne,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"위치 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"매물의 정확한 위치를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx(x,{label:"주소",value:l.address,onChange:s=>i("address",s.target.value),error:d.address,placeholder:"예: 서울시 강남구 신사동 123-45",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})}),e.jsx("div",{children:e.jsx(x,{label:"상세 주소",value:l.detailed_address||"",onChange:s=>i("detailed_address",s.target.value),placeholder:"예: 123동 456호",className:"text-sm sm:text-base h-11 sm:h-12"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg p-3 sm:p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-purple-600 rounded-md",children:e.jsx(K,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"매물 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"매물의 상세 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 md:grid-cols-3 sm:gap-3",children:[e.jsx(x,{label:"면적 (m²)",type:"number",value:l.area||"",onChange:s=>{const n=s.target.value;if(n==="")i("area",0);else{const r=Number(n);i("area",isNaN(r)?0:r)}},error:d.area,placeholder:"85.0",min:"0",step:"0.1",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(x,{label:"층수",type:"number",value:l.floor||"",onChange:s=>{const n=s.target.value;if(n==="")i("floor",void 0);else{const r=Math.floor(Number(n));i("floor",isNaN(r)?void 0:r)}},error:d.floor,placeholder:"15",min:"1",className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(x,{label:"전체 층수",type:"number",value:l.total_floors||"",onChange:s=>{const n=s.target.value;if(n==="")i("total_floors",void 0);else{const r=Math.floor(Number(n));i("total_floors",isNaN(r)?void 0:r)}},error:d.total_floors,placeholder:"25",min:"1",className:"text-sm sm:text-base h-11 sm:h-12 sm:col-span-2 md:col-span-1"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(p,{label:"방 개수",value:l.rooms?.toString()||"1",onChange:s=>{const n=s.target.value,r=Math.floor(Number(n));i("rooms",isNaN(r)?1:r)},error:d.rooms,options:Ve,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(x,{label:"화장실 개수",type:"number",value:l.bathrooms||"",onChange:s=>{const n=s.target.value;if(n==="")i("bathrooms",1);else{const r=Math.floor(Number(n));i("bathrooms",isNaN(r)?1:r)}},error:d.bathrooms,placeholder:"2",min:"1",className:"text-sm sm:text-base h-11 sm:h-12"})]}),e.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-purple-200",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2",children:"편의시설"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:flex sm:flex-wrap sm:gap-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 bg-white rounded-md px-2 sm:px-3 py-2 border border-gray-200 hover:border-purple-300 active:scale-95 transition-all cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.parking,onChange:s=>i("parking",s.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 w-4 h-4 sm:w-3 sm:h-3"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"🚗 주차"})]}),e.jsxs("label",{className:"flex items-center space-x-2 bg-white rounded-md px-2 sm:px-3 py-2 border border-gray-200 hover:border-purple-300 active:scale-95 transition-all cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.elevator,onChange:s=>i("elevator",s.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 w-4 h-4 sm:w-3 sm:h-3"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"🏢 엘리베이터"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-3 sm:p-4 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-orange-600 rounded-md",children:e.jsx(ye,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"가격 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"거래 유형에 맞는 가격을 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-1 md:grid-cols-3 sm:gap-3",children:[l.transaction_type==="매매"&&e.jsx(x,{label:"매매가 (만원)",type:"number",value:l.price||"",onChange:s=>{const n=s.target.value;if(n==="")i("price",void 0);else{const r=Number(n);i("price",isNaN(r)?void 0:r)}},error:d.price,placeholder:"35000",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),(l.transaction_type==="전세"||l.transaction_type==="월세")&&e.jsx(x,{label:l.transaction_type==="전세"?"전세금 (만원)":"보증금 (만원)",type:"number",value:l.deposit||"",onChange:s=>{const n=s.target.value;if(n==="")i("deposit",void 0);else{const r=Number(n);i("deposit",isNaN(r)?void 0:r)}},error:d.deposit,placeholder:"21000",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),l.transaction_type==="월세"&&e.jsx(x,{label:"월세 (만원)",type:"number",value:l.monthly_rent||"",onChange:s=>{const n=s.target.value;if(n==="")i("monthly_rent",void 0);else{const r=Number(n);i("monthly_rent",isNaN(r)?void 0:r)}},error:d.monthly_rent,placeholder:"65",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 rounded-lg p-3 sm:p-4 border border-rose-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-rose-600 rounded-md",children:e.jsx(we,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"임대인 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"임대인의 연락처 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(x,{label:"임대인 이름",value:l.landlord_name||"",onChange:s=>i("landlord_name",s.target.value),placeholder:"홍길동",className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(x,{label:"임대인 연락처",value:l.landlord_phone||"",onChange:s=>i("landlord_phone",s.target.value),placeholder:"010-1234-5678",className:"text-sm sm:text-base h-11 sm:h-12"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-3 sm:p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-gray-600 rounded-md",children:e.jsx(_e,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"기타 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"추가적인 매물 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/60 rounded-lg border border-gray-200",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:s=>h(s.target.checked),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"✨ 현재 공실 (즉시 입주 가능)"})]}),e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${o||!l.exit_date?"bg-green-100 text-green-800 border border-green-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,children:o||!l.exit_date?"즉시 입주 가능":"퇴실 예정"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(x,{label:"퇴실 예정일",type:"date",value:l.exit_date||"",onChange:s=>i("exit_date",s.target.value),disabled:o,className:`text-sm sm:text-base h-11 sm:h-12 ${o?"opacity-50 cursor-not-allowed":""}`,placeholder:"퇴실 예정일을 선택하세요"}),e.jsx("div",{className:"flex items-center justify-center sm:justify-start",children:e.jsx("p",{className:"text-xs text-gray-500 text-center sm:text-left",children:o?"공실로 체크되어 날짜 입력이 비활성화됩니다":"퇴실 예정일이 있으면 입력하세요"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"매물 설명"}),e.jsx("textarea",{value:l.description||"",onChange:s=>i("description",s.target.value),placeholder:`매물에 대한 상세한 설명을 입력해주세요
예: 남향, 풀옵션, 교통 편리, 학군 좋음 등`,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-xs sm:text-sm resize-none transition-colors"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end space-y-reverse space-y-3 sm:space-y-0 sm:space-x-3 pt-4 border-t border-gray-200 mt-4",children:[e.jsx(b,{type:"button",variant:"outline",onClick:g,disabled:j,className:"w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2 text-sm sm:text-base active:scale-95",children:"취소"}),e.jsx(b,{type:"submit",variant:"primary",loading:j,leftIcon:e.jsx(Se,{size:16}),className:"w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2 text-sm sm:text-base bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 active:scale-95",children:"매물 등록"})]})]})})})]})}):null},Ue=()=>{const{user:v}=ge(),{tenant:g}=be(),[t,j]=fe(),[l,N]=c.useState(""),[d,y]=c.useState(""),[C,w]=c.useState(!1),[o,f]=c.useState("전체"),[h,i]=c.useState("전체"),[u,k]=c.useState("전체"),[_,P]=c.useState("card"),[D,s]=c.useState(!1),[n,r]=c.useState(null),[H,M]=c.useState(!1),[J,L]=c.useState(!1),[Q,E]=c.useState(!1),[W,R]=c.useState(!1),[T,z]=c.useState(null),[I,S]=c.useState(null);c.useEffect(()=>{if(C)return;const a=setTimeout(()=>{y(l)},300);return()=>clearTimeout(a)},[l,C]),c.useEffect(()=>{if(t.get("create")==="true"){M(!0);const a=new URLSearchParams(t);a.delete("create"),j(a,{replace:!0})}},[t,j]);const Z=c.useMemo(()=>{const a={};return d&&(a.search=d),o!=="전체"&&(a.transaction_type=o),h!=="전체"&&(a.property_type=h),u!=="전체"&&(a.property_status=u),a},[d,o,h,u]),{properties:V,loading:ee,error:q,refreshProperties:se,createProperty:te,updateProperty:ae,deleteProperty:le}=ve(Z),O=c.useMemo(()=>V?[...V].sort((a,m)=>a.status==="거래완료"&&m.status!=="거래완료"?1:a.status!=="거래완료"&&m.status==="거래완료"?-1:a.created_at&&m.created_at?new Date(m.created_at).getTime()-new Date(a.created_at).getTime():0):[],[V]),re=[{value:"전체",label:"전체"},{value:"매매",label:"매매"},{value:"전세",label:"전세"},{value:"월세",label:"월세"}],ie=[{value:"전체",label:"전체"},{value:"아파트",label:"아파트"},{value:"오피스텔",label:"오피스텔"},{value:"원룸",label:"원룸"},{value:"빌라",label:"빌라"}],ne=[{value:"전체",label:"전체"},{value:"거래중",label:"거래중"},{value:"거래완료",label:"거래완료"}],ce=()=>{const a=[];return o!=="전체"&&a.push(o),h!=="전체"&&a.push(h),u!=="전체"&&a.push(u),a.length===0?"매물명, 주소로 검색하세요...":`${a.join(" · ")} 매물 검색...`},A=()=>{const a=[];return o!=="전체"&&a.push(`거래: ${o}`),h!=="전체"&&a.push(`유형: ${h}`),u!=="전체"&&a.push(`상태: ${u}`),a},de=async()=>{if(n)try{await le(n.id),s(!1),r(null)}catch{}},oe=()=>{N(""),f("전체"),i("전체"),k("전체")},me=async a=>{try{L(!0);const m=await te(a)}catch(m){throw m}finally{L(!1)}},xe=async a=>{if(T)try{R(!0),await ae(T.id,a),E(!1),z(null)}catch(m){throw m}finally{R(!1)}},he=a=>{try{z(a),E(!0),S(null)}catch{alert("수정 폼을 열 수 없습니다. 다시 시도해주세요.")}},ue=a=>{try{window.confirm(`'${a.title}' 매물을 정말 삭제하시겠습니까?

이 작업은 되돌릴 수 없습니다.`)&&(r(a),s(!0),S(null))}catch{alert("삭제 확인 중 오류가 발생했습니다. 다시 시도해주세요.")}};return ee?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx(pe,{size:"lg",text:"매물을 불러오는 중..."})}):q?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 mb-4",children:q}),e.jsx(b,{onClick:se,children:"다시 시도"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-3 sm:p-6 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[e.jsx("div",{className:"p-1.5 bg-blue-600 rounded-lg",children:e.jsx($,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("h1",{className:"text-base sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"매물 관리"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-sm sm:text-lg font-bold text-blue-600",children:O.length}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"개"})]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-blue-700 font-medium truncate",children:g?.name})]})]}),e.jsxs("button",{onClick:()=>M(!0),className:"flex items-center justify-center w-9 h-9 sm:w-auto sm:h-auto sm:px-4 sm:py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-md active:scale-95",children:[e.jsx(Ce,{size:16,className:"sm:w-5 sm:h-5 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"새 매물 등록"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-6",children:[e.jsx("div",{className:"p-1 bg-gray-100 rounded",children:e.jsx(F,{className:"w-3 h-3 sm:w-5 sm:h-5 text-gray-600"})}),e.jsx("h2",{className:"text-sm sm:text-lg font-semibold text-gray-900",children:"검색 & 필터"}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"원하는 매물을 빠르게 찾아보세요"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{placeholder:ce(),value:l,onChange:a=>N(a.target.value),onCompositionStart:()=>w(!0),onCompositionEnd:()=>w(!1),leftIcon:e.jsx(F,{size:16}),className:"text-sm h-10 sm:h-14 text-gray-700 bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),A().length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 flex flex-wrap gap-1 z-10",children:A().map((a,m)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded font-medium",children:a},m))})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 md:grid-cols-3 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"거래유형"}),e.jsx(p,{options:re,value:o,onChange:a=>f(a.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"매물유형"}),e.jsx(p,{options:ie,value:h,onChange:a=>i(a.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"매물상태"}),e.jsx(p,{options:ne,value:u,onChange:a=>k(a.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 mr-2 sm:text-sm",children:"보기:"}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-0.5",children:[e.jsxs("button",{onClick:()=>P("card"),className:`flex items-center justify-center px-2 py-1.5 rounded transition-all duration-200 text-xs font-medium ${_==="card"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(ke,{size:12,className:"mr-1"}),"카드"]}),e.jsxs("button",{onClick:()=>P("list"),className:`flex items-center justify-center px-2 py-1.5 rounded transition-all duration-200 text-xs font-medium ${_==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Pe,{size:12,className:"mr-1"}),"리스트"]})]})]}),e.jsx(b,{variant:"outline",onClick:oe,size:"sm",leftIcon:e.jsx($,{size:12}),className:"text-xs font-medium px-3 py-1.5 bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200",children:"초기화"})]})]})]})]})}),O.length===0?e.jsxs(Y,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(F,{size:48,className:"mx-auto"})}),e.jsx("p",{className:"text-gray-500",children:"검색 조건에 맞는 매물이 없습니다."})]}):_==="card"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:O.map(a=>e.jsx(Te,{property:a,onClick:()=>S(a)},a.id))}):e.jsx($e,{properties:O,onView:a=>S(a)}),e.jsx(Fe,{isOpen:H,onClose:()=>M(!1),onSubmit:me,loading:J}),I&&e.jsx(Oe,{property:I,isOpen:!0,onClose:()=>{S(null)},onEdit:a=>{he(a)},onDelete:a=>{ue(a)}}),T&&e.jsx(De,{isOpen:Q,onClose:()=>{E(!1),z(null)},onSubmit:xe,property:T,loading:W}),e.jsx(G,{isOpen:D,onClose:()=>s(!1),title:"매물 삭제",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["'",n?.title,"' 매물을 삭제하시겠습니까?",e.jsx("br",{}),"이 작업은 되돌릴 수 없습니다."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(b,{variant:"outline",onClick:()=>s(!1),children:"취소"}),e.jsx(b,{variant:"destructive",onClick:de,children:"삭제"})]})]})})]})},$e=({properties:v,onView:g})=>e.jsxs(Y,{children:[e.jsx("div",{className:"hidden lg:block bg-gray-50 border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-gray-700",children:[e.jsx("div",{className:"col-span-1",children:"거래유형"}),e.jsx("div",{className:"col-span-3",children:"매물정보"}),e.jsx("div",{className:"col-span-3",children:"가격정보"}),e.jsx("div",{className:"col-span-2",children:"임대인정보"}),e.jsx("div",{className:"col-span-1",children:"퇴실예정일"}),e.jsx("div",{className:"col-span-2",children:"추가정보"})]})}),e.jsx("div",{children:v.map(t=>e.jsxs("div",{className:"border-b border-gray-100 hover:bg-blue-50 transition-colors cursor-pointer touch-target relative",onClick:()=>g(t),children:[t.status==="거래완료"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:e.jsx("div",{className:"w-full h-0.5 bg-red-500 opacity-60"})}),e.jsx("div",{className:"hidden lg:block px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center text-sm",children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(X,{size:"sm",variant:t.transaction_type==="매매"?"sale":t.transaction_type==="전세"?"jeonse":"monthly",children:t.transaction_type}),e.jsx(B,{status:t.status})]})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate text-sm mb-1",children:t.title}),e.jsxs("div",{className:"text-xs text-gray-600 truncate mb-1",children:["📍 ",t.address]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.type," • ",t.area,"m²(",Math.floor(t.area/3.3),"평) • ",t.floor,"/",t.total_floors,"층 • ",t.rooms,"룸"," ",t.bathrooms,"욕실"]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm break-words",children:U(t)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["등록:"," ",t.created_at&&new Date(t.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}),e.jsx("div",{className:"col-span-2",children:t.landlord_name?e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-700 truncate",children:t.landlord_name}),t.landlord_phone&&e.jsx("div",{className:"text-gray-500 truncate",children:t.landlord_phone})]}):e.jsx("div",{className:"text-xs text-gray-400",children:"정보 없음"})}),e.jsx("div",{className:"col-span-1",children:t.exit_date?e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-700",children:new Date(t.exit_date).toLocaleDateString("ko-KR")}),e.jsx("div",{className:"text-gray-500",children:"퇴실예정"})]}):e.jsx("div",{className:"text-xs text-gray-400",children:"미정"})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[e.jsxs("span",{className:`${t.parking?"text-green-600":"text-gray-400"}`,children:["🚗",t.parking?"주차":"주차X"]}),e.jsxs("span",{className:`${t.elevator?"text-green-600":"text-gray-400"}`,children:["🏢",t.elevator?"엘베":"엘베X"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["조회: ",t.view_count||0]})]})]})}),e.jsx("div",{className:"lg:hidden px-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{size:"sm",variant:t.transaction_type==="매매"?"sale":t.transaction_type==="전세"?"jeonse":"monthly",children:t.transaction_type}),e.jsx(B,{status:t.status})]}),e.jsx("div",{className:"font-bold text-primary-600 text-base",children:U(t)})]}),e.jsx("div",{className:"font-medium text-gray-900 text-base",children:t.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:["📍 ",t.address]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[t.type," • ",t.area,"m² (",Math.floor(t.area/3.3),"평) • ",t.floor,"/",t.total_floors,"층 • ",t.rooms,"룸"," ",t.bathrooms,"욕실"]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`${t.parking?"text-green-600":"text-gray-400"}`,children:["🚗",t.parking?"주차":"주차X"]}),e.jsxs("span",{className:`${t.elevator?"text-green-600":"text-gray-400"}`,children:["🏢",t.elevator?"엘베":"엘베X"]}),t.exit_date&&e.jsxs("span",{className:"text-orange-600",children:["퇴실:"," ",new Date(t.exit_date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}),e.jsxs("div",{children:["등록:"," ",t.created_at&&new Date(t.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]})]})})]},t.id))})]});export{Ue as PropertiesPageNew};
