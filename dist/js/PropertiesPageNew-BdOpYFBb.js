import{j as e,e as b,I as x,S as p,d as ge,u as be,L as pe,C as Y,B as X,P as B}from"./index-DmqqP2-K.js";import{r as c,f as fe}from"./react-vendor-DS3Z5Hf_.js";import{M as G,a as ve}from"./useProperties-Clv9Am2z.js";import{H as K,X as je,S as $,k as Ne,m as ye,U as we,F as _e,n as Se,P as Ce,o as F,G as ke,p as Pe}from"./ui-vendor-DnkZPEX2.js";import{P as Te,a as Oe,b as De,f as U}from"./PropertyEditForm-BG4Tl00T.js";import"./supabase-vendor-CCigGT7m.js";import"./utils-vendor-BJeS7sC5.js";import"./useMobileDetection-BYhEgXwQ.js";const Me=["ì•„íŒŒíŠ¸","ì˜¤í”¼ìŠ¤í…”","ì›ë£¸","ë¹Œë¼","ë‹¨ë…ì£¼íƒ","ìƒê°€","ì‚¬ë¬´ì‹¤","ê¸°íƒ€"],Ee=["ë§¤ë§¤","ì „ì„¸","ì›”ì„¸","ë‹¨ê¸°ì„ëŒ€"],ze=["ê±°ë˜ì¤‘","ê±°ë˜ì™„ë£Œ"],Ve=[{value:"1",label:"1ê°œ"},{value:"2",label:"2ê°œ"},{value:"3",label:"3ê°œ"},{value:"4",label:"4ê°œ"},{value:"5",label:"5ê°œ"},{value:"6",label:"6ê°œ"},{value:"7",label:"7ê°œ"}],Fe=({isOpen:v,onClose:g,onSubmit:t,loading:j=!1})=>{const[l,N]=c.useState({title:"",type:"ì•„íŒŒíŠ¸",transaction_type:"ë§¤ë§¤",status:"ê±°ë˜ì¤‘",address:"",area:0,floor:void 0,total_floors:void 0,rooms:1,bathrooms:1,parking:!1,elevator:!1,exit_date:""}),[d,y]=c.useState({}),[C,w]=c.useState(!1),[o,f]=c.useState(!1),h=c.useCallback(s=>{f(s),s&&i("exit_date","")},[]),i=c.useCallback((s,n)=>{N(r=>({...r,[s]:n})),s==="exit_date"&&n&&f(!1),d[s]&&y(r=>({...r,[s]:void 0}))},[d]),u=c.useMemo(()=>Me.map(s=>({value:s,label:s})),[]),k=c.useMemo(()=>Ee.map(s=>({value:s,label:s})),[]),_=c.useMemo(()=>ze.map(s=>({value:s,label:s})),[]),P=()=>{const s={};return l.title?.trim()||(s.title="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),l.address?.trim()||(s.address="ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"),l.transaction_type==="ë§¤ë§¤"&&(!l.price||l.price<=0)&&(s.price="ë§¤ë§¤ê°€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"),l.transaction_type==="ì „ì„¸"&&(!l.deposit||l.deposit<=0)&&(s.deposit="ì „ì„¸ê¸ˆì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),l.transaction_type==="ì›”ì„¸"&&((!l.deposit||l.deposit<=0)&&(s.deposit="ë³´ì¦ê¸ˆì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),(!l.monthly_rent||l.monthly_rent<=0)&&(s.monthly_rent="ì›”ì„¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”")),l.total_floors&&l.floor&&l.total_floors<l.floor&&(s.total_floors="ì „ì²´ ì¸µìˆ˜ëŠ” í•´ë‹¹ ì¸µìˆ˜ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤"),(!l.area||l.area<=0)&&(s.area="ë©´ì ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"),y(s),Object.keys(s).length===0},D=async s=>{if(s.preventDefault(),!!P()&&!C){w(!0);try{await t(l),N({title:"",type:"ì•„íŒŒíŠ¸",transaction_type:"ë§¤ë§¤",status:"ê±°ë˜ì¤‘",address:"",area:0,floor:void 0,total_floors:void 0,rooms:1,bathrooms:1,parking:!1,elevator:!1,exit_date:""}),y({}),f(!1),g()}catch(r){alert(`ë§¤ë¬¼ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${r instanceof Error?r.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"}`)}finally{w(!1)}}};return v?e.jsx(G,{isOpen:v,onClose:g,size:"xl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden max-h-[95vh] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-4 sm:px-6 py-3 sm:py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-white/20 rounded-lg flex-shrink-0",children:e.jsx(K,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"ìƒˆ ë§¤ë¬¼ ë“±ë¡"}),e.jsx("p",{className:"text-blue-100 text-xs sm:text-sm hidden sm:block",children:"ë§¤ë¬¼ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"})]})]}),e.jsx(b,{variant:"ghost",size:"sm",onClick:g,className:"text-white hover:bg-white/20 active:scale-95 p-2 h-8 w-8 sm:h-10 sm:w-10 rounded-lg flex-shrink-0 ml-2",children:e.jsx(je,{size:18,className:"sm:w-5 sm:h-5"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("form",{onSubmit:D,className:"p-3 sm:p-4",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 sm:p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-blue-600 rounded-md",children:e.jsx($,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"ê¸°ë³¸ ì •ë³´"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"ë§¤ë¬¼ì˜ ê¸°ë³¸ì ì¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx(x,{label:"ë§¤ë¬¼ ì œëª©",value:l.title,onChange:s=>i("title",s.target.value),error:d.title,placeholder:"ì˜ˆ: ê°•ë‚¨êµ¬ ì‹ ì‚¬ë™ ëŸ­ì…”ë¦¬ ì•„íŒŒíŠ¸",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-3 sm:gap-3",children:[e.jsx(p,{label:"ë§¤ë¬¼ ìœ í˜•",value:l.type,onChange:s=>i("type",s.target.value),options:u,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(p,{label:"ê±°ë˜ ìœ í˜•",value:l.transaction_type,onChange:s=>i("transaction_type",s.target.value),options:k,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(p,{label:"ë§¤ë¬¼ ìƒíƒœ",value:l.status,onChange:s=>i("status",s.target.value),options:_,className:"text-sm sm:text-base h-11 sm:h-12"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-3 sm:p-4 border border-green-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-green-600 rounded-md",children:e.jsx(Ne,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"ìœ„ì¹˜ ì •ë³´"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"ë§¤ë¬¼ì˜ ì •í™•í•œ ìœ„ì¹˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx(x,{label:"ì£¼ì†Œ",value:l.address,onChange:s=>i("address",s.target.value),error:d.address,placeholder:"ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì‹ ì‚¬ë™ 123-45",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})}),e.jsx("div",{children:e.jsx(x,{label:"ìƒì„¸ ì£¼ì†Œ",value:l.detailed_address||"",onChange:s=>i("detailed_address",s.target.value),placeholder:"ì˜ˆ: 123ë™ 456í˜¸",className:"text-sm sm:text-base h-11 sm:h-12"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg p-3 sm:p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-purple-600 rounded-md",children:e.jsx(K,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"ë§¤ë¬¼ ì •ë³´"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"ë§¤ë¬¼ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 md:grid-cols-3 sm:gap-3",children:[e.jsx(x,{label:"ë©´ì  (mÂ²)",type:"number",value:l.area||"",onChange:s=>{const n=s.target.value;if(n==="")i("area",0);else{const r=Number(n);i("area",isNaN(r)?0:r)}},error:d.area,placeholder:"85.0",min:"0",step:"0.1",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(x,{label:"ì¸µìˆ˜",type:"number",value:l.floor||"",onChange:s=>{const n=s.target.value;if(n==="")i("floor",void 0);else{const r=Math.floor(Number(n));i("floor",isNaN(r)?void 0:r)}},error:d.floor,placeholder:"15",min:"1",className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(x,{label:"ì „ì²´ ì¸µìˆ˜",type:"number",value:l.total_floors||"",onChange:s=>{const n=s.target.value;if(n==="")i("total_floors",void 0);else{const r=Math.floor(Number(n));i("total_floors",isNaN(r)?void 0:r)}},error:d.total_floors,placeholder:"25",min:"1",className:"text-sm sm:text-base h-11 sm:h-12 sm:col-span-2 md:col-span-1"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(p,{label:"ë°© ê°œìˆ˜",value:l.rooms?.toString()||"1",onChange:s=>{const n=s.target.value,r=Math.floor(Number(n));i("rooms",isNaN(r)?1:r)},error:d.rooms,options:Ve,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(x,{label:"í™”ì¥ì‹¤ ê°œìˆ˜",type:"number",value:l.bathrooms||"",onChange:s=>{const n=s.target.value;if(n==="")i("bathrooms",1);else{const r=Math.floor(Number(n));i("bathrooms",isNaN(r)?1:r)}},error:d.bathrooms,placeholder:"2",min:"1",className:"text-sm sm:text-base h-11 sm:h-12"})]}),e.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-purple-200",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2",children:"í¸ì˜ì‹œì„¤"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:flex sm:flex-wrap sm:gap-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 bg-white rounded-md px-2 sm:px-3 py-2 border border-gray-200 hover:border-purple-300 active:scale-95 transition-all cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.parking,onChange:s=>i("parking",s.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 w-4 h-4 sm:w-3 sm:h-3"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ğŸš— ì£¼ì°¨"})]}),e.jsxs("label",{className:"flex items-center space-x-2 bg-white rounded-md px-2 sm:px-3 py-2 border border-gray-200 hover:border-purple-300 active:scale-95 transition-all cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.elevator,onChange:s=>i("elevator",s.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 w-4 h-4 sm:w-3 sm:h-3"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"ğŸ¢ ì—˜ë¦¬ë² ì´í„°"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-3 sm:p-4 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-orange-600 rounded-md",children:e.jsx(ye,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"ê°€ê²© ì •ë³´"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"ê±°ë˜ ìœ í˜•ì— ë§ëŠ” ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-1 md:grid-cols-3 sm:gap-3",children:[l.transaction_type==="ë§¤ë§¤"&&e.jsx(x,{label:"ë§¤ë§¤ê°€ (ë§Œì›)",type:"number",value:l.price||"",onChange:s=>{const n=s.target.value;if(n==="")i("price",void 0);else{const r=Number(n);i("price",isNaN(r)?void 0:r)}},error:d.price,placeholder:"35000",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),(l.transaction_type==="ì „ì„¸"||l.transaction_type==="ì›”ì„¸")&&e.jsx(x,{label:l.transaction_type==="ì „ì„¸"?"ì „ì„¸ê¸ˆ (ë§Œì›)":"ë³´ì¦ê¸ˆ (ë§Œì›)",type:"number",value:l.deposit||"",onChange:s=>{const n=s.target.value;if(n==="")i("deposit",void 0);else{const r=Number(n);i("deposit",isNaN(r)?void 0:r)}},error:d.deposit,placeholder:"21000",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),l.transaction_type==="ì›”ì„¸"&&e.jsx(x,{label:"ì›”ì„¸ (ë§Œì›)",type:"number",value:l.monthly_rent||"",onChange:s=>{const n=s.target.value;if(n==="")i("monthly_rent",void 0);else{const r=Number(n);i("monthly_rent",isNaN(r)?void 0:r)}},error:d.monthly_rent,placeholder:"65",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 rounded-lg p-3 sm:p-4 border border-rose-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-rose-600 rounded-md",children:e.jsx(we,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"ì„ëŒ€ì¸ ì •ë³´"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"ì„ëŒ€ì¸ì˜ ì—°ë½ì²˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(x,{label:"ì„ëŒ€ì¸ ì´ë¦„",value:l.landlord_name||"",onChange:s=>i("landlord_name",s.target.value),placeholder:"í™ê¸¸ë™",className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(x,{label:"ì„ëŒ€ì¸ ì—°ë½ì²˜",value:l.landlord_phone||"",onChange:s=>i("landlord_phone",s.target.value),placeholder:"010-1234-5678",className:"text-sm sm:text-base h-11 sm:h-12"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-3 sm:p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-gray-600 rounded-md",children:e.jsx(_e,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"ê¸°íƒ€ ì •ë³´"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"ì¶”ê°€ì ì¸ ë§¤ë¬¼ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/60 rounded-lg border border-gray-200",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:s=>h(s.target.checked),className:"rounded border-gray-300 text-green-600 focus:ring-green-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"âœ¨ í˜„ì¬ ê³µì‹¤ (ì¦‰ì‹œ ì…ì£¼ ê°€ëŠ¥)"})]}),e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${o||!l.exit_date?"bg-green-100 text-green-800 border border-green-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,children:o||!l.exit_date?"ì¦‰ì‹œ ì…ì£¼ ê°€ëŠ¥":"í‡´ì‹¤ ì˜ˆì •"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(x,{label:"í‡´ì‹¤ ì˜ˆì •ì¼",type:"date",value:l.exit_date||"",onChange:s=>i("exit_date",s.target.value),disabled:o,className:`text-sm sm:text-base h-11 sm:h-12 ${o?"opacity-50 cursor-not-allowed":""}`,placeholder:"í‡´ì‹¤ ì˜ˆì •ì¼ì„ ì„ íƒí•˜ì„¸ìš”"}),e.jsx("div",{className:"flex items-center justify-center sm:justify-start",children:e.jsx("p",{className:"text-xs text-gray-500 text-center sm:text-left",children:o?"ê³µì‹¤ë¡œ ì²´í¬ë˜ì–´ ë‚ ì§œ ì…ë ¥ì´ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤":"í‡´ì‹¤ ì˜ˆì •ì¼ì´ ìˆìœ¼ë©´ ì…ë ¥í•˜ì„¸ìš”"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"ë§¤ë¬¼ ì„¤ëª…"}),e.jsx("textarea",{value:l.description||"",onChange:s=>i("description",s.target.value),placeholder:`ë§¤ë¬¼ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”
ì˜ˆ: ë‚¨í–¥, í’€ì˜µì…˜, êµí†µ í¸ë¦¬, í•™êµ° ì¢‹ìŒ ë“±`,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-xs sm:text-sm resize-none transition-colors"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end space-y-reverse space-y-3 sm:space-y-0 sm:space-x-3 pt-4 border-t border-gray-200 mt-4",children:[e.jsx(b,{type:"button",variant:"outline",onClick:g,disabled:j,className:"w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2 text-sm sm:text-base active:scale-95",children:"ì·¨ì†Œ"}),e.jsx(b,{type:"submit",variant:"primary",loading:j,leftIcon:e.jsx(Se,{size:16}),className:"w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2 text-sm sm:text-base bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 active:scale-95",children:"ë§¤ë¬¼ ë“±ë¡"})]})]})})})]})}):null},Ue=()=>{const{user:v}=ge(),{tenant:g}=be(),[t,j]=fe(),[l,N]=c.useState(""),[d,y]=c.useState(""),[C,w]=c.useState(!1),[o,f]=c.useState("ì „ì²´"),[h,i]=c.useState("ì „ì²´"),[u,k]=c.useState("ì „ì²´"),[_,P]=c.useState("card"),[D,s]=c.useState(!1),[n,r]=c.useState(null),[H,M]=c.useState(!1),[J,L]=c.useState(!1),[Q,E]=c.useState(!1),[W,R]=c.useState(!1),[T,z]=c.useState(null),[I,S]=c.useState(null);c.useEffect(()=>{if(C)return;const a=setTimeout(()=>{y(l)},300);return()=>clearTimeout(a)},[l,C]),c.useEffect(()=>{if(t.get("create")==="true"){M(!0);const a=new URLSearchParams(t);a.delete("create"),j(a,{replace:!0})}},[t,j]);const Z=c.useMemo(()=>{const a={};return d&&(a.search=d),o!=="ì „ì²´"&&(a.transaction_type=o),h!=="ì „ì²´"&&(a.property_type=h),u!=="ì „ì²´"&&(a.property_status=u),a},[d,o,h,u]),{properties:V,loading:ee,error:q,refreshProperties:se,createProperty:te,updateProperty:ae,deleteProperty:le}=ve(Z),O=c.useMemo(()=>V?[...V].sort((a,m)=>a.status==="ê±°ë˜ì™„ë£Œ"&&m.status!=="ê±°ë˜ì™„ë£Œ"?1:a.status!=="ê±°ë˜ì™„ë£Œ"&&m.status==="ê±°ë˜ì™„ë£Œ"?-1:a.created_at&&m.created_at?new Date(m.created_at).getTime()-new Date(a.created_at).getTime():0):[],[V]),re=[{value:"ì „ì²´",label:"ì „ì²´"},{value:"ë§¤ë§¤",label:"ë§¤ë§¤"},{value:"ì „ì„¸",label:"ì „ì„¸"},{value:"ì›”ì„¸",label:"ì›”ì„¸"}],ie=[{value:"ì „ì²´",label:"ì „ì²´"},{value:"ì•„íŒŒíŠ¸",label:"ì•„íŒŒíŠ¸"},{value:"ì˜¤í”¼ìŠ¤í…”",label:"ì˜¤í”¼ìŠ¤í…”"},{value:"ì›ë£¸",label:"ì›ë£¸"},{value:"ë¹Œë¼",label:"ë¹Œë¼"}],ne=[{value:"ì „ì²´",label:"ì „ì²´"},{value:"ê±°ë˜ì¤‘",label:"ê±°ë˜ì¤‘"},{value:"ê±°ë˜ì™„ë£Œ",label:"ê±°ë˜ì™„ë£Œ"}],ce=()=>{const a=[];return o!=="ì „ì²´"&&a.push(o),h!=="ì „ì²´"&&a.push(h),u!=="ì „ì²´"&&a.push(u),a.length===0?"ë§¤ë¬¼ëª…, ì£¼ì†Œë¡œ ê²€ìƒ‰í•˜ì„¸ìš”...":`${a.join(" Â· ")} ë§¤ë¬¼ ê²€ìƒ‰...`},A=()=>{const a=[];return o!=="ì „ì²´"&&a.push(`ê±°ë˜: ${o}`),h!=="ì „ì²´"&&a.push(`ìœ í˜•: ${h}`),u!=="ì „ì²´"&&a.push(`ìƒíƒœ: ${u}`),a},de=async()=>{if(n)try{await le(n.id),s(!1),r(null)}catch{}},oe=()=>{N(""),f("ì „ì²´"),i("ì „ì²´"),k("ì „ì²´")},me=async a=>{try{L(!0);const m=await te(a)}catch(m){throw m}finally{L(!1)}},xe=async a=>{if(T)try{R(!0),await ae(T.id,a),E(!1),z(null)}catch(m){throw m}finally{R(!1)}},he=a=>{try{z(a),E(!0),S(null)}catch{alert("ìˆ˜ì • í¼ì„ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},ue=a=>{try{window.confirm(`'${a.title}' ë§¤ë¬¼ì„ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?

ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)&&(r(a),s(!0),S(null))}catch{alert("ì‚­ì œ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}};return ee?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx(pe,{size:"lg",text:"ë§¤ë¬¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})}):q?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 mb-4",children:q}),e.jsx(b,{onClick:se,children:"ë‹¤ì‹œ ì‹œë„"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-3 sm:p-6 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[e.jsx("div",{className:"p-1.5 bg-blue-600 rounded-lg",children:e.jsx($,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("h1",{className:"text-base sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"ë§¤ë¬¼ ê´€ë¦¬"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-sm sm:text-lg font-bold text-blue-600",children:O.length}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"ê°œ"})]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-blue-700 font-medium truncate",children:g?.name})]})]}),e.jsxs("button",{onClick:()=>M(!0),className:"flex items-center justify-center w-9 h-9 sm:w-auto sm:h-auto sm:px-4 sm:py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-md active:scale-95",children:[e.jsx(Ce,{size:16,className:"sm:w-5 sm:h-5 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"ìƒˆ ë§¤ë¬¼ ë“±ë¡"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-6",children:[e.jsx("div",{className:"p-1 bg-gray-100 rounded",children:e.jsx(F,{className:"w-3 h-3 sm:w-5 sm:h-5 text-gray-600"})}),e.jsx("h2",{className:"text-sm sm:text-lg font-semibold text-gray-900",children:"ê²€ìƒ‰ & í•„í„°"}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"ì›í•˜ëŠ” ë§¤ë¬¼ì„ ë¹ ë¥´ê²Œ ì°¾ì•„ë³´ì„¸ìš”"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{placeholder:ce(),value:l,onChange:a=>N(a.target.value),onCompositionStart:()=>w(!0),onCompositionEnd:()=>w(!1),leftIcon:e.jsx(F,{size:16}),className:"text-sm h-10 sm:h-14 text-gray-700 bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),A().length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 flex flex-wrap gap-1 z-10",children:A().map((a,m)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded font-medium",children:a},m))})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 md:grid-cols-3 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"ê±°ë˜ìœ í˜•"}),e.jsx(p,{options:re,value:o,onChange:a=>f(a.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"ë§¤ë¬¼ìœ í˜•"}),e.jsx(p,{options:ie,value:h,onChange:a=>i(a.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"ë§¤ë¬¼ìƒíƒœ"}),e.jsx(p,{options:ne,value:u,onChange:a=>k(a.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 mr-2 sm:text-sm",children:"ë³´ê¸°:"}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-0.5",children:[e.jsxs("button",{onClick:()=>P("card"),className:`flex items-center justify-center px-2 py-1.5 rounded transition-all duration-200 text-xs font-medium ${_==="card"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(ke,{size:12,className:"mr-1"}),"ì¹´ë“œ"]}),e.jsxs("button",{onClick:()=>P("list"),className:`flex items-center justify-center px-2 py-1.5 rounded transition-all duration-200 text-xs font-medium ${_==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Pe,{size:12,className:"mr-1"}),"ë¦¬ìŠ¤íŠ¸"]})]})]}),e.jsx(b,{variant:"outline",onClick:oe,size:"sm",leftIcon:e.jsx($,{size:12}),className:"text-xs font-medium px-3 py-1.5 bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200",children:"ì´ˆê¸°í™”"})]})]})]})]})}),O.length===0?e.jsxs(Y,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(F,{size:48,className:"mx-auto"})}),e.jsx("p",{className:"text-gray-500",children:"ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ë§¤ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤."})]}):_==="card"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:O.map(a=>e.jsx(Te,{property:a,onClick:()=>S(a)},a.id))}):e.jsx($e,{properties:O,onView:a=>S(a)}),e.jsx(Fe,{isOpen:H,onClose:()=>M(!1),onSubmit:me,loading:J}),I&&e.jsx(Oe,{property:I,isOpen:!0,onClose:()=>{S(null)},onEdit:a=>{he(a)},onDelete:a=>{ue(a)}}),T&&e.jsx(De,{isOpen:Q,onClose:()=>{E(!1),z(null)},onSubmit:xe,property:T,loading:W}),e.jsx(G,{isOpen:D,onClose:()=>s(!1),title:"ë§¤ë¬¼ ì‚­ì œ",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["'",n?.title,"' ë§¤ë¬¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",e.jsx("br",{}),"ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(b,{variant:"outline",onClick:()=>s(!1),children:"ì·¨ì†Œ"}),e.jsx(b,{variant:"destructive",onClick:de,children:"ì‚­ì œ"})]})]})})]})},$e=({properties:v,onView:g})=>e.jsxs(Y,{children:[e.jsx("div",{className:"hidden lg:block bg-gray-50 border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-gray-700",children:[e.jsx("div",{className:"col-span-1",children:"ê±°ë˜ìœ í˜•"}),e.jsx("div",{className:"col-span-3",children:"ë§¤ë¬¼ì •ë³´"}),e.jsx("div",{className:"col-span-3",children:"ê°€ê²©ì •ë³´"}),e.jsx("div",{className:"col-span-2",children:"ì„ëŒ€ì¸ì •ë³´"}),e.jsx("div",{className:"col-span-1",children:"í‡´ì‹¤ì˜ˆì •ì¼"}),e.jsx("div",{className:"col-span-2",children:"ì¶”ê°€ì •ë³´"})]})}),e.jsx("div",{children:v.map(t=>e.jsxs("div",{className:"border-b border-gray-100 hover:bg-blue-50 transition-colors cursor-pointer touch-target relative",onClick:()=>g(t),children:[t.status==="ê±°ë˜ì™„ë£Œ"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:e.jsx("div",{className:"w-full h-0.5 bg-red-500 opacity-60"})}),e.jsx("div",{className:"hidden lg:block px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center text-sm",children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(X,{size:"sm",variant:t.transaction_type==="ë§¤ë§¤"?"sale":t.transaction_type==="ì „ì„¸"?"jeonse":"monthly",children:t.transaction_type}),e.jsx(B,{status:t.status})]})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate text-sm mb-1",children:t.title}),e.jsxs("div",{className:"text-xs text-gray-600 truncate mb-1",children:["ğŸ“ ",t.address]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.type," â€¢ ",t.area,"mÂ²(",Math.floor(t.area/3.3),"í‰) â€¢ ",t.floor,"/",t.total_floors,"ì¸µ â€¢ ",t.rooms,"ë£¸"," ",t.bathrooms,"ìš•ì‹¤"]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm break-words",children:U(t)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ë“±ë¡:"," ",t.created_at&&new Date(t.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}),e.jsx("div",{className:"col-span-2",children:t.landlord_name?e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-700 truncate",children:t.landlord_name}),t.landlord_phone&&e.jsx("div",{className:"text-gray-500 truncate",children:t.landlord_phone})]}):e.jsx("div",{className:"text-xs text-gray-400",children:"ì •ë³´ ì—†ìŒ"})}),e.jsx("div",{className:"col-span-1",children:t.exit_date?e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-700",children:new Date(t.exit_date).toLocaleDateString("ko-KR")}),e.jsx("div",{className:"text-gray-500",children:"í‡´ì‹¤ì˜ˆì •"})]}):e.jsx("div",{className:"text-xs text-gray-400",children:"ë¯¸ì •"})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[e.jsxs("span",{className:`${t.parking?"text-green-600":"text-gray-400"}`,children:["ğŸš—",t.parking?"ì£¼ì°¨":"ì£¼ì°¨X"]}),e.jsxs("span",{className:`${t.elevator?"text-green-600":"text-gray-400"}`,children:["ğŸ¢",t.elevator?"ì—˜ë² ":"ì—˜ë² X"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ì¡°íšŒ: ",t.view_count||0]})]})]})}),e.jsx("div",{className:"lg:hidden px-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{size:"sm",variant:t.transaction_type==="ë§¤ë§¤"?"sale":t.transaction_type==="ì „ì„¸"?"jeonse":"monthly",children:t.transaction_type}),e.jsx(B,{status:t.status})]}),e.jsx("div",{className:"font-bold text-primary-600 text-base",children:U(t)})]}),e.jsx("div",{className:"font-medium text-gray-900 text-base",children:t.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:["ğŸ“ ",t.address]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[t.type," â€¢ ",t.area,"mÂ² (",Math.floor(t.area/3.3),"í‰) â€¢ ",t.floor,"/",t.total_floors,"ì¸µ â€¢ ",t.rooms,"ë£¸"," ",t.bathrooms,"ìš•ì‹¤"]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`${t.parking?"text-green-600":"text-gray-400"}`,children:["ğŸš—",t.parking?"ì£¼ì°¨":"ì£¼ì°¨X"]}),e.jsxs("span",{className:`${t.elevator?"text-green-600":"text-gray-400"}`,children:["ğŸ¢",t.elevator?"ì—˜ë² ":"ì—˜ë² X"]}),t.exit_date&&e.jsxs("span",{className:"text-orange-600",children:["í‡´ì‹¤:"," ",new Date(t.exit_date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}),e.jsxs("div",{children:["ë“±ë¡:"," ",t.created_at&&new Date(t.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]})]})})]},t.id))})]});export{Ue as PropertiesPageNew};
