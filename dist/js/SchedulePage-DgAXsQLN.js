import{d as Z,j as e,I as K,e as u,l as D}from"./index-DERAfINP.js";import{r as d}from"./react-vendor-DS3Z5Hf_.js";import{a as me,M as J}from"./useProperties-psuaV-IP.js";import{s as O}from"./scheduleService-yqHeJBUV.js";import{k as H,T as P,b as ee,g as Y,f as R,X as xe,j as ge,q as ue,r as he,U as Q,P as pe,u as be,v as ye,i as je,G as fe,w as ve,d as Ne}from"./ui-vendor-DnkZPEX2.js";import{u as te}from"./useMobileDetection-BYhEgXwQ.js";import"./supabase-vendor-CCigGT7m.js";import"./utils-vendor-BJeS7sC5.js";const we=({isOpen:h,onClose:c,onSubmit:n,initialData:i,selectedDate:b})=>{const{user:w,loading:j,session:I,getCurrentUser:L}=Z(),{properties:_}=me(),[k,y]=d.useState(!1),[T,o]=d.useState(null),[r,f]=d.useState({title:"",description:"",start_date:"",end_date:"",all_day:!1,category:"other",priority:"medium",property_id:"",attendees:[],location:""});d.useEffect(()=>{if(i)f({title:i.title,description:i.description||"",start_date:i.start_date,end_date:i.end_date,all_day:i.all_day,category:i.category,priority:i.priority,property_id:i.property_id||"",attendees:i.attendees||[],location:i.location||""});else{const t=new Date;let l,x;if(b){l=new Date(b);const p=t.getHours(),q=t.getMinutes();b.toDateString()===t.toDateString()?l.setHours(p+(q>0?1:0),0,0,0):l.setHours(9,0,0,0)}else l=new Date(t),l.setHours(t.getHours()+1,0,0,0);x=new Date(l),x.setHours(l.getHours()+1);const S=l.toISOString().slice(0,16),g=x.toISOString().slice(0,16);f(p=>({...p,start_date:S,end_date:g}))}},[i,b]);const z=async t=>{if(t.preventDefault(),j){o("ì¸ì¦ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");return}if(!r.title.trim()){o("ì¼ì • ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}if(!r.start_date){o("ì‹œì‘ ì¼ì‹œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");return}if(!r.end_date){o("ì¢…ë£Œ ì¼ì‹œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");return}if(new Date(r.start_date)>=new Date(r.end_date)){o("ì¢…ë£Œ ì¼ì‹œëŠ” ì‹œì‘ ì¼ì‹œë³´ë‹¤ ë’¤ì—¬ì•¼ í•©ë‹ˆë‹¤.");return}y(!0),o(null);try{let l=null;const x=await L();if(!x){o("ì‚¬ìš©ì ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");return}l={id:x.id,email:x.email};const S=l.id,g={...r};(!g.property_id||g.property_id.trim()==="")&&delete g.property_id,Array.isArray(g.attendees)&&g.attendees.length===0&&delete g.attendees;let p;if(i){if(i.tenant_id!==S||i.created_by!==l.id){o("ì´ ì¼ì •ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");return}p=await O.updateSchedule(i.id,g,l.id)}else p=await O.createSchedule(S,l.id,g);n(p),c()}catch(l){l.message?.includes("JWT")||l.message?.includes("ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤")?o("ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”."):l.message?.includes("permission")||l.message?.includes("ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤")?o("ì´ ì¼ì •ì„ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤. ë³¸ì¸ì´ ì‘ì„±í•œ ì¼ì •ë§Œ ìˆ˜ì • ê°€ëŠ¥í•©ë‹ˆë‹¤."):l.message?.includes("ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")?o("ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë¯¸ ì‚­ì œë˜ì—ˆê±°ë‚˜ ê¶Œí•œì´ ì—†ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."):o(l.message||"ì¼ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{y(!1)}},m=(t,l)=>{if(f(x=>({...x,[t]:l})),t==="all_day"&&l){const x=r.start_date.split("T")[0],S=r.end_date.split("T")[0];f(g=>({...g,start_date:`${x}T00:00`,end_date:`${S}T23:59`}))}},C=[{value:"property_viewing",label:"ë§¤ë¬¼ ë³´ê¸°",icon:e.jsx(H,{className:"w-4 h-4"})},{value:"contract_signing",label:"ê³„ì•½ ì²´ê²°",icon:e.jsx(P,{className:"w-4 h-4"})},{value:"maintenance",label:"ìœ ì§€ë³´ìˆ˜",icon:e.jsx(ee,{className:"w-4 h-4"})},{value:"client_meeting",label:"ê³ ê° ë¯¸íŒ…",icon:e.jsx(Y,{className:"w-4 h-4"})},{value:"team_meeting",label:"íŒ€ íšŒì˜",icon:e.jsx(Y,{className:"w-4 h-4"})},{value:"personal",label:"ê°œì¸ ì¼ì •",icon:e.jsx(R,{className:"w-4 h-4"})},{value:"other",label:"ê¸°íƒ€",icon:e.jsx(P,{className:"w-4 h-4"})}],$=[{value:"low",label:"ë‚®ìŒ",color:"text-gray-600"},{value:"medium",label:"ë³´í†µ",color:"text-blue-600"},{value:"high",label:"ë†’ìŒ",color:"text-orange-600"},{value:"urgent",label:"ê¸´ê¸‰",color:"text-red-600"}];return e.jsx(J,{isOpen:h,onClose:c,title:i?"ì¼ì • ìˆ˜ì •":"ìƒˆ ì¼ì • ë“±ë¡",size:"lg",children:e.jsxs("form",{onSubmit:z,className:"p-6 space-y-6",children:[T&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-red-600",children:T})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¼ì • ì œëª© *"}),e.jsx(K,{value:r.title,onChange:t=>m("title",t.target.value),placeholder:"ì¼ì • ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì„¤ëª…"}),e.jsx("textarea",{value:r.description,onChange:t=>m("description",t.target.value),placeholder:"ì¼ì •ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”",className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm resize-none h-20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¹´í…Œê³ ë¦¬ *"}),e.jsx("select",{value:r.category,onChange:t=>m("category",t.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",required:!0,children:C.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ìš°ì„ ìˆœìœ„"}),e.jsx("select",{value:r.priority,onChange:t=>m("priority",t.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:$.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),(r.category==="property_viewing"||r.category==="contract_signing")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì—°ê´€ ë§¤ë¬¼"}),e.jsxs("select",{value:r.property_id,onChange:t=>m("property_id",t.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"ë§¤ë¬¼ ì„ íƒ (ì„ íƒì‚¬í•­)"}),_.map(t=>e.jsxs("option",{value:t.id,children:[t.title," - ",t.address]},t.id))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"all_day",checked:r.all_day,onChange:t=>m("all_day",t.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"all_day",className:"text-sm text-gray-700",children:"ì¢…ì¼ ì¼ì •"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì‹œì‘ ì¼ì‹œ *"}),e.jsx(K,{type:r.all_day?"date":"datetime-local",value:r.all_day?r.start_date.split("T")[0]:r.start_date,onChange:t=>{const l=r.all_day?`${t.target.value}T00:00`:t.target.value;m("start_date",l)},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¢…ë£Œ ì¼ì‹œ *"}),e.jsx(K,{type:r.all_day?"date":"datetime-local",value:r.all_day?r.end_date.split("T")[0]:r.end_date,onChange:t=>{const l=r.all_day?`${t.target.value}T23:59`:t.target.value;m("end_date",l)},required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¥ì†Œ"}),e.jsx(K,{value:r.location,onChange:t=>m("location",t.target.value),placeholder:"ì¼ì • ì¥ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”",leftIcon:e.jsx(H,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx(u,{type:"button",onClick:c,variant:"outline",disabled:k||j,children:"ì·¨ì†Œ"}),e.jsx(u,{type:"submit",variant:"tenant",disabled:k||j,onClick:()=>{},children:j?"ì¸ì¦ í™•ì¸ ì¤‘...":k?"ì €ì¥ ì¤‘...":i?"ìˆ˜ì •":"ë“±ë¡"})]})]})})},_e=({isOpen:h,onClose:c,schedule:n,onEdit:i,onDelete:b})=>{const w=te(),[j,I]=d.useState(!1);if(!n)return null;const L={property_viewing:{label:"ë§¤ë¬¼ ë³´ê¸°",color:"bg-blue-500",icon:e.jsx(H,{className:"w-4 h-4"})},contract_signing:{label:"ê³„ì•½ ì²´ê²°",color:"bg-green-500",icon:e.jsx(P,{className:"w-4 h-4"})},maintenance:{label:"ìœ ì§€ë³´ìˆ˜",color:"bg-yellow-500",icon:e.jsx(ee,{className:"w-4 h-4"})},client_meeting:{label:"ê³ ê° ë¯¸íŒ…",color:"bg-purple-500",icon:e.jsx(Q,{className:"w-4 h-4"})},team_meeting:{label:"íŒ€ íšŒì˜",color:"bg-indigo-500",icon:e.jsx(Q,{className:"w-4 h-4"})},personal:{label:"ê°œì¸ ì¼ì •",color:"bg-pink-500",icon:e.jsx(R,{className:"w-4 h-4"})},other:{label:"ê¸°íƒ€",color:"bg-gray-500",icon:e.jsx(P,{className:"w-4 h-4"})}},_={low:{label:"ë‚®ìŒ",color:"text-gray-600 bg-gray-100"},medium:{label:"ë³´í†µ",color:"text-blue-600 bg-blue-100"},high:{label:"ë†’ìŒ",color:"text-orange-600 bg-orange-100"},urgent:{label:"ê¸´ê¸‰",color:"text-red-600 bg-red-100"}},k={scheduled:{label:"ì˜ˆì •ë¨",color:"text-blue-600 bg-blue-100"},in_progress:{label:"ì§„í–‰ ì¤‘",color:"text-yellow-600 bg-yellow-100"},completed:{label:"ì™„ë£Œë¨",color:"text-green-600 bg-green-100"},cancelled:{label:"ì·¨ì†Œë¨",color:"text-red-600 bg-red-100"},postponed:{label:"ì—°ê¸°ë¨",color:"text-gray-600 bg-gray-100"}},y=(z,m)=>{const C=new Date(z);return m?C.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"}):C.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"2-digit",minute:"2-digit"})},T=async()=>{if(confirm("ì •ë§ë¡œ ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){I(!0);try{await b(n.id),c()}catch{}finally{I(!1)}}},o=L[n.category],r=_[n.priority],f=k[n.status];return e.jsx(J,{isOpen:h,onClose:c,title:"",size:"lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:n.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded text-white text-xs font-medium ${o.color}`,children:[o.icon,e.jsx("span",{className:"ml-1",children:o.label})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${r.color}`,children:r.label}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${f.color}`,children:f.label})]})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 ml-4",children:e.jsx(xe,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"ì‹œì‘"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:y(n.start_date,n.all_day)}),e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(ge,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"ì¢…ë£Œ"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:y(n.end_date,n.all_day)}),n.all_day&&e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-600",children:"ì¢…ì¼ ì¼ì •"})})]}),n.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"ìƒì„¸ ë‚´ìš©"}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:n.description})})]}),n.location&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"ì¥ì†Œ"})]}),e.jsx("p",{className:"text-gray-600 ml-7",children:n.location})]}),e.jsxs("div",{className:"mb-6 pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["ìƒì„±ì¼: ",new Date(n.created_at).toLocaleDateString("ko-KR")]}),n.updated_at!==n.created_at&&e.jsxs("p",{className:"text-xs text-gray-500",children:["ìˆ˜ì •ì¼: ",new Date(n.updated_at).toLocaleDateString("ko-KR")]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx(u,{onClick:c,variant:"outline",size:w?"sm":"md",children:"ë‹«ê¸°"}),e.jsx(u,{onClick:()=>{i(n),c()},variant:"primary",leftIcon:e.jsx(ue,{className:"w-4 h-4"}),size:w?"sm":"md",children:"ìˆ˜ì •"}),e.jsx(u,{onClick:T,variant:"danger",leftIcon:e.jsx(he,{className:"w-4 h-4"}),disabled:j,size:w?"sm":"md",children:j?"ì‚­ì œ ì¤‘...":"ì‚­ì œ"})]})]})})},$e=()=>{const h=te(),{user:c}=Z(),[n,i]=d.useState(new Date),[b,w]=d.useState("month"),[j,I]=d.useState(null),[L,_]=d.useState(!1),[k,y]=d.useState(!1),[T,o]=d.useState(!1),[r,f]=d.useState(null),[z,m]=d.useState(null),[C,$]=d.useState([]),[t,l]=d.useState("all"),x={property_viewing:"bg-blue-500",contract_signing:"bg-green-500",maintenance:"bg-yellow-500",client_meeting:"bg-purple-500",team_meeting:"bg-indigo-500",personal:"bg-pink-500",other:"bg-gray-500"},S={property_viewing:"ë§¤ë¬¼ ë³´ê¸°",contract_signing:"ê³„ì•½ ì²´ê²°",maintenance:"ìœ ì§€ë³´ìˆ˜",client_meeting:"ê³ ê° ë¯¸íŒ…",team_meeting:"íŒ€ íšŒì˜",personal:"ê°œì¸ ì¼ì •",other:"ê¸°íƒ€"};d.useEffect(()=>{(async()=>{if(!c){D.info("â³ ì‚¬ìš©ì ì¸ì¦ ëŒ€ê¸° ì¤‘...");return}try{D.info("ğŸ“… ìŠ¤ì¼€ì¤„ ë°ì´í„° ë¡œë“œ ì‹œì‘",{userId:c.id,tenantId:c.id});const s=await O.getSchedules(c.id);D.info("ğŸ“… ë¡œë“œëœ ìŠ¤ì¼€ì¤„",{count:s.length}),$(s)}catch(s){D.error("âŒ ìŠ¤ì¼€ì¤„ ë¡œë“œ ì‹¤íŒ¨",{error:s}),$([])}})()},[c]);const g=a=>{$(s=>s.find(M=>M.id===a.id)?s.map(M=>M.id===a.id?a:M):[...s,a])},p=a=>{f(a),o(!0)},q=a=>{D.info("ğŸ“ ìŠ¤ì¼€ì¤„ ìˆ˜ì • ìš”ì²­",{id:a.id,title:a.title,tenant_id:a.tenant_id,created_by:a.created_by,currentUserId:c?.id}),m(a),_(!0)},se=async a=>{try{D.info("ğŸ—‘ï¸ ìŠ¤ì¼€ì¤„ ì‚­ì œ ìš”ì²­",{scheduleId:a,currentUserId:c?.id}),await O.deleteSchedule(a,c?.id),$(s=>s.filter(v=>v.id!==a)),D.info("âœ… ìŠ¤ì¼€ì¤„ ì‚­ì œ ì™„ë£Œ",{scheduleId:a})}catch(s){throw D.error("âŒ ìŠ¤ì¼€ì¤„ ì‚­ì œ ì‹¤íŒ¨",{error:s}),s}},ae=()=>{_(!1),m(null),I(null)},re=()=>{const a=n.getFullYear(),s=n.getMonth(),v=new Date(a,s,1),M=new Date(a,s+1,0),A=new Date(v);A.setDate(A.getDate()-v.getDay());const G=new Date(M);G.setDate(G.getDate()+(6-M.getDay()));const V=[],U=new Date(A);for(;U<=G;)V.push(new Date(U)),U.setDate(U.getDate()+1);const W=[];for(let N=0;N<V.length;N+=7)W.push(V.slice(N,N+7));return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:e.jsx("div",{className:"grid grid-cols-7 text-center text-sm font-medium text-gray-500 py-3",children:["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "].map(N=>e.jsx("div",{children:N},N))})}),e.jsx("div",{className:"divide-y divide-gray-200",children:W.map((N,ne)=>e.jsx("div",{className:"grid grid-cols-7",children:N.map((F,ie)=>{const oe=F.toDateString()===new Date().toDateString(),ce=F.getMonth()===s,B=C.filter(E=>new Date(E.start_date).toDateString()===F.toDateString());return e.jsxs("div",{className:`min-h-[60px] sm:min-h-[80px] p-1 sm:p-2 border-r border-gray-100 last:border-r-0 cursor-pointer hover:bg-gray-50 transition-colors ${ce?"":"bg-gray-25 text-gray-400"}`,onClick:()=>{I(F),_(!0)},children:[e.jsx("div",{className:`text-xs sm:text-sm mb-1 ${oe?"w-5 h-5 sm:w-6 sm:h-6 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-xs":"font-medium"}`,children:F.getDate()}),e.jsxs("div",{className:"space-y-1",children:[B.slice(0,h?1:3).map((E,X)=>e.jsx("div",{className:`text-xs px-1 py-0.5 sm:px-2 sm:py-1 rounded text-white truncate cursor-pointer hover:opacity-80 touch-target ${x[E.category]}`,onClick:de=>{de.stopPropagation(),p(E)},title:`${E.title} - í´ë¦­í•˜ì—¬ ìƒì„¸ë³´ê¸°`,children:E.title},X)),B.length>(h?1:3)&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",B.length-(h?1:3),"ê°œ ë”"]})]})]},ie)})},ne))})]})},le=()=>{const a=C.filter(s=>t==="all"||s.category===t);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ì¼ì • ëª©ë¡"})}),e.jsx("div",{className:"divide-y divide-gray-100",children:a.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(R,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."})]}):a.map(s=>e.jsx("div",{className:"p-4 hover:bg-blue-50 cursor-pointer transition-all duration-200 border-l-4 border-transparent hover:border-blue-400 hover:shadow-sm",onClick:()=>p(s),role:"button",tabIndex:0,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),p(s))},"aria-label":`${s.title} ì¼ì • ìƒì„¸ë³´ê¸°`,title:"í´ë¦­í•˜ì—¬ ì¼ì • ìƒì„¸ë³´ê¸°",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mt-1 ${x[s.category]} flex-shrink-0`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:s.title}),s.priority==="urgent"&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-red-100 text-red-600",children:"ê¸´ê¸‰"}),s.priority==="high"&&e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-600",children:"ë†’ìŒ"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:S[s.category]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-400 mb-1",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),new Date(s.start_date).toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:s.all_day?void 0:"2-digit",minute:s.all_day?void 0:"2-digit"}),s.location&&e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-3 h-3 ml-3 mr-1"}),e.jsx("span",{className:"truncate",children:s.location})]})]}),s.description&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:s.description})]})]}),e.jsx("div",{className:"flex-shrink-0 ml-2",children:e.jsx(Ne,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-500"})})]})},s.id))})]})};return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ì¼ì • ê´€ë¦¬"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ìº˜ë¦°ë”ë¡œ ì¼ì •ì„ ê´€ë¦¬í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{onClick:()=>_(!0),leftIcon:e.jsx(pe,{className:"w-4 h-4"}),variant:"tenant",size:h?"sm":"md",children:h?"ë“±ë¡":"ì¼ì • ë“±ë¡"}),e.jsx(u,{onClick:()=>y(!0),leftIcon:e.jsx(be,{className:"w-4 h-4"}),variant:"outline",size:h?"sm":"md",children:"í•„í„°"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{onClick:()=>{const a=new Date(n);a.setMonth(a.getMonth()-1),i(a)},variant:"outline",size:"sm",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("h2",{className:"text-lg font-semibold min-w-[120px] text-center",children:n.toLocaleDateString("ko-KR",{year:"numeric",month:"long"})}),e.jsx(u,{onClick:()=>{const a=new Date(n);a.setMonth(a.getMonth()+1),i(a)},variant:"outline",size:"sm",children:e.jsx(je,{className:"w-4 h-4"})})]}),e.jsx(u,{onClick:()=>i(new Date),variant:"outline",size:"sm",children:"ì˜¤ëŠ˜"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{onClick:()=>w("month"),variant:b==="month"?"primary":"outline",size:"sm",leftIcon:e.jsx(fe,{className:"w-4 h-4"}),children:"ì›”ê°„"}),e.jsx(u,{onClick:()=>w("agenda"),variant:b==="agenda"?"primary":"outline",size:"sm",leftIcon:e.jsx(ve,{className:"w-4 h-4"}),children:"ëª©ë¡"})]})]}),b==="month"?re():le(),e.jsx(we,{isOpen:L,onClose:ae,onSubmit:g,initialData:z,selectedDate:j||void 0}),e.jsx(_e,{isOpen:T,onClose:()=>o(!1),schedule:r,onEdit:q,onDelete:se}),e.jsx(J,{isOpen:k,onClose:()=>y(!1),title:"ì¼ì • í•„í„°",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ì¹´í…Œê³ ë¦¬"}),e.jsxs("select",{value:t,onChange:a=>l(a.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"all",children:"ì „ì²´"}),e.jsx("option",{value:"property_viewing",children:"ë§¤ë¬¼ ë³´ê¸°"}),e.jsx("option",{value:"contract_signing",children:"ê³„ì•½ ì²´ê²°"}),e.jsx("option",{value:"maintenance",children:"ìœ ì§€ë³´ìˆ˜"}),e.jsx("option",{value:"client_meeting",children:"ê³ ê° ë¯¸íŒ…"}),e.jsx("option",{value:"team_meeting",children:"íŒ€ íšŒì˜"}),e.jsx("option",{value:"personal",children:"ê°œì¸ ì¼ì •"}),e.jsx("option",{value:"other",children:"ê¸°íƒ€"})]})]})}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[e.jsx(u,{onClick:()=>y(!1),variant:"outline",children:"ì·¨ì†Œ"}),e.jsx(u,{onClick:()=>y(!1),variant:"tenant",children:"ì ìš©"})]})]})})]})};export{$e as default};
