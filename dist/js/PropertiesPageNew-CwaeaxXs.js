import{j as e,e as u,I as d,S as g,d as ge,u as pe,L as be,C as Y,B,P as K}from"./index-DERAfINP.js";import{r as i,f as fe}from"./react-vendor-DS3Z5Hf_.js";import{M as G,a as je}from"./useProperties-psuaV-IP.js";import{H as U,X as ve,S as F,k as Ne,m as ye,U as we,F as _e,n as Se,P as Ce,o as M,G as ke,p as Pe}from"./ui-vendor-DnkZPEX2.js";import{P as Te,a as Oe,b as De,f as V}from"./PropertyEditForm-B8HKp0lS.js";import"./supabase-vendor-CCigGT7m.js";import"./utils-vendor-BJeS7sC5.js";import"./useMobileDetection-BYhEgXwQ.js";const Ee=["아파트","오피스텔","원룸","빌라","단독주택","상가","사무실","기타"],ze=["매매","전세","월세","단기임대"],Ie=["거래중","거래완료"],Me=[{value:"1",label:"1개"},{value:"2",label:"2개"},{value:"3",label:"3개"},{value:"4",label:"4개"},{value:"5",label:"5개"},{value:"6",label:"6개"},{value:"7",label:"7개"}],Fe=({isOpen:p,onClose:x,onSubmit:t,loading:b=!1})=>{const[l,f]=i.useState({title:"",type:"아파트",transaction_type:"매매",status:"거래중",address:"",area:0,floor:1,total_floors:1,rooms:1,bathrooms:1,parking:!1,elevator:!1}),[n,j]=i.useState({}),[w,v]=i.useState(!1),r=i.useCallback((s,N)=>{f(h=>({...h,[s]:N})),n[s]&&j(h=>({...h,[s]:void 0}))},[n]),_=i.useMemo(()=>Ee.map(s=>({value:s,label:s})),[]),o=i.useMemo(()=>ze.map(s=>({value:s,label:s})),[]),S=i.useMemo(()=>Ie.map(s=>({value:s,label:s})),[]),m=()=>{const s={};return l.title?.trim()||(s.title="제목을 입력해주세요"),l.address?.trim()||(s.address="주소를 입력해주세요"),l.transaction_type==="매매"&&(!l.price||l.price<=0)&&(s.price="매매가를 입력해주세요"),l.transaction_type==="전세"&&(!l.deposit||l.deposit<=0)&&(s.deposit="전세금을 입력해주세요"),l.transaction_type==="월세"&&((!l.deposit||l.deposit<=0)&&(s.deposit="보증금을 입력해주세요"),(!l.monthly_rent||l.monthly_rent<=0)&&(s.monthly_rent="월세를 입력해주세요")),l.total_floors&&l.floor&&l.total_floors<l.floor&&(s.total_floors="전체 층수는 해당 층수보다 크거나 같아야 합니다"),(!l.area||l.area<=0)&&(s.area="면적을 입력해주세요"),j(s),Object.keys(s).length===0},C=async s=>{if(s.preventDefault(),!!m()&&!w){v(!0);try{await t(l),f({title:"",type:"아파트",transaction_type:"매매",status:"거래중",address:"",area:0,floor:1,total_floors:1,rooms:1,bathrooms:1,parking:!1,elevator:!1}),j({}),x()}catch(h){alert(`매물 등록에 실패했습니다: ${h instanceof Error?h.message:"알 수 없는 오류"}`)}finally{v(!1)}}};return p?e.jsx(G,{isOpen:p,onClose:x,size:"xl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden max-h-[95vh] flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-4 sm:px-6 py-3 sm:py-4 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-white/20 rounded-lg flex-shrink-0",children:e.jsx(U,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"새 매물 등록"}),e.jsx("p",{className:"text-blue-100 text-xs sm:text-sm hidden sm:block",children:"매물 정보를 입력해주세요"})]})]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:x,className:"text-white hover:bg-white/20 active:scale-95 p-2 h-8 w-8 sm:h-10 sm:w-10 rounded-lg flex-shrink-0 ml-2",children:e.jsx(ve,{size:18,className:"sm:w-5 sm:h-5"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("form",{onSubmit:C,className:"p-3 sm:p-4",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 sm:p-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-blue-600 rounded-md",children:e.jsx(F,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"기본 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"매물의 기본적인 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx(d,{label:"매물 제목",value:l.title,onChange:s=>r("title",s.target.value),error:n.title,placeholder:"예: 강남구 신사동 럭셔리 아파트",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-3 sm:gap-3",children:[e.jsx(g,{label:"매물 유형",value:l.type,onChange:s=>r("type",s.target.value),options:_,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(g,{label:"거래 유형",value:l.transaction_type,onChange:s=>r("transaction_type",s.target.value),options:o,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(g,{label:"매물 상태",value:l.status,onChange:s=>r("status",s.target.value),options:S,className:"text-sm sm:text-base h-11 sm:h-12"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-3 sm:p-4 border border-green-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-green-600 rounded-md",children:e.jsx(Ne,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"위치 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"매물의 정확한 위치를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx(d,{label:"주소",value:l.address,onChange:s=>r("address",s.target.value),error:n.address,placeholder:"예: 서울시 강남구 신사동 123-45",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})}),e.jsx("div",{children:e.jsx(d,{label:"상세 주소",value:l.detailed_address||"",onChange:s=>r("detailed_address",s.target.value),placeholder:"예: 123동 456호",className:"text-sm sm:text-base h-11 sm:h-12"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg p-3 sm:p-4 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-purple-600 rounded-md",children:e.jsx(U,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"매물 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"매물의 상세 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 md:grid-cols-3 sm:gap-3",children:[e.jsx(d,{label:"면적 (m²)",type:"number",value:l.area||"",onChange:s=>r("area",parseFloat(s.target.value)||0),error:n.area,placeholder:"85.0",min:"0",step:"0.1",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(d,{label:"층수",type:"number",value:l.floor||"",onChange:s=>r("floor",parseInt(s.target.value)||1),error:n.floor,placeholder:"15",min:"1",className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(d,{label:"전체 층수",type:"number",value:l.total_floors||"",onChange:s=>r("total_floors",parseInt(s.target.value)||1),error:n.total_floors,placeholder:"25",min:"1",className:"text-sm sm:text-base h-11 sm:h-12 sm:col-span-2 md:col-span-1"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(g,{label:"방 개수",value:l.rooms?.toString()||"1",onChange:s=>r("rooms",parseInt(s.target.value)||1),error:n.rooms,options:Me,className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(d,{label:"화장실 개수",type:"number",value:l.bathrooms||"",onChange:s=>r("bathrooms",parseInt(s.target.value)||1),error:n.bathrooms,placeholder:"2",min:"1",className:"text-sm sm:text-base h-11 sm:h-12"})]}),e.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-purple-200",children:[e.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2",children:"편의시설"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:flex sm:flex-wrap sm:gap-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 bg-white rounded-md px-2 sm:px-3 py-2 border border-gray-200 hover:border-purple-300 active:scale-95 transition-all cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.parking,onChange:s=>r("parking",s.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 w-4 h-4 sm:w-3 sm:h-3"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"🚗 주차"})]}),e.jsxs("label",{className:"flex items-center space-x-2 bg-white rounded-md px-2 sm:px-3 py-2 border border-gray-200 hover:border-purple-300 active:scale-95 transition-all cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.elevator,onChange:s=>r("elevator",s.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 w-4 h-4 sm:w-3 sm:h-3"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"🏢 엘리베이터"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-3 sm:p-4 border border-orange-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-orange-600 rounded-md",children:e.jsx(ye,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"가격 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"거래 유형에 맞는 가격을 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-1 md:grid-cols-3 sm:gap-3",children:[l.transaction_type==="매매"&&e.jsx(d,{label:"매매가 (만원)",type:"number",value:l.price||"",onChange:s=>r("price",parseInt(s.target.value)||void 0),error:n.price,placeholder:"35000",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),(l.transaction_type==="전세"||l.transaction_type==="월세")&&e.jsx(d,{label:l.transaction_type==="전세"?"전세금 (만원)":"보증금 (만원)",type:"number",value:l.deposit||"",onChange:s=>r("deposit",parseInt(s.target.value)||void 0),error:n.deposit,placeholder:"21000",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"}),l.transaction_type==="월세"&&e.jsx(d,{label:"월세 (만원)",type:"number",value:l.monthly_rent||"",onChange:s=>r("monthly_rent",parseInt(s.target.value)||void 0),error:n.monthly_rent,placeholder:"65",min:"0",required:!0,className:"text-sm sm:text-base h-11 sm:h-12"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 rounded-lg p-3 sm:p-4 border border-rose-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-rose-600 rounded-md",children:e.jsx(we,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"임대인 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"임대인의 연락처 정보를 입력해주세요"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-3",children:[e.jsx(d,{label:"임대인 이름",value:l.landlord_name||"",onChange:s=>r("landlord_name",s.target.value),placeholder:"홍길동",className:"text-sm sm:text-base h-11 sm:h-12"}),e.jsx(d,{label:"임대인 연락처",value:l.landlord_phone||"",onChange:s=>r("landlord_phone",s.target.value),placeholder:"010-1234-5678",className:"text-sm sm:text-base h-11 sm:h-12"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-3 sm:p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-4",children:[e.jsx("div",{className:"p-1.5 bg-gray-600 rounded-md",children:e.jsx(_e,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:"기타 정보"}),e.jsx("p",{className:"text-xs text-gray-600 hidden sm:block",children:"추가적인 매물 정보를 입력해주세요"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"매물 설명"}),e.jsx("textarea",{value:l.description||"",onChange:s=>r("description",s.target.value),placeholder:`매물에 대한 상세한 설명을 입력해주세요
예: 남향, 풀옵션, 교통 편리, 학군 좋음 등`,rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-xs sm:text-sm resize-none transition-colors"})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end space-y-reverse space-y-3 sm:space-y-0 sm:space-x-3 pt-4 border-t border-gray-200 mt-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:x,disabled:b,className:"w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2 text-sm sm:text-base active:scale-95",children:"취소"}),e.jsx(u,{type:"submit",variant:"primary",loading:b,leftIcon:e.jsx(Se,{size:16}),className:"w-full sm:w-auto px-4 sm:px-6 py-3 sm:py-2 text-sm sm:text-base bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 active:scale-95",children:"매물 등록"})]})]})})})]})}):null},Ve=()=>{const{user:p}=ge(),{tenant:x}=pe(),[t,b]=fe(),[l,f]=i.useState(""),[n,j]=i.useState(""),[w,v]=i.useState(!1),[r,_]=i.useState("전체"),[o,S]=i.useState("전체"),[m,C]=i.useState("전체"),[s,N]=i.useState("card"),[h,k]=i.useState(!1),[O,L]=i.useState(null),[H,D]=i.useState(!1),[J,R]=i.useState(!1),[Q,E]=i.useState(!1),[W,$]=i.useState(!1),[P,z]=i.useState(null),[q,y]=i.useState(null);i.useEffect(()=>{if(w)return;const a=setTimeout(()=>{j(l)},300);return()=>clearTimeout(a)},[l,w]),i.useEffect(()=>{if(t.get("create")==="true"){D(!0);const a=new URLSearchParams(t);a.delete("create"),b(a,{replace:!0})}},[t,b]);const Z=i.useMemo(()=>{const a={};return n&&(a.search=n),r!=="전체"&&(a.transaction_type=r),o!=="전체"&&(a.property_type=o),m!=="전체"&&(a.property_status=m),a},[n,r,o,m]),{properties:I,loading:ee,error:A,refreshProperties:se,createProperty:te,updateProperty:ae,deleteProperty:le}=je(Z),T=i.useMemo(()=>I?[...I].sort((a,c)=>a.status==="거래완료"&&c.status!=="거래완료"?1:a.status!=="거래완료"&&c.status==="거래완료"?-1:a.created_at&&c.created_at?new Date(c.created_at).getTime()-new Date(a.created_at).getTime():0):[],[I]),re=[{value:"전체",label:"전체"},{value:"매매",label:"매매"},{value:"전세",label:"전세"},{value:"월세",label:"월세"}],ie=[{value:"전체",label:"전체"},{value:"아파트",label:"아파트"},{value:"오피스텔",label:"오피스텔"},{value:"원룸",label:"원룸"},{value:"빌라",label:"빌라"}],ne=[{value:"전체",label:"전체"},{value:"거래중",label:"거래중"},{value:"거래완료",label:"거래완료"}],ce=()=>{const a=[];return r!=="전체"&&a.push(r),o!=="전체"&&a.push(o),m!=="전체"&&a.push(m),a.length===0?"매물명, 주소로 검색하세요...":`${a.join(" · ")} 매물 검색...`},X=()=>{const a=[];return r!=="전체"&&a.push(`거래: ${r}`),o!=="전체"&&a.push(`유형: ${o}`),m!=="전체"&&a.push(`상태: ${m}`),a},de=async()=>{if(O)try{await le(O.id),k(!1),L(null)}catch{}},oe=()=>{f(""),_("전체"),S("전체"),C("전체")},me=async a=>{try{R(!0);const c=await te(a)}catch(c){throw c}finally{R(!1)}},xe=async a=>{if(P)try{$(!0),await ae(P.id,a),E(!1),z(null)}catch(c){throw c}finally{$(!1)}},he=a=>{try{z(a),E(!0),y(null)}catch{alert("수정 폼을 열 수 없습니다. 다시 시도해주세요.")}},ue=a=>{try{window.confirm(`'${a.title}' 매물을 정말 삭제하시겠습니까?

이 작업은 되돌릴 수 없습니다.`)&&(L(a),k(!0),y(null))}catch{alert("삭제 확인 중 오류가 발생했습니다. 다시 시도해주세요.")}};return ee?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx(be,{size:"lg",text:"매물을 불러오는 중..."})}):A?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 mb-4",children:A}),e.jsx(u,{onClick:se,children:"다시 시도"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-3 sm:p-6 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[e.jsx("div",{className:"p-1.5 bg-blue-600 rounded-lg",children:e.jsx(F,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsx("h1",{className:"text-base sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"매물 관리"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-sm sm:text-lg font-bold text-blue-600",children:T.length}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"개"})]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-blue-700 font-medium truncate",children:x?.name})]})]}),e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center justify-center w-9 h-9 sm:w-auto sm:h-auto sm:px-4 sm:py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-md active:scale-95",children:[e.jsx(Ce,{size:16,className:"sm:w-5 sm:h-5 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline font-medium",children:"새 매물 등록"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3 sm:mb-6",children:[e.jsx("div",{className:"p-1 bg-gray-100 rounded",children:e.jsx(M,{className:"w-3 h-3 sm:w-5 sm:h-5 text-gray-600"})}),e.jsx("h2",{className:"text-sm sm:text-lg font-semibold text-gray-900",children:"검색 & 필터"}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"원하는 매물을 빠르게 찾아보세요"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(d,{placeholder:ce(),value:l,onChange:a=>f(a.target.value),onCompositionStart:()=>v(!0),onCompositionEnd:()=>v(!1),leftIcon:e.jsx(M,{size:16}),className:"text-sm h-10 sm:h-14 text-gray-700 bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),X().length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 flex flex-wrap gap-1 z-10",children:X().map((a,c)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded font-medium",children:a},c))})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 md:grid-cols-3 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"거래유형"}),e.jsx(g,{options:re,value:r,onChange:a=>_(a.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"매물유형"}),e.jsx(g,{options:ie,value:o,onChange:a=>S(a.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block sm:text-sm",children:"매물상태"}),e.jsx(g,{options:ne,value:m,onChange:a=>C(a.target.value),className:"w-full h-9 sm:h-12 text-xs sm:text-base bg-gray-50 border-gray-200 rounded-lg focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700 mr-2 sm:text-sm",children:"보기:"}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-0.5",children:[e.jsxs("button",{onClick:()=>N("card"),className:`flex items-center justify-center px-2 py-1.5 rounded transition-all duration-200 text-xs font-medium ${s==="card"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(ke,{size:12,className:"mr-1"}),"카드"]}),e.jsxs("button",{onClick:()=>N("list"),className:`flex items-center justify-center px-2 py-1.5 rounded transition-all duration-200 text-xs font-medium ${s==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(Pe,{size:12,className:"mr-1"}),"리스트"]})]})]}),e.jsx(u,{variant:"outline",onClick:oe,size:"sm",leftIcon:e.jsx(F,{size:12}),className:"text-xs font-medium px-3 py-1.5 bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200",children:"초기화"})]})]})]})]})}),T.length===0?e.jsxs(Y,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(M,{size:48,className:"mx-auto"})}),e.jsx("p",{className:"text-gray-500",children:"검색 조건에 맞는 매물이 없습니다."})]}):s==="card"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:T.map(a=>e.jsx(Te,{property:a,onClick:()=>y(a)},a.id))}):e.jsx(Le,{properties:T,onView:a=>y(a)}),e.jsx(Fe,{isOpen:H,onClose:()=>D(!1),onSubmit:me,loading:J}),q&&e.jsx(Oe,{property:q,isOpen:!0,onClose:()=>{y(null)},onEdit:a=>{he(a)},onDelete:a=>{ue(a)}}),P&&e.jsx(De,{isOpen:Q,onClose:()=>{E(!1),z(null)},onSubmit:xe,property:P,loading:W}),e.jsx(G,{isOpen:h,onClose:()=>k(!1),title:"매물 삭제",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["'",O?.title,"' 매물을 삭제하시겠습니까?",e.jsx("br",{}),"이 작업은 되돌릴 수 없습니다."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(u,{variant:"outline",onClick:()=>k(!1),children:"취소"}),e.jsx(u,{variant:"destructive",onClick:de,children:"삭제"})]})]})})]})},Le=({properties:p,onView:x})=>e.jsxs(Y,{children:[e.jsx("div",{className:"hidden lg:block bg-gray-50 border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-gray-700",children:[e.jsx("div",{className:"col-span-1",children:"거래유형"}),e.jsx("div",{className:"col-span-3",children:"매물정보"}),e.jsx("div",{className:"col-span-3",children:"가격정보"}),e.jsx("div",{className:"col-span-2",children:"임대인정보"}),e.jsx("div",{className:"col-span-1",children:"퇴실예정일"}),e.jsx("div",{className:"col-span-2",children:"추가정보"})]})}),e.jsx("div",{children:p.map(t=>e.jsxs("div",{className:"border-b border-gray-100 hover:bg-blue-50 transition-colors cursor-pointer touch-target relative",onClick:()=>x(t),children:[t.status==="거래완료"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:e.jsx("div",{className:"w-full h-0.5 bg-red-500 opacity-60"})}),e.jsx("div",{className:"hidden lg:block px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center text-sm",children:[e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(B,{size:"sm",variant:t.transaction_type==="매매"?"sale":t.transaction_type==="전세"?"jeonse":"monthly",children:t.transaction_type}),e.jsx(K,{status:t.status})]})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate text-sm mb-1",children:t.title}),e.jsxs("div",{className:"text-xs text-gray-600 truncate mb-1",children:["📍 ",t.address]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.type," • ",t.area,"m²(",Math.floor(t.area/3.3),"평) • ",t.floor,"/",t.total_floors,"층 • ",t.rooms,"룸"," ",t.bathrooms,"욕실"]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"font-bold text-gray-900 text-sm break-words",children:V(t)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["등록:"," ",t.created_at&&new Date(t.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}),e.jsx("div",{className:"col-span-2",children:t.landlord_name?e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-700 truncate",children:t.landlord_name}),t.landlord_phone&&e.jsx("div",{className:"text-gray-500 truncate",children:t.landlord_phone})]}):e.jsx("div",{className:"text-xs text-gray-400",children:"정보 없음"})}),e.jsx("div",{className:"col-span-1",children:t.exit_date?e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium text-gray-700",children:new Date(t.exit_date).toLocaleDateString("ko-KR")}),e.jsx("div",{className:"text-gray-500",children:"퇴실예정"})]}):e.jsx("div",{className:"text-xs text-gray-400",children:"미정"})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[e.jsxs("span",{className:`${t.parking?"text-green-600":"text-gray-400"}`,children:["🚗",t.parking?"주차":"주차X"]}),e.jsxs("span",{className:`${t.elevator?"text-green-600":"text-gray-400"}`,children:["🏢",t.elevator?"엘베":"엘베X"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["조회: ",t.view_count||0]})]})]})}),e.jsx("div",{className:"lg:hidden px-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{size:"sm",variant:t.transaction_type==="매매"?"sale":t.transaction_type==="전세"?"jeonse":"monthly",children:t.transaction_type}),e.jsx(K,{status:t.status})]}),e.jsx("div",{className:"font-bold text-primary-600 text-base",children:V(t)})]}),e.jsx("div",{className:"font-medium text-gray-900 text-base",children:t.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:["📍 ",t.address]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[t.type," • ",t.area,"m² (",Math.floor(t.area/3.3),"평) • ",t.floor,"/",t.total_floors,"층 • ",t.rooms,"룸"," ",t.bathrooms,"욕실"]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`${t.parking?"text-green-600":"text-gray-400"}`,children:["🚗",t.parking?"주차":"주차X"]}),e.jsxs("span",{className:`${t.elevator?"text-green-600":"text-gray-400"}`,children:["🏢",t.elevator?"엘베":"엘베X"]}),t.exit_date&&e.jsxs("span",{className:"text-orange-600",children:["퇴실:"," ",new Date(t.exit_date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}),e.jsxs("div",{children:["등록:"," ",t.created_at&&new Date(t.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]})]})})]},t.id))})]});export{Ve as PropertiesPageNew};
